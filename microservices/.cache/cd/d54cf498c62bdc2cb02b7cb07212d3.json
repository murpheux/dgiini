{"id":"dV7p","dependencies":[{"name":"/Users/murpheux/Workspace/projects/dgiini/microservices/.babelrc","includedInParent":true,"mtime":1557029603000},{"name":"/Users/murpheux/Workspace/projects/dgiini/microservices/package.json","includedInParent":true,"mtime":1563334619778},{"name":"./shared/winston","loc":{"line":13,"column":20},"parent":"/Users/murpheux/Workspace/projects/dgiini/microservices/src/task_api.js","resolved":"/Users/murpheux/Workspace/projects/dgiini/microservices/src/shared/winston.js"},{"name":"./shared/common","loc":{"line":14,"column":19},"parent":"/Users/murpheux/Workspace/projects/dgiini/microservices/src/task_api.js","resolved":"/Users/murpheux/Workspace/projects/dgiini/microservices/src/shared/common.js"},{"name":"./routes/task_route","loc":{"line":16,"column":24},"parent":"/Users/murpheux/Workspace/projects/dgiini/microservices/src/task_api.js","resolved":"/Users/murpheux/Workspace/projects/dgiini/microservices/src/routes/task_route.js"}],"generated":{"js":"\"use strict\";var e=c(require(\"dotenv/config\")),t=c(require(\"express\")),s=c(require(\"compression\")),r=c(require(\"body-parser\")),u=c(require(\"morgan\")),o=c(require(\"cors\")),d=c(require(\"uuid/v4\")),n=c(require(\"http-status-codes\")),a=c(require(\"./shared/winston\")),i=c(require(\"./shared/common\")),l=c(require(\"./routes/task_route\"));function c(e){return e&&e.__esModule?e:{default:e}}const f=process.env.LOG_LEVEL||\"debug\",p=process.env.LOG_FORMAT||\"combined\",q=process.env.PORT||process.env.TASK_API_PORT,v=\"http://localhost:9000\",_=(0,t.default)();if(_.use((0,s.default)()),e.default.error)throw e.default.error;const O=(e,t,s)=>{e.id=(0,d.default)(),s()};u.default.token(\"id\",e=>e.id),_.use(O),_.use(r.default.json()),_.use(r.default.urlencoded({extended:!1})),_.use((0,u.default)(p,{stream:a.default.stream})),_.use((0,o.default)({origin:v})),process.env.NODE_ENV,_.get(\"/api/\",(e,t)=>{let s={Service:`${i.default.app_name} ${i.default.version} ${i.default.build}`};t.status(n.default.OK).json(s)}),_.use(\"/api/\",l.default),_.use((e,t)=>{t.status(n.default.NOT_FOUND),e.accepts(\"json\")?t.send({error:\"API endpoint does not exist!\"}):t.type(\"txt\").send(\"API endpoint does not exist!\")}),_.listen(q,()=>console.log(`task api listening on port ${q}!`));"},"sourceMaps":{"js":{"mappings":[{"source":"task_api.js","original":{"line":2,"column":0},"generated":{"line":1,"column":0}},{"source":"task_api.js","original":{"line":4,"column":0},"generated":{"line":1,"column":13}},{"source":"task_api.js","original":{"line":4,"column":0},"generated":{"line":1,"column":17}},{"source":"task_api.js","original":{"line":4,"column":0},"generated":{"line":1,"column":19}},{"source":"task_api.js","original":{"line":4,"column":0},"generated":{"line":1,"column":21}},{"source":"task_api.js","original":{"line":4,"column":0},"generated":{"line":1,"column":29}},{"source":"task_api.js","original":{"line":5,"column":0},"generated":{"line":1,"column":47}},{"source":"task_api.js","original":{"line":5,"column":0},"generated":{"line":1,"column":49}},{"source":"task_api.js","original":{"line":5,"column":0},"generated":{"line":1,"column":51}},{"source":"task_api.js","original":{"line":5,"column":0},"generated":{"line":1,"column":59}},{"source":"task_api.js","original":{"line":6,"column":0},"generated":{"line":1,"column":71}},{"source":"task_api.js","original":{"line":6,"column":0},"generated":{"line":1,"column":73}},{"source":"task_api.js","original":{"line":6,"column":0},"generated":{"line":1,"column":75}},{"source":"task_api.js","original":{"line":6,"column":0},"generated":{"line":1,"column":83}},{"source":"task_api.js","original":{"line":7,"column":0},"generated":{"line":1,"column":99}},{"source":"task_api.js","original":{"line":7,"column":0},"generated":{"line":1,"column":101}},{"source":"task_api.js","original":{"line":7,"column":0},"generated":{"line":1,"column":103}},{"source":"task_api.js","original":{"line":7,"column":0},"generated":{"line":1,"column":111}},{"source":"task_api.js","original":{"line":8,"column":0},"generated":{"line":1,"column":127}},{"source":"task_api.js","original":{"line":8,"column":0},"generated":{"line":1,"column":129}},{"source":"task_api.js","original":{"line":8,"column":0},"generated":{"line":1,"column":131}},{"source":"task_api.js","original":{"line":8,"column":0},"generated":{"line":1,"column":139}},{"source":"task_api.js","original":{"line":9,"column":0},"generated":{"line":1,"column":150}},{"source":"task_api.js","original":{"line":9,"column":0},"generated":{"line":1,"column":152}},{"source":"task_api.js","original":{"line":9,"column":0},"generated":{"line":1,"column":154}},{"source":"task_api.js","original":{"line":9,"column":0},"generated":{"line":1,"column":162}},{"source":"task_api.js","original":{"line":10,"column":0},"generated":{"line":1,"column":171}},{"source":"task_api.js","original":{"line":10,"column":0},"generated":{"line":1,"column":173}},{"source":"task_api.js","original":{"line":10,"column":0},"generated":{"line":1,"column":175}},{"source":"task_api.js","original":{"line":10,"column":0},"generated":{"line":1,"column":183}},{"source":"task_api.js","original":{"line":11,"column":0},"generated":{"line":1,"column":195}},{"source":"task_api.js","original":{"line":11,"column":0},"generated":{"line":1,"column":197}},{"source":"task_api.js","original":{"line":11,"column":0},"generated":{"line":1,"column":199}},{"source":"task_api.js","original":{"line":11,"column":0},"generated":{"line":1,"column":207}},{"source":"task_api.js","original":{"line":13,"column":0},"generated":{"line":1,"column":229}},{"source":"task_api.js","original":{"line":13,"column":0},"generated":{"line":1,"column":231}},{"source":"task_api.js","original":{"line":13,"column":0},"generated":{"line":1,"column":233}},{"source":"task_api.js","original":{"line":13,"column":0},"generated":{"line":1,"column":241}},{"source":"task_api.js","original":{"line":14,"column":0},"generated":{"line":1,"column":262}},{"source":"task_api.js","original":{"line":14,"column":0},"generated":{"line":1,"column":264}},{"source":"task_api.js","original":{"line":14,"column":0},"generated":{"line":1,"column":266}},{"source":"task_api.js","original":{"line":14,"column":0},"generated":{"line":1,"column":274}},{"source":"task_api.js","original":{"line":16,"column":0},"generated":{"line":1,"column":294}},{"source":"task_api.js","original":{"line":16,"column":0},"generated":{"line":1,"column":296}},{"source":"task_api.js","original":{"line":16,"column":0},"generated":{"line":1,"column":298}},{"source":"task_api.js","original":{"line":16,"column":0},"generated":{"line":1,"column":306}},{"source":"task_api.js","original":{"line":75,"column":0},"generated":{"line":1,"column":330}},{"source":"task_api.js","original":{"line":75,"column":0},"generated":{"line":1,"column":339}},{"source":"task_api.js","original":{"line":75,"column":0},"generated":{"line":1,"column":341}},{"source":"task_api.js","original":{"line":75,"column":0},"generated":{"line":1,"column":344}},{"source":"task_api.js","original":{"line":75,"column":0},"generated":{"line":1,"column":351}},{"source":"task_api.js","original":{"line":75,"column":0},"generated":{"line":1,"column":354}},{"source":"task_api.js","original":{"line":75,"column":0},"generated":{"line":1,"column":356}},{"source":"task_api.js","original":{"line":75,"column":0},"generated":{"line":1,"column":367}},{"source":"task_api.js","original":{"line":75,"column":0},"generated":{"line":1,"column":369}},{"source":"task_api.js","original":{"line":75,"column":0},"generated":{"line":1,"column":370}},{"source":"task_api.js","original":{"line":75,"column":0},"generated":{"line":1,"column":378}},{"source":"task_api.js","original":{"line":19,"column":0},"generated":{"line":1,"column":381}},{"source":"task_api.js","name":"log_level","original":{"line":19,"column":6},"generated":{"line":1,"column":387}},{"source":"task_api.js","name":"process","original":{"line":19,"column":18},"generated":{"line":1,"column":389}},{"source":"task_api.js","name":"env","original":{"line":19,"column":26},"generated":{"line":1,"column":397}},{"source":"task_api.js","name":"LOG_LEVEL","original":{"line":19,"column":30},"generated":{"line":1,"column":401}},{"source":"task_api.js","original":{"line":19,"column":43},"generated":{"line":1,"column":412}},{"source":"task_api.js","name":"log_format","original":{"line":20,"column":6},"generated":{"line":1,"column":420}},{"source":"task_api.js","name":"process","original":{"line":20,"column":19},"generated":{"line":1,"column":422}},{"source":"task_api.js","name":"env","original":{"line":20,"column":27},"generated":{"line":1,"column":430}},{"source":"task_api.js","name":"LOG_FORMAT","original":{"line":20,"column":31},"generated":{"line":1,"column":434}},{"source":"task_api.js","original":{"line":20,"column":45},"generated":{"line":1,"column":446}},{"source":"task_api.js","name":"port","original":{"line":21,"column":6},"generated":{"line":1,"column":457}},{"source":"task_api.js","name":"process","original":{"line":21,"column":13},"generated":{"line":1,"column":459}},{"source":"task_api.js","name":"env","original":{"line":21,"column":21},"generated":{"line":1,"column":467}},{"source":"task_api.js","name":"PORT","original":{"line":21,"column":25},"generated":{"line":1,"column":471}},{"source":"task_api.js","name":"process","original":{"line":21,"column":33},"generated":{"line":1,"column":477}},{"source":"task_api.js","name":"env","original":{"line":21,"column":41},"generated":{"line":1,"column":485}},{"source":"task_api.js","name":"TASK_API_PORT","original":{"line":21,"column":45},"generated":{"line":1,"column":489}},{"source":"task_api.js","name":"CLIENT_URL","original":{"line":23,"column":6},"generated":{"line":1,"column":503}},{"source":"task_api.js","original":{"line":23,"column":19},"generated":{"line":1,"column":505}},{"source":"task_api.js","name":"app","original":{"line":25,"column":6},"generated":{"line":1,"column":529}},{"source":"task_api.js","original":{"line":25,"column":12},"generated":{"line":1,"column":532}},{"source":"task_api.js","original":{"line":25,"column":0},"generated":{"line":1,"column":534}},{"source":"task_api.js","original":{"line":25,"column":0},"generated":{"line":1,"column":536}},{"source":"task_api.js","original":{"line":29,"column":0},"generated":{"line":1,"column":547}},{"source":"task_api.js","name":"app","original":{"line":26,"column":0},"generated":{"line":1,"column":550}},{"source":"task_api.js","name":"use","original":{"line":26,"column":4},"generated":{"line":1,"column":552}},{"source":"task_api.js","original":{"line":26,"column":8},"generated":{"line":1,"column":557}},{"source":"task_api.js","original":{"line":26,"column":0},"generated":{"line":1,"column":559}},{"source":"task_api.js","original":{"line":26,"column":0},"generated":{"line":1,"column":561}},{"source":"task_api.js","name":"config","original":{"line":29,"column":4},"generated":{"line":1,"column":573}},{"source":"task_api.js","name":"error","original":{"line":29,"column":11},"generated":{"line":1,"column":575}},{"source":"task_api.js","name":"error","original":{"line":29,"column":11},"generated":{"line":1,"column":583}},{"source":"task_api.js","name":"config","original":{"line":29,"column":26},"generated":{"line":1,"column":589}},{"source":"task_api.js","name":"config","original":{"line":29,"column":26},"generated":{"line":1,"column":595}},{"source":"task_api.js","name":"error","original":{"line":29,"column":33},"generated":{"line":1,"column":597}},{"source":"task_api.js","name":"error","original":{"line":29,"column":33},"generated":{"line":1,"column":605}},{"source":"task_api.js","original":{"line":32,"column":0},"generated":{"line":1,"column":611}},{"source":"task_api.js","name":"requestId","original":{"line":32,"column":6},"generated":{"line":1,"column":617}},{"source":"task_api.js","original":{"line":32,"column":18},"generated":{"line":1,"column":619}},{"source":"task_api.js","name":"req","original":{"line":32,"column":19},"generated":{"line":1,"column":620}},{"source":"task_api.js","name":"res","original":{"line":32,"column":24},"generated":{"line":1,"column":622}},{"source":"task_api.js","name":"next","original":{"line":32,"column":29},"generated":{"line":1,"column":624}},{"source":"task_api.js","name":"req","original":{"line":33,"column":4},"generated":{"line":1,"column":629}},{"source":"task_api.js","name":"id","original":{"line":33,"column":8},"generated":{"line":1,"column":631}},{"source":"task_api.js","original":{"line":33,"column":13},"generated":{"line":1,"column":635}},{"source":"task_api.js","original":{"line":33,"column":4},"generated":{"line":1,"column":637}},{"source":"task_api.js","original":{"line":33,"column":4},"generated":{"line":1,"column":639}},{"source":"task_api.js","name":"next","original":{"line":34,"column":4},"generated":{"line":1,"column":650}},{"source":"task_api.js","name":"morgan","original":{"line":37,"column":0},"generated":{"line":1,"column":655}},{"source":"task_api.js","name":"token","original":{"line":37,"column":7},"generated":{"line":1,"column":657}},{"source":"task_api.js","name":"token","original":{"line":37,"column":7},"generated":{"line":1,"column":665}},{"source":"task_api.js","original":{"line":37,"column":13},"generated":{"line":1,"column":671}},{"source":"task_api.js","name":"req","original":{"line":37,"column":20},"generated":{"line":1,"column":676}},{"source":"task_api.js","name":"req","original":{"line":37,"column":37},"generated":{"line":1,"column":679}},{"source":"task_api.js","name":"id","original":{"line":37,"column":41},"generated":{"line":1,"column":681}},{"source":"task_api.js","name":"app","original":{"line":39,"column":0},"generated":{"line":1,"column":685}},{"source":"task_api.js","name":"use","original":{"line":39,"column":4},"generated":{"line":1,"column":687}},{"source":"task_api.js","name":"requestId","original":{"line":39,"column":8},"generated":{"line":1,"column":691}},{"source":"task_api.js","name":"app","original":{"line":40,"column":0},"generated":{"line":1,"column":694}},{"source":"task_api.js","name":"use","original":{"line":40,"column":4},"generated":{"line":1,"column":696}},{"source":"task_api.js","name":"bodyParser","original":{"line":40,"column":8},"generated":{"line":1,"column":700}},{"source":"task_api.js","name":"json","original":{"line":40,"column":19},"generated":{"line":1,"column":702}},{"source":"task_api.js","name":"json","original":{"line":40,"column":19},"generated":{"line":1,"column":710}},{"source":"task_api.js","name":"app","original":{"line":41,"column":0},"generated":{"line":1,"column":718}},{"source":"task_api.js","name":"use","original":{"line":41,"column":4},"generated":{"line":1,"column":720}},{"source":"task_api.js","name":"bodyParser","original":{"line":41,"column":8},"generated":{"line":1,"column":724}},{"source":"task_api.js","name":"urlencoded","original":{"line":41,"column":19},"generated":{"line":1,"column":726}},{"source":"task_api.js","name":"urlencoded","original":{"line":41,"column":19},"generated":{"line":1,"column":734}},{"source":"task_api.js","original":{"line":41,"column":30},"generated":{"line":1,"column":745}},{"source":"task_api.js","name":"extended","original":{"line":41,"column":32},"generated":{"line":1,"column":746}},{"source":"task_api.js","original":{"line":41,"column":42},"generated":{"line":1,"column":756}},{"source":"task_api.js","name":"app","original":{"line":43,"column":0},"generated":{"line":1,"column":761}},{"source":"task_api.js","name":"use","original":{"line":43,"column":4},"generated":{"line":1,"column":763}},{"source":"task_api.js","original":{"line":43,"column":8},"generated":{"line":1,"column":768}},{"source":"task_api.js","name":"log_format","original":{"line":43,"column":15},"generated":{"line":1,"column":770}},{"source":"task_api.js","name":"log_format","original":{"line":43,"column":15},"generated":{"line":1,"column":772}},{"source":"task_api.js","name":"log_format","original":{"line":43,"column":15},"generated":{"line":1,"column":781}},{"source":"task_api.js","original":{"line":43,"column":27},"generated":{"line":1,"column":783}},{"source":"task_api.js","name":"stream","original":{"line":43,"column":29},"generated":{"line":1,"column":784}},{"source":"task_api.js","name":"winston","original":{"line":43,"column":37},"generated":{"line":1,"column":791}},{"source":"task_api.js","name":"stream","original":{"line":43,"column":45},"generated":{"line":1,"column":793}},{"source":"task_api.js","name":"stream","original":{"line":43,"column":45},"generated":{"line":1,"column":801}},{"source":"task_api.js","name":"app","original":{"line":44,"column":0},"generated":{"line":1,"column":811}},{"source":"task_api.js","name":"use","original":{"line":44,"column":4},"generated":{"line":1,"column":813}},{"source":"task_api.js","original":{"line":44,"column":8},"generated":{"line":1,"column":818}},{"source":"task_api.js","original":{"line":44,"column":13},"generated":{"line":1,"column":820}},{"source":"task_api.js","original":{"line":44,"column":13},"generated":{"line":1,"column":822}},{"source":"task_api.js","original":{"line":44,"column":13},"generated":{"line":1,"column":831}},{"source":"task_api.js","name":"origin","original":{"line":44,"column":15},"generated":{"line":1,"column":832}},{"source":"task_api.js","name":"CLIENT_URL","original":{"line":44,"column":23},"generated":{"line":1,"column":839}},{"source":"task_api.js","name":"process","original":{"line":46,"column":4},"generated":{"line":1,"column":844}},{"source":"task_api.js","name":"env","original":{"line":46,"column":12},"generated":{"line":1,"column":852}},{"source":"task_api.js","name":"NODE_ENV","original":{"line":46,"column":16},"generated":{"line":1,"column":856}},{"source":"task_api.js","name":"app","original":{"line":51,"column":0},"generated":{"line":1,"column":865}},{"source":"task_api.js","name":"get","original":{"line":51,"column":4},"generated":{"line":1,"column":867}},{"source":"task_api.js","original":{"line":51,"column":8},"generated":{"line":1,"column":871}},{"source":"task_api.js","original":{"line":51,"column":17},"generated":{"line":1,"column":879}},{"source":"task_api.js","name":"req","original":{"line":51,"column":18},"generated":{"line":1,"column":880}},{"source":"task_api.js","name":"res","original":{"line":51,"column":23},"generated":{"line":1,"column":882}},{"source":"task_api.js","name":"payload","original":{"line":52,"column":8},"generated":{"line":1,"column":887}},{"source":"task_api.js","name":"payload","original":{"line":52,"column":8},"generated":{"line":1,"column":891}},{"source":"task_api.js","original":{"line":52,"column":18},"generated":{"line":1,"column":893}},{"source":"task_api.js","original":{"line":53,"column":20},"generated":{"line":1,"column":894}},{"source":"task_api.js","name":"common","original":{"line":53,"column":22},"generated":{"line":1,"column":905}},{"source":"task_api.js","name":"app_name","original":{"line":53,"column":29},"generated":{"line":1,"column":907}},{"source":"task_api.js","name":"app_name","original":{"line":53,"column":29},"generated":{"line":1,"column":915}},{"source":"task_api.js","name":"common","original":{"line":53,"column":41},"generated":{"line":1,"column":927}},{"source":"task_api.js","name":"version","original":{"line":53,"column":48},"generated":{"line":1,"column":929}},{"source":"task_api.js","name":"version","original":{"line":53,"column":48},"generated":{"line":1,"column":937}},{"source":"task_api.js","name":"common","original":{"line":53,"column":59},"generated":{"line":1,"column":948}},{"source":"task_api.js","name":"build","original":{"line":53,"column":66},"generated":{"line":1,"column":950}},{"source":"task_api.js","name":"build","original":{"line":53,"column":66},"generated":{"line":1,"column":958}},{"source":"task_api.js","name":"res","original":{"line":55,"column":4},"generated":{"line":1,"column":967}},{"source":"task_api.js","name":"status","original":{"line":55,"column":8},"generated":{"line":1,"column":969}},{"source":"task_api.js","name":"HttpStatus","original":{"line":55,"column":15},"generated":{"line":1,"column":976}},{"source":"task_api.js","name":"OK","original":{"line":55,"column":26},"generated":{"line":1,"column":978}},{"source":"task_api.js","name":"OK","original":{"line":55,"column":26},"generated":{"line":1,"column":986}},{"source":"task_api.js","name":"json","original":{"line":55,"column":30},"generated":{"line":1,"column":990}},{"source":"task_api.js","name":"payload","original":{"line":55,"column":35},"generated":{"line":1,"column":995}},{"source":"task_api.js","name":"app","original":{"line":58,"column":0},"generated":{"line":1,"column":1000}},{"source":"task_api.js","name":"use","original":{"line":58,"column":4},"generated":{"line":1,"column":1002}},{"source":"task_api.js","original":{"line":58,"column":8},"generated":{"line":1,"column":1006}},{"source":"task_api.js","name":"task_router","original":{"line":58,"column":17},"generated":{"line":1,"column":1014}},{"source":"task_api.js","original":{"line":58,"column":0},"generated":{"line":1,"column":1016}},{"source":"task_api.js","name":"app","original":{"line":61,"column":0},"generated":{"line":1,"column":1025}},{"source":"task_api.js","name":"use","original":{"line":61,"column":4},"generated":{"line":1,"column":1027}},{"source":"task_api.js","original":{"line":61,"column":8},"generated":{"line":1,"column":1031}},{"source":"task_api.js","name":"req","original":{"line":61,"column":9},"generated":{"line":1,"column":1032}},{"source":"task_api.js","name":"res","original":{"line":61,"column":14},"generated":{"line":1,"column":1034}},{"source":"task_api.js","name":"res","original":{"line":62,"column":4},"generated":{"line":1,"column":1039}},{"source":"task_api.js","name":"status","original":{"line":62,"column":8},"generated":{"line":1,"column":1041}},{"source":"task_api.js","name":"HttpStatus","original":{"line":62,"column":15},"generated":{"line":1,"column":1048}},{"source":"task_api.js","name":"NOT_FOUND","original":{"line":62,"column":26},"generated":{"line":1,"column":1050}},{"source":"task_api.js","name":"NOT_FOUND","original":{"line":62,"column":26},"generated":{"line":1,"column":1058}},{"source":"task_api.js","name":"req","original":{"line":65,"column":8},"generated":{"line":1,"column":1069}},{"source":"task_api.js","name":"accepts","original":{"line":65,"column":12},"generated":{"line":1,"column":1071}},{"source":"task_api.js","original":{"line":65,"column":20},"generated":{"line":1,"column":1079}},{"source":"task_api.js","name":"res","original":{"line":66,"column":8},"generated":{"line":1,"column":1087}},{"source":"task_api.js","name":"send","original":{"line":66,"column":12},"generated":{"line":1,"column":1089}},{"source":"task_api.js","original":{"line":66,"column":17},"generated":{"line":1,"column":1094}},{"source":"task_api.js","name":"error","original":{"line":66,"column":19},"generated":{"line":1,"column":1095}},{"source":"task_api.js","original":{"line":66,"column":26},"generated":{"line":1,"column":1101}},{"source":"task_api.js","name":"res","original":{"line":71,"column":4},"generated":{"line":1,"column":1134}},{"source":"task_api.js","name":"type","original":{"line":71,"column":8},"generated":{"line":1,"column":1136}},{"source":"task_api.js","original":{"line":71,"column":13},"generated":{"line":1,"column":1141}},{"source":"task_api.js","name":"send","original":{"line":71,"column":20},"generated":{"line":1,"column":1148}},{"source":"task_api.js","original":{"line":71,"column":25},"generated":{"line":1,"column":1153}},{"source":"task_api.js","name":"app","original":{"line":75,"column":0},"generated":{"line":1,"column":1187}},{"source":"task_api.js","name":"listen","original":{"line":75,"column":4},"generated":{"line":1,"column":1189}},{"source":"task_api.js","name":"port","original":{"line":75,"column":11},"generated":{"line":1,"column":1196}},{"source":"task_api.js","original":{"line":75,"column":17},"generated":{"line":1,"column":1198}},{"source":"task_api.js","name":"console","original":{"line":75,"column":23},"generated":{"line":1,"column":1202}},{"source":"task_api.js","name":"log","original":{"line":75,"column":31},"generated":{"line":1,"column":1210}},{"source":"task_api.js","name":"port","original":{"line":75,"column":65},"generated":{"line":1,"column":1244}}],"sources":{"task_api.js":"/* eslint-disable no-console */\n'use strict'\n\nimport config from 'dotenv/config'\nimport express from 'express'\nimport compression from 'compression'\nimport bodyParser from 'body-parser'\nimport morgan from 'morgan'\nimport cors from 'cors'\nimport uuid from 'uuid/v4'\nimport HttpStatus from 'http-status-codes'\n\nimport winston from './shared/winston'\nimport common from './shared/common'\n\nimport task_router from './routes/task_route'\n\n// eslint-disable-next-line no-unused-vars\nconst log_level = process.env.LOG_LEVEL || 'debug'\nconst log_format = process.env.LOG_FORMAT || 'combined'\nconst port = process.env.PORT || process.env.TASK_API_PORT\n\nconst CLIENT_URL = 'http://localhost:9000'\n\nconst app = express()\napp.use(compression()) // use compression\n\n// check configuration\nif (config.error) { throw config.error }\n\n// id for log\nconst requestId = (req, res, next) => {\n    req.id = uuid()\n    next()\n}\n\nmorgan.token('id', (req) => { return req.id })\n\napp.use(requestId)\napp.use(bodyParser.json())\napp.use(bodyParser.urlencoded({ extended: false }))\n\napp.use(morgan(log_format, { stream: winston.stream }))\napp.use(cors({ origin: CLIENT_URL }))\n\nif (process.env.NODE_ENV === 'production') {\n    //running in production\n}\n\n// ping\napp.get('/api/', (req, res) => {\n    let payload = {\n        'Service': `${common.app_name} ${common.version} ${common.build}`\n    }\n    res.status(HttpStatus.OK).json(payload)\n})\n\napp.use('/api/', task_router)\n\n// 404\napp.use((req, res) => {\n    res.status(HttpStatus.NOT_FOUND)\n\n    // respond with json\n    if (req.accepts('json')) {\n        res.send({ error: 'API endpoint does not exist!' })\n        return\n    }\n\n    // default to plain-text. send()\n    res.type('txt').send('API endpoint does not exist!')\n})\n\n//start the app server\napp.listen(port, () => console.log(`task api listening on port ${port}!`))"},"lineCount":null}},"error":null,"hash":"036fac873b9e1ac4798eb527f40c9579","cacheData":{"env":{}}}