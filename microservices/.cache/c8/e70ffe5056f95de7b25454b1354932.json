{"id":"qJXE","dependencies":[{"name":"/Users/murpheux/Workspace/projects/dgiini/microservices/package.json","includedInParent":true,"mtime":1563323962672},{"name":"/Users/murpheux/Workspace/projects/dgiini/microservices/.babelrc","includedInParent":true,"mtime":1557029603000},{"name":"/Users/murpheux/Workspace/projects/dgiini/microservices/node_modules/mongodb/package.json","includedInParent":true,"mtime":1561227911480},{"name":"../aggregation_cursor","loc":{"line":3,"column":34},"parent":"/Users/murpheux/Workspace/projects/dgiini/microservices/node_modules/mongodb/lib/operations/aggregate.js","resolved":"/Users/murpheux/Workspace/projects/dgiini/microservices/node_modules/mongodb/lib/aggregation_cursor.js"},{"name":"../utils","loc":{"line":10,"column":24},"parent":"/Users/murpheux/Workspace/projects/dgiini/microservices/node_modules/mongodb/lib/operations/aggregate.js","resolved":"/Users/murpheux/Workspace/projects/dgiini/microservices/node_modules/mongodb/lib/utils.js"},{"name":"mongodb-core","loc":{"line":8,"column":27},"parent":"/Users/murpheux/Workspace/projects/dgiini/microservices/node_modules/mongodb/lib/operations/aggregate.js","resolved":"/Users/murpheux/Workspace/projects/dgiini/microservices/node_modules/mongodb-core/index.js"}],"generated":{"js":"\"use strict\";function e(o){return(e=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(o)}const o=require(\"../aggregation_cursor\"),t=require(\"../utils\").applyWriteConcern,r=require(\"../utils\").decorateWithCollation,n=require(\"../utils\").decorateWithReadConcern,i=require(\"../utils\").handleCallback,a=require(\"mongodb-core\").MongoError,c=require(\"../utils\").resolveReadPreference,s=require(\"../utils\").toError,u=1;function l(l,p,m,b,y){const f=\"string\"==typeof p,g=f?l:p,d=g.s.topology;let h,w,S,C=!1;\"string\"==typeof b.out?(m=m.concat({$out:b.out}),C=!0):m.length>0&&m[m.length-1].$out&&(C=!0),f?(h={aggregate:u,pipeline:m},w=\"\".concat(l.s.databaseName,\".\").concat(u),S={db:l}):(h={aggregate:p.s.name,pipeline:m},w=p.s.namespace,S={db:p.s.db,collection:p});const q=d.capabilities().commandsTakeWriteConcern;C||n(h,g,b),m.length>0&&m[m.length-1].$out&&q&&t(h,S,b);try{r(h,g,b)}catch(x){if(\"function\"==typeof y)return y(x,null);throw x}if(!0===b.bypassDocumentValidation&&(h.bypassDocumentValidation=b.bypassDocumentValidation),\"boolean\"==typeof b.allowDiskUse&&(h.allowDiskUse=b.allowDiskUse),\"number\"==typeof b.maxTimeMS&&(h.maxTimeMS=b.maxTimeMS),b.hint&&(h.hint=b.hint),(b=Object.assign({},b)).readPreference=c(b,S),b.explain){if(h.readConcern||h.writeConcern)throw s('\"explain\" cannot be used on an aggregate call with readConcern/writeConcern');h.explain=b.explain}if(\"string\"==typeof b.comment&&(h.comment=b.comment),null!=b.cursor&&\"object\"!==e(b.cursor))throw s(\"cursor options must be an object\");if(b.cursor=b.cursor||{},b.batchSize&&!C&&(b.cursor.batchSize=b.batchSize),h.cursor=b.cursor,b.promiseLibrary=g.s.promiseLibrary,b.cursorFactory=o,\"function\"!=typeof y){if(!d.capabilities())throw new a(\"cannot connect to server\");return d.cursor(w,h,b)}return i(y,null,d.cursor(w,h,b))}module.exports={aggregate:l};"},"sourceMaps":{"js":{"mappings":[{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":119,"column":0},"generated":{"line":1,"column":13}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":119,"column":0},"generated":{"line":1,"column":22}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":119,"column":0},"generated":{"line":1,"column":24}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":119,"column":0},"generated":{"line":1,"column":27}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":119,"column":0},"generated":{"line":1,"column":34}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":119,"column":0},"generated":{"line":1,"column":36}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":119,"column":0},"generated":{"line":1,"column":55}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":119,"column":0},"generated":{"line":1,"column":63}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":119,"column":0},"generated":{"line":1,"column":80}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":119,"column":0},"generated":{"line":1,"column":87}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":119,"column":0},"generated":{"line":1,"column":96}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":119,"column":0},"generated":{"line":1,"column":105}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":119,"column":0},"generated":{"line":1,"column":108}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":119,"column":0},"generated":{"line":1,"column":122}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":119,"column":0},"generated":{"line":1,"column":125}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":119,"column":0},"generated":{"line":1,"column":134}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":119,"column":0},"generated":{"line":1,"column":137}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":119,"column":0},"generated":{"line":1,"column":144}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":119,"column":0},"generated":{"line":1,"column":147}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":119,"column":0},"generated":{"line":1,"column":166}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":119,"column":0},"generated":{"line":1,"column":174}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":119,"column":0},"generated":{"line":1,"column":176}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":119,"column":0},"generated":{"line":1,"column":190}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":119,"column":0},"generated":{"line":1,"column":198}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":119,"column":0},"generated":{"line":1,"column":202}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":119,"column":0},"generated":{"line":1,"column":209}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":119,"column":0},"generated":{"line":1,"column":219}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":119,"column":0},"generated":{"line":1,"column":235}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":119,"column":0},"generated":{"line":1,"column":239}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":3,"column":0},"generated":{"line":1,"column":242}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"AggregationCursor","original":{"line":3,"column":6},"generated":{"line":1,"column":248}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"require","original":{"line":3,"column":26},"generated":{"line":1,"column":250}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":3,"column":34},"generated":{"line":1,"column":258}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"applyWriteConcern","original":{"line":4,"column":6},"generated":{"line":1,"column":283}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"require","original":{"line":4,"column":26},"generated":{"line":1,"column":285}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":4,"column":34},"generated":{"line":1,"column":293}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"applyWriteConcern","original":{"line":4,"column":46},"generated":{"line":1,"column":305}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"decorateWithCollation","original":{"line":5,"column":6},"generated":{"line":1,"column":323}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"require","original":{"line":5,"column":30},"generated":{"line":1,"column":325}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":5,"column":38},"generated":{"line":1,"column":333}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"decorateWithCollation","original":{"line":5,"column":50},"generated":{"line":1,"column":345}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"decorateWithReadConcern","original":{"line":6,"column":6},"generated":{"line":1,"column":367}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"require","original":{"line":6,"column":32},"generated":{"line":1,"column":369}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":6,"column":40},"generated":{"line":1,"column":377}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"decorateWithReadConcern","original":{"line":6,"column":52},"generated":{"line":1,"column":389}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"handleCallback","original":{"line":7,"column":6},"generated":{"line":1,"column":413}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"require","original":{"line":7,"column":23},"generated":{"line":1,"column":415}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":7,"column":31},"generated":{"line":1,"column":423}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"handleCallback","original":{"line":7,"column":43},"generated":{"line":1,"column":435}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"MongoError","original":{"line":8,"column":6},"generated":{"line":1,"column":450}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"require","original":{"line":8,"column":19},"generated":{"line":1,"column":452}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":8,"column":27},"generated":{"line":1,"column":460}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"MongoError","original":{"line":8,"column":43},"generated":{"line":1,"column":476}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"resolveReadPreference","original":{"line":9,"column":6},"generated":{"line":1,"column":487}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"require","original":{"line":9,"column":30},"generated":{"line":1,"column":489}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":9,"column":38},"generated":{"line":1,"column":497}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"resolveReadPreference","original":{"line":9,"column":50},"generated":{"line":1,"column":509}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"toError","original":{"line":10,"column":6},"generated":{"line":1,"column":531}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"require","original":{"line":10,"column":16},"generated":{"line":1,"column":533}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":10,"column":24},"generated":{"line":1,"column":541}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"toError","original":{"line":10,"column":36},"generated":{"line":1,"column":553}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"DB_AGGREGATE_COLLECTION","original":{"line":12,"column":6},"generated":{"line":1,"column":561}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":12,"column":32},"generated":{"line":1,"column":563}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":24,"column":0},"generated":{"line":1,"column":565}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"aggregate","original":{"line":24,"column":9},"generated":{"line":1,"column":574}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"db","original":{"line":24,"column":19},"generated":{"line":1,"column":576}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"coll","original":{"line":24,"column":23},"generated":{"line":1,"column":578}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"pipeline","original":{"line":24,"column":29},"generated":{"line":1,"column":580}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"options","original":{"line":24,"column":39},"generated":{"line":1,"column":582}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"callback","original":{"line":24,"column":48},"generated":{"line":1,"column":584}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"isDbAggregate","original":{"line":25,"column":8},"generated":{"line":1,"column":587}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"isDbAggregate","original":{"line":25,"column":8},"generated":{"line":1,"column":593}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":25,"column":40},"generated":{"line":1,"column":595}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"coll","original":{"line":25,"column":31},"generated":{"line":1,"column":612}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"target","original":{"line":26,"column":8},"generated":{"line":1,"column":614}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"isDbAggregate","original":{"line":26,"column":17},"generated":{"line":1,"column":616}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"db","original":{"line":26,"column":33},"generated":{"line":1,"column":618}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"coll","original":{"line":26,"column":38},"generated":{"line":1,"column":620}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"topology","original":{"line":27,"column":8},"generated":{"line":1,"column":622}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"target","original":{"line":27,"column":19},"generated":{"line":1,"column":624}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"s","original":{"line":27,"column":26},"generated":{"line":1,"column":626}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"topology","original":{"line":27,"column":28},"generated":{"line":1,"column":628}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"hasOutStage","original":{"line":28,"column":6},"generated":{"line":1,"column":637}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"command","original":{"line":37,"column":6},"generated":{"line":1,"column":641}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"namespace","original":{"line":38,"column":6},"generated":{"line":1,"column":643}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"optionSources","original":{"line":39,"column":6},"generated":{"line":1,"column":645}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"hasOutStage","original":{"line":28,"column":6},"generated":{"line":1,"column":647}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":28,"column":20},"generated":{"line":1,"column":650}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":30,"column":29},"generated":{"line":1,"column":652}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"options","original":{"line":30,"column":13},"generated":{"line":1,"column":669}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"out","original":{"line":30,"column":21},"generated":{"line":1,"column":671}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"pipeline","original":{"line":31,"column":4},"generated":{"line":1,"column":676}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"pipeline","original":{"line":31,"column":15},"generated":{"line":1,"column":678}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"concat","original":{"line":31,"column":24},"generated":{"line":1,"column":680}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":31,"column":31},"generated":{"line":1,"column":687}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"$out","original":{"line":31,"column":33},"generated":{"line":1,"column":688}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"options","original":{"line":31,"column":39},"generated":{"line":1,"column":693}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"out","original":{"line":31,"column":47},"generated":{"line":1,"column":695}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"hasOutStage","original":{"line":32,"column":4},"generated":{"line":1,"column":701}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":32,"column":18},"generated":{"line":1,"column":704}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"pipeline","original":{"line":33,"column":13},"generated":{"line":1,"column":707}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"length","original":{"line":33,"column":22},"generated":{"line":1,"column":709}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":33,"column":31},"generated":{"line":1,"column":716}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"pipeline","original":{"line":33,"column":36},"generated":{"line":1,"column":719}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"pipeline","original":{"line":33,"column":45},"generated":{"line":1,"column":721}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"length","original":{"line":33,"column":54},"generated":{"line":1,"column":723}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":33,"column":63},"generated":{"line":1,"column":730}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":33,"column":36},"generated":{"line":1,"column":733}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"hasOutStage","original":{"line":34,"column":4},"generated":{"line":1,"column":740}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":34,"column":18},"generated":{"line":1,"column":743}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"isDbAggregate","original":{"line":41,"column":6},"generated":{"line":1,"column":746}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"command","original":{"line":42,"column":4},"generated":{"line":1,"column":749}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":42,"column":14},"generated":{"line":1,"column":751}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"aggregate","original":{"line":42,"column":16},"generated":{"line":1,"column":752}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"DB_AGGREGATE_COLLECTION","original":{"line":42,"column":27},"generated":{"line":1,"column":762}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"pipeline","original":{"line":42,"column":52},"generated":{"line":1,"column":764}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"pipeline","original":{"line":42,"column":62},"generated":{"line":1,"column":773}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"namespace","original":{"line":43,"column":4},"generated":{"line":1,"column":776}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"db","original":{"line":43,"column":19},"generated":{"line":1,"column":778}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"db","original":{"line":43,"column":19},"generated":{"line":1,"column":781}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"db","original":{"line":43,"column":19},"generated":{"line":1,"column":788}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"s","original":{"line":43,"column":22},"generated":{"line":1,"column":790}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"databaseName","original":{"line":43,"column":24},"generated":{"line":1,"column":792}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"DB_AGGREGATE_COLLECTION","original":{"line":43,"column":40},"generated":{"line":1,"column":805}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"DB_AGGREGATE_COLLECTION","original":{"line":43,"column":40},"generated":{"line":1,"column":810}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"DB_AGGREGATE_COLLECTION","original":{"line":43,"column":40},"generated":{"line":1,"column":817}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"optionSources","original":{"line":45,"column":4},"generated":{"line":1,"column":820}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":45,"column":20},"generated":{"line":1,"column":822}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"db","original":{"line":45,"column":22},"generated":{"line":1,"column":823}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"db","original":{"line":45,"column":22},"generated":{"line":1,"column":826}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"command","original":{"line":47,"column":4},"generated":{"line":1,"column":831}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":47,"column":14},"generated":{"line":1,"column":833}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"aggregate","original":{"line":47,"column":16},"generated":{"line":1,"column":834}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"coll","original":{"line":47,"column":27},"generated":{"line":1,"column":844}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"s","original":{"line":47,"column":32},"generated":{"line":1,"column":846}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"name","original":{"line":47,"column":34},"generated":{"line":1,"column":848}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"pipeline","original":{"line":47,"column":40},"generated":{"line":1,"column":853}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"pipeline","original":{"line":47,"column":50},"generated":{"line":1,"column":862}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"namespace","original":{"line":48,"column":4},"generated":{"line":1,"column":865}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"coll","original":{"line":48,"column":16},"generated":{"line":1,"column":867}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"s","original":{"line":48,"column":21},"generated":{"line":1,"column":869}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"namespace","original":{"line":48,"column":23},"generated":{"line":1,"column":871}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"optionSources","original":{"line":50,"column":4},"generated":{"line":1,"column":881}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":50,"column":20},"generated":{"line":1,"column":883}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"db","original":{"line":50,"column":22},"generated":{"line":1,"column":884}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"coll","original":{"line":50,"column":26},"generated":{"line":1,"column":887}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"s","original":{"line":50,"column":31},"generated":{"line":1,"column":889}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"db","original":{"line":50,"column":33},"generated":{"line":1,"column":891}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"collection","original":{"line":50,"column":37},"generated":{"line":1,"column":894}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"coll","original":{"line":50,"column":49},"generated":{"line":1,"column":905}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"takesWriteConcern","original":{"line":53,"column":8},"generated":{"line":1,"column":909}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"takesWriteConcern","original":{"line":53,"column":8},"generated":{"line":1,"column":915}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"topology","original":{"line":53,"column":28},"generated":{"line":1,"column":917}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"capabilities","original":{"line":53,"column":37},"generated":{"line":1,"column":919}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"commandsTakeWriteConcern","original":{"line":53,"column":52},"generated":{"line":1,"column":934}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"hasOutStage","original":{"line":55,"column":7},"generated":{"line":1,"column":959}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"decorateWithReadConcern","original":{"line":56,"column":4},"generated":{"line":1,"column":962}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"command","original":{"line":56,"column":28},"generated":{"line":1,"column":964}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"target","original":{"line":56,"column":37},"generated":{"line":1,"column":966}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"options","original":{"line":56,"column":45},"generated":{"line":1,"column":968}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"pipeline","original":{"line":59,"column":6},"generated":{"line":1,"column":971}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"length","original":{"line":59,"column":15},"generated":{"line":1,"column":973}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":59,"column":24},"generated":{"line":1,"column":980}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"pipeline","original":{"line":59,"column":29},"generated":{"line":1,"column":983}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"pipeline","original":{"line":59,"column":38},"generated":{"line":1,"column":985}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"length","original":{"line":59,"column":47},"generated":{"line":1,"column":987}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":59,"column":56},"generated":{"line":1,"column":994}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":59,"column":29},"generated":{"line":1,"column":997}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"takesWriteConcern","original":{"line":59,"column":70},"generated":{"line":1,"column":1003}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"applyWriteConcern","original":{"line":60,"column":4},"generated":{"line":1,"column":1006}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"command","original":{"line":60,"column":22},"generated":{"line":1,"column":1008}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"optionSources","original":{"line":60,"column":31},"generated":{"line":1,"column":1010}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"options","original":{"line":60,"column":46},"generated":{"line":1,"column":1012}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":63,"column":6},"generated":{"line":1,"column":1015}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"decorateWithCollation","original":{"line":64,"column":4},"generated":{"line":1,"column":1019}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"command","original":{"line":64,"column":26},"generated":{"line":1,"column":1021}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"target","original":{"line":64,"column":35},"generated":{"line":1,"column":1023}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"options","original":{"line":64,"column":43},"generated":{"line":1,"column":1025}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":65,"column":4},"generated":{"line":1,"column":1028}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"err","original":{"line":65,"column":11},"generated":{"line":1,"column":1034}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":66,"column":8},"generated":{"line":1,"column":1037}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":66,"column":28},"generated":{"line":1,"column":1040}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"callback","original":{"line":66,"column":15},"generated":{"line":1,"column":1059}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":66,"column":40},"generated":{"line":1,"column":1061}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"callback","original":{"line":66,"column":47},"generated":{"line":1,"column":1068}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"err","original":{"line":66,"column":56},"generated":{"line":1,"column":1070}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":66,"column":61},"generated":{"line":1,"column":1072}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"err","original":{"line":67,"column":10},"generated":{"line":1,"column":1078}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"err","original":{"line":67,"column":10},"generated":{"line":1,"column":1084}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"options","original":{"line":84,"column":6},"generated":{"line":1,"column":1086}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":70,"column":43},"generated":{"line":1,"column":1090}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"options","original":{"line":70,"column":6},"generated":{"line":1,"column":1094}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"bypassDocumentValidation","original":{"line":70,"column":14},"generated":{"line":1,"column":1096}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"command","original":{"line":71,"column":4},"generated":{"line":1,"column":1123}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"bypassDocumentValidation","original":{"line":71,"column":12},"generated":{"line":1,"column":1125}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"options","original":{"line":71,"column":39},"generated":{"line":1,"column":1150}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"bypassDocumentValidation","original":{"line":71,"column":47},"generated":{"line":1,"column":1152}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":74,"column":38},"generated":{"line":1,"column":1178}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"options","original":{"line":74,"column":13},"generated":{"line":1,"column":1196}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"allowDiskUse","original":{"line":74,"column":21},"generated":{"line":1,"column":1198}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"command","original":{"line":74,"column":49},"generated":{"line":1,"column":1213}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"allowDiskUse","original":{"line":74,"column":57},"generated":{"line":1,"column":1215}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"options","original":{"line":74,"column":72},"generated":{"line":1,"column":1228}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"allowDiskUse","original":{"line":74,"column":80},"generated":{"line":1,"column":1230}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":75,"column":35},"generated":{"line":1,"column":1244}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"options","original":{"line":75,"column":13},"generated":{"line":1,"column":1261}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"maxTimeMS","original":{"line":75,"column":21},"generated":{"line":1,"column":1263}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"command","original":{"line":75,"column":45},"generated":{"line":1,"column":1275}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"maxTimeMS","original":{"line":75,"column":53},"generated":{"line":1,"column":1277}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"options","original":{"line":75,"column":65},"generated":{"line":1,"column":1287}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"maxTimeMS","original":{"line":75,"column":73},"generated":{"line":1,"column":1289}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"options","original":{"line":77,"column":6},"generated":{"line":1,"column":1300}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"hint","original":{"line":77,"column":14},"generated":{"line":1,"column":1302}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"command","original":{"line":77,"column":20},"generated":{"line":1,"column":1309}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"hint","original":{"line":77,"column":28},"generated":{"line":1,"column":1311}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"options","original":{"line":77,"column":35},"generated":{"line":1,"column":1316}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"hint","original":{"line":77,"column":43},"generated":{"line":1,"column":1318}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"options","original":{"line":79,"column":2},"generated":{"line":1,"column":1325}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"Object","original":{"line":79,"column":12},"generated":{"line":1,"column":1327}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"assign","original":{"line":79,"column":19},"generated":{"line":1,"column":1334}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":79,"column":26},"generated":{"line":1,"column":1341}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"options","original":{"line":79,"column":30},"generated":{"line":1,"column":1344}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"readPreference","original":{"line":82,"column":10},"generated":{"line":1,"column":1348}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"resolveReadPreference","original":{"line":82,"column":27},"generated":{"line":1,"column":1363}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"options","original":{"line":82,"column":49},"generated":{"line":1,"column":1365}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"optionSources","original":{"line":82,"column":58},"generated":{"line":1,"column":1367}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"options","original":{"line":84,"column":6},"generated":{"line":1,"column":1370}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"explain","original":{"line":84,"column":14},"generated":{"line":1,"column":1372}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":84,"column":23},"generated":{"line":1,"column":1380}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"command","original":{"line":85,"column":8},"generated":{"line":1,"column":1381}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"command","original":{"line":85,"column":8},"generated":{"line":1,"column":1384}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"readConcern","original":{"line":85,"column":16},"generated":{"line":1,"column":1386}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"command","original":{"line":85,"column":31},"generated":{"line":1,"column":1399}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"writeConcern","original":{"line":85,"column":39},"generated":{"line":1,"column":1401}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"toError","original":{"line":86,"column":12},"generated":{"line":1,"column":1414}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"toError","original":{"line":86,"column":12},"generated":{"line":1,"column":1420}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":86,"column":20},"generated":{"line":1,"column":1422}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"command","original":{"line":88,"column":4},"generated":{"line":1,"column":1501}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"explain","original":{"line":88,"column":12},"generated":{"line":1,"column":1503}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"options","original":{"line":88,"column":22},"generated":{"line":1,"column":1511}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"explain","original":{"line":88,"column":30},"generated":{"line":1,"column":1513}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"options","original":{"line":94,"column":6},"generated":{"line":1,"column":1521}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":91,"column":33},"generated":{"line":1,"column":1524}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"options","original":{"line":91,"column":13},"generated":{"line":1,"column":1541}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"comment","original":{"line":91,"column":21},"generated":{"line":1,"column":1543}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"command","original":{"line":91,"column":43},"generated":{"line":1,"column":1553}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"comment","original":{"line":91,"column":51},"generated":{"line":1,"column":1555}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"options","original":{"line":91,"column":61},"generated":{"line":1,"column":1563}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"comment","original":{"line":91,"column":69},"generated":{"line":1,"column":1565}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":94,"column":24},"generated":{"line":1,"column":1574}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"options","original":{"line":94,"column":6},"generated":{"line":1,"column":1580}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"cursor","original":{"line":94,"column":14},"generated":{"line":1,"column":1582}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":94,"column":58},"generated":{"line":1,"column":1590}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":94,"column":32},"generated":{"line":1,"column":1601}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"options","original":{"line":94,"column":39},"generated":{"line":1,"column":1603}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"cursor","original":{"line":94,"column":47},"generated":{"line":1,"column":1605}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"toError","original":{"line":95,"column":10},"generated":{"line":1,"column":1613}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"toError","original":{"line":95,"column":10},"generated":{"line":1,"column":1619}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":95,"column":18},"generated":{"line":1,"column":1621}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":108,"column":6},"generated":{"line":1,"column":1657}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"options","original":{"line":98,"column":2},"generated":{"line":1,"column":1660}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"cursor","original":{"line":98,"column":10},"generated":{"line":1,"column":1662}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"options","original":{"line":98,"column":19},"generated":{"line":1,"column":1669}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"cursor","original":{"line":98,"column":27},"generated":{"line":1,"column":1671}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":98,"column":37},"generated":{"line":1,"column":1679}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"options","original":{"line":99,"column":6},"generated":{"line":1,"column":1682}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"batchSize","original":{"line":99,"column":14},"generated":{"line":1,"column":1684}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"hasOutStage","original":{"line":99,"column":28},"generated":{"line":1,"column":1696}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"options","original":{"line":99,"column":41},"generated":{"line":1,"column":1700}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"cursor","original":{"line":99,"column":49},"generated":{"line":1,"column":1702}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"batchSize","original":{"line":99,"column":56},"generated":{"line":1,"column":1709}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"options","original":{"line":99,"column":68},"generated":{"line":1,"column":1719}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"batchSize","original":{"line":99,"column":76},"generated":{"line":1,"column":1721}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"command","original":{"line":100,"column":2},"generated":{"line":1,"column":1732}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"cursor","original":{"line":100,"column":10},"generated":{"line":1,"column":1734}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"options","original":{"line":100,"column":19},"generated":{"line":1,"column":1741}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"cursor","original":{"line":100,"column":27},"generated":{"line":1,"column":1743}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"options","original":{"line":103,"column":2},"generated":{"line":1,"column":1750}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"promiseLibrary","original":{"line":103,"column":10},"generated":{"line":1,"column":1752}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"target","original":{"line":103,"column":27},"generated":{"line":1,"column":1767}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"s","original":{"line":103,"column":34},"generated":{"line":1,"column":1769}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"promiseLibrary","original":{"line":103,"column":36},"generated":{"line":1,"column":1771}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"options","original":{"line":106,"column":2},"generated":{"line":1,"column":1786}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"cursorFactory","original":{"line":106,"column":10},"generated":{"line":1,"column":1788}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"AggregationCursor","original":{"line":106,"column":26},"generated":{"line":1,"column":1802}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":108,"column":26},"generated":{"line":1,"column":1804}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"callback","original":{"line":108,"column":13},"generated":{"line":1,"column":1823}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":108,"column":38},"generated":{"line":1,"column":1825}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":109,"column":8},"generated":{"line":1,"column":1826}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"topology","original":{"line":109,"column":9},"generated":{"line":1,"column":1830}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"capabilities","original":{"line":109,"column":18},"generated":{"line":1,"column":1832}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":110,"column":12},"generated":{"line":1,"column":1847}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":110,"column":12},"generated":{"line":1,"column":1853}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"MongoError","original":{"line":110,"column":16},"generated":{"line":1,"column":1857}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":110,"column":27},"generated":{"line":1,"column":1859}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"topology","original":{"line":113,"column":11},"generated":{"line":1,"column":1887}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"topology","original":{"line":113,"column":11},"generated":{"line":1,"column":1894}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"cursor","original":{"line":113,"column":20},"generated":{"line":1,"column":1896}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"namespace","original":{"line":113,"column":27},"generated":{"line":1,"column":1903}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"command","original":{"line":113,"column":38},"generated":{"line":1,"column":1905}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"options","original":{"line":113,"column":47},"generated":{"line":1,"column":1907}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"handleCallback","original":{"line":116,"column":9},"generated":{"line":1,"column":1910}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"handleCallback","original":{"line":116,"column":9},"generated":{"line":1,"column":1917}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"callback","original":{"line":116,"column":24},"generated":{"line":1,"column":1919}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":116,"column":34},"generated":{"line":1,"column":1921}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"topology","original":{"line":116,"column":40},"generated":{"line":1,"column":1926}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"cursor","original":{"line":116,"column":49},"generated":{"line":1,"column":1928}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"namespace","original":{"line":116,"column":56},"generated":{"line":1,"column":1935}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"command","original":{"line":116,"column":67},"generated":{"line":1,"column":1937}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"options","original":{"line":116,"column":76},"generated":{"line":1,"column":1939}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"module","original":{"line":119,"column":0},"generated":{"line":1,"column":1943}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"exports","original":{"line":119,"column":7},"generated":{"line":1,"column":1950}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","original":{"line":119,"column":17},"generated":{"line":1,"column":1958}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"aggregate","original":{"line":120,"column":2},"generated":{"line":1,"column":1959}},{"source":"../node_modules/mongodb/lib/operations/aggregate.js","name":"aggregate","original":{"line":120,"column":2},"generated":{"line":1,"column":1969}}],"sources":{"../node_modules/mongodb/lib/operations/aggregate.js":"'use strict';\n\nconst AggregationCursor = require('../aggregation_cursor');\nconst applyWriteConcern = require('../utils').applyWriteConcern;\nconst decorateWithCollation = require('../utils').decorateWithCollation;\nconst decorateWithReadConcern = require('../utils').decorateWithReadConcern;\nconst handleCallback = require('../utils').handleCallback;\nconst MongoError = require('mongodb-core').MongoError;\nconst resolveReadPreference = require('../utils').resolveReadPreference;\nconst toError = require('../utils').toError;\n\nconst DB_AGGREGATE_COLLECTION = 1;\n\n/**\n * Perform an aggregate operation. See Collection.prototype.aggregate or Db.prototype.aggregate for more information.\n *\n * @method\n * @param {Db} db A Db instance.\n * @param {Collection|string} coll A collection instance or the string '1', used for db.aggregate.\n * @param {object} [pipeline=[]] Array containing all the aggregation framework commands for the execution.\n * @param {object} [options] Optional settings. See Collection.prototype.aggregate or Db.prototype.aggregate for a list of options.\n * @param {Db~aggregationCallback|Collection~aggregationCallback} callback The command result callback\n */\nfunction aggregate(db, coll, pipeline, options, callback) {\n  const isDbAggregate = typeof coll === 'string';\n  const target = isDbAggregate ? db : coll;\n  const topology = target.s.topology;\n  let hasOutStage = false;\n\n  if (typeof options.out === 'string') {\n    pipeline = pipeline.concat({ $out: options.out });\n    hasOutStage = true;\n  } else if (pipeline.length > 0 && pipeline[pipeline.length - 1]['$out']) {\n    hasOutStage = true;\n  }\n\n  let command;\n  let namespace;\n  let optionSources;\n\n  if (isDbAggregate) {\n    command = { aggregate: DB_AGGREGATE_COLLECTION, pipeline: pipeline };\n    namespace = `${db.s.databaseName}.${DB_AGGREGATE_COLLECTION}`;\n\n    optionSources = { db };\n  } else {\n    command = { aggregate: coll.s.name, pipeline: pipeline };\n    namespace = coll.s.namespace;\n\n    optionSources = { db: coll.s.db, collection: coll };\n  }\n\n  const takesWriteConcern = topology.capabilities().commandsTakeWriteConcern;\n\n  if (!hasOutStage) {\n    decorateWithReadConcern(command, target, options);\n  }\n\n  if (pipeline.length > 0 && pipeline[pipeline.length - 1]['$out'] && takesWriteConcern) {\n    applyWriteConcern(command, optionSources, options);\n  }\n\n  try {\n    decorateWithCollation(command, target, options);\n  } catch (err) {\n    if (typeof callback === 'function') return callback(err, null);\n    throw err;\n  }\n\n  if (options.bypassDocumentValidation === true) {\n    command.bypassDocumentValidation = options.bypassDocumentValidation;\n  }\n\n  if (typeof options.allowDiskUse === 'boolean') command.allowDiskUse = options.allowDiskUse;\n  if (typeof options.maxTimeMS === 'number') command.maxTimeMS = options.maxTimeMS;\n\n  if (options.hint) command.hint = options.hint;\n\n  options = Object.assign({}, options);\n\n  // Ensure we have the right read preference inheritance\n  options.readPreference = resolveReadPreference(options, optionSources);\n\n  if (options.explain) {\n    if (command.readConcern || command.writeConcern) {\n      throw toError('\"explain\" cannot be used on an aggregate call with readConcern/writeConcern');\n    }\n    command.explain = options.explain;\n  }\n\n  if (typeof options.comment === 'string') command.comment = options.comment;\n\n  // Validate that cursor options is valid\n  if (options.cursor != null && typeof options.cursor !== 'object') {\n    throw toError('cursor options must be an object');\n  }\n\n  options.cursor = options.cursor || {};\n  if (options.batchSize && !hasOutStage) options.cursor.batchSize = options.batchSize;\n  command.cursor = options.cursor;\n\n  // promiseLibrary\n  options.promiseLibrary = target.s.promiseLibrary;\n\n  // Set the AggregationCursor constructor\n  options.cursorFactory = AggregationCursor;\n\n  if (typeof callback !== 'function') {\n    if (!topology.capabilities()) {\n      throw new MongoError('cannot connect to server');\n    }\n\n    return topology.cursor(namespace, command, options);\n  }\n\n  return handleCallback(callback, null, topology.cursor(namespace, command, options));\n}\n\nmodule.exports = {\n  aggregate\n};\n"},"lineCount":null}},"error":null,"hash":"1f7db5276ca75ba5a42a8a5c25a70fe5","cacheData":{"env":{}}}