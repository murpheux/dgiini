{"id":"4a5D","dependencies":[{"name":"/Users/murpheux/Workspace/projects/dgiini/microservices/.babelrc","includedInParent":true,"mtime":1557029603000},{"name":"/Users/murpheux/Workspace/projects/dgiini/microservices/package.json","includedInParent":true,"mtime":1563334619778},{"name":"./shared/winston","loc":{"line":13,"column":20},"parent":"/Users/murpheux/Workspace/projects/dgiini/microservices/src/msg_api.js","resolved":"/Users/murpheux/Workspace/projects/dgiini/microservices/src/shared/winston.js"},{"name":"./shared/common","loc":{"line":14,"column":19},"parent":"/Users/murpheux/Workspace/projects/dgiini/microservices/src/msg_api.js","resolved":"/Users/murpheux/Workspace/projects/dgiini/microservices/src/shared/common.js"},{"name":"./routes/message_route","loc":{"line":16,"column":27},"parent":"/Users/murpheux/Workspace/projects/dgiini/microservices/src/msg_api.js","resolved":"/Users/murpheux/Workspace/projects/dgiini/microservices/src/routes/message_route.js"}],"generated":{"js":"\"use strict\";var e=l(require(\"dotenv/config\")),s=l(require(\"express\")),t=l(require(\"compression\")),r=l(require(\"body-parser\")),u=l(require(\"morgan\")),o=l(require(\"cors\")),d=l(require(\"uuid/v4\")),n=l(require(\"http-status-codes\")),i=l(require(\"./shared/winston\")),a=l(require(\"./shared/common\"));function l(e){return e&&e.__esModule?e:{default:e}}const c=require(\"./routes/message_route\"),f=process.env.LOG_LEVEL||\"debug\",p=process.env.LOG_FORMAT||\"combined\",q=process.env.PORT||process.env.MSG_API_PORT,m=\"http://localhost:9000\",g=(0,s.default)();if(g.use((0,t.default)()),e.default.error)throw e.default.error;const v=(e,s,t)=>{e.id=(0,d.default)(),t()};u.default.token(\"id\",e=>e.id),g.use(v),g.use(r.default.json()),g.use(r.default.urlencoded({extended:!1})),g.use((0,u.default)(p,{stream:i.default.stream})),g.use((0,o.default)({origin:m})),g.get(\"/api/\",(e,s)=>{let t={Service:`${a.default.app_name} ${a.default.version} ${a.default.build}`};s.status(n.default.OK).json(t)}),g.use(\"/api/\",c),g.use((e,s)=>{s.status(n.default.NOT_FOUND),e.accepts(\"json\")?s.send({error:\"API endpoint does not exist!\"}):s.type(\"txt\").send(\"API endpoint does not exist!\")}),g.listen(q,()=>console.log(`message api listening on port ${q}!`));"},"sourceMaps":{"js":{"mappings":[{"source":"msg_api.js","original":{"line":2,"column":0},"generated":{"line":1,"column":0}},{"source":"msg_api.js","original":{"line":4,"column":0},"generated":{"line":1,"column":13}},{"source":"msg_api.js","original":{"line":4,"column":0},"generated":{"line":1,"column":17}},{"source":"msg_api.js","original":{"line":4,"column":0},"generated":{"line":1,"column":19}},{"source":"msg_api.js","original":{"line":4,"column":0},"generated":{"line":1,"column":21}},{"source":"msg_api.js","original":{"line":4,"column":0},"generated":{"line":1,"column":29}},{"source":"msg_api.js","original":{"line":5,"column":0},"generated":{"line":1,"column":47}},{"source":"msg_api.js","original":{"line":5,"column":0},"generated":{"line":1,"column":49}},{"source":"msg_api.js","original":{"line":5,"column":0},"generated":{"line":1,"column":51}},{"source":"msg_api.js","original":{"line":5,"column":0},"generated":{"line":1,"column":59}},{"source":"msg_api.js","original":{"line":6,"column":0},"generated":{"line":1,"column":71}},{"source":"msg_api.js","original":{"line":6,"column":0},"generated":{"line":1,"column":73}},{"source":"msg_api.js","original":{"line":6,"column":0},"generated":{"line":1,"column":75}},{"source":"msg_api.js","original":{"line":6,"column":0},"generated":{"line":1,"column":83}},{"source":"msg_api.js","original":{"line":7,"column":0},"generated":{"line":1,"column":99}},{"source":"msg_api.js","original":{"line":7,"column":0},"generated":{"line":1,"column":101}},{"source":"msg_api.js","original":{"line":7,"column":0},"generated":{"line":1,"column":103}},{"source":"msg_api.js","original":{"line":7,"column":0},"generated":{"line":1,"column":111}},{"source":"msg_api.js","original":{"line":8,"column":0},"generated":{"line":1,"column":127}},{"source":"msg_api.js","original":{"line":8,"column":0},"generated":{"line":1,"column":129}},{"source":"msg_api.js","original":{"line":8,"column":0},"generated":{"line":1,"column":131}},{"source":"msg_api.js","original":{"line":8,"column":0},"generated":{"line":1,"column":139}},{"source":"msg_api.js","original":{"line":9,"column":0},"generated":{"line":1,"column":150}},{"source":"msg_api.js","original":{"line":9,"column":0},"generated":{"line":1,"column":152}},{"source":"msg_api.js","original":{"line":9,"column":0},"generated":{"line":1,"column":154}},{"source":"msg_api.js","original":{"line":9,"column":0},"generated":{"line":1,"column":162}},{"source":"msg_api.js","original":{"line":10,"column":0},"generated":{"line":1,"column":171}},{"source":"msg_api.js","original":{"line":10,"column":0},"generated":{"line":1,"column":173}},{"source":"msg_api.js","original":{"line":10,"column":0},"generated":{"line":1,"column":175}},{"source":"msg_api.js","original":{"line":10,"column":0},"generated":{"line":1,"column":183}},{"source":"msg_api.js","original":{"line":11,"column":0},"generated":{"line":1,"column":195}},{"source":"msg_api.js","original":{"line":11,"column":0},"generated":{"line":1,"column":197}},{"source":"msg_api.js","original":{"line":11,"column":0},"generated":{"line":1,"column":199}},{"source":"msg_api.js","original":{"line":11,"column":0},"generated":{"line":1,"column":207}},{"source":"msg_api.js","original":{"line":13,"column":0},"generated":{"line":1,"column":229}},{"source":"msg_api.js","original":{"line":13,"column":0},"generated":{"line":1,"column":231}},{"source":"msg_api.js","original":{"line":13,"column":0},"generated":{"line":1,"column":233}},{"source":"msg_api.js","original":{"line":13,"column":0},"generated":{"line":1,"column":241}},{"source":"msg_api.js","original":{"line":14,"column":0},"generated":{"line":1,"column":262}},{"source":"msg_api.js","original":{"line":14,"column":0},"generated":{"line":1,"column":264}},{"source":"msg_api.js","original":{"line":14,"column":0},"generated":{"line":1,"column":266}},{"source":"msg_api.js","original":{"line":14,"column":0},"generated":{"line":1,"column":274}},{"source":"msg_api.js","original":{"line":71,"column":0},"generated":{"line":1,"column":294}},{"source":"msg_api.js","original":{"line":71,"column":0},"generated":{"line":1,"column":303}},{"source":"msg_api.js","original":{"line":71,"column":0},"generated":{"line":1,"column":305}},{"source":"msg_api.js","original":{"line":71,"column":0},"generated":{"line":1,"column":308}},{"source":"msg_api.js","original":{"line":71,"column":0},"generated":{"line":1,"column":315}},{"source":"msg_api.js","original":{"line":71,"column":0},"generated":{"line":1,"column":318}},{"source":"msg_api.js","original":{"line":71,"column":0},"generated":{"line":1,"column":320}},{"source":"msg_api.js","original":{"line":71,"column":0},"generated":{"line":1,"column":331}},{"source":"msg_api.js","original":{"line":71,"column":0},"generated":{"line":1,"column":333}},{"source":"msg_api.js","original":{"line":71,"column":0},"generated":{"line":1,"column":334}},{"source":"msg_api.js","original":{"line":71,"column":0},"generated":{"line":1,"column":342}},{"source":"msg_api.js","original":{"line":16,"column":0},"generated":{"line":1,"column":345}},{"source":"msg_api.js","name":"msg_router","original":{"line":16,"column":6},"generated":{"line":1,"column":351}},{"source":"msg_api.js","name":"require","original":{"line":16,"column":19},"generated":{"line":1,"column":353}},{"source":"msg_api.js","original":{"line":16,"column":27},"generated":{"line":1,"column":361}},{"source":"msg_api.js","name":"log_level","original":{"line":19,"column":6},"generated":{"line":1,"column":387}},{"source":"msg_api.js","name":"process","original":{"line":19,"column":18},"generated":{"line":1,"column":389}},{"source":"msg_api.js","name":"env","original":{"line":19,"column":26},"generated":{"line":1,"column":397}},{"source":"msg_api.js","name":"LOG_LEVEL","original":{"line":19,"column":30},"generated":{"line":1,"column":401}},{"source":"msg_api.js","original":{"line":19,"column":43},"generated":{"line":1,"column":412}},{"source":"msg_api.js","name":"log_format","original":{"line":20,"column":6},"generated":{"line":1,"column":420}},{"source":"msg_api.js","name":"process","original":{"line":20,"column":19},"generated":{"line":1,"column":422}},{"source":"msg_api.js","name":"env","original":{"line":20,"column":27},"generated":{"line":1,"column":430}},{"source":"msg_api.js","name":"LOG_FORMAT","original":{"line":20,"column":31},"generated":{"line":1,"column":434}},{"source":"msg_api.js","original":{"line":20,"column":45},"generated":{"line":1,"column":446}},{"source":"msg_api.js","name":"port","original":{"line":21,"column":6},"generated":{"line":1,"column":457}},{"source":"msg_api.js","name":"process","original":{"line":21,"column":13},"generated":{"line":1,"column":459}},{"source":"msg_api.js","name":"env","original":{"line":21,"column":21},"generated":{"line":1,"column":467}},{"source":"msg_api.js","name":"PORT","original":{"line":21,"column":25},"generated":{"line":1,"column":471}},{"source":"msg_api.js","name":"process","original":{"line":21,"column":33},"generated":{"line":1,"column":477}},{"source":"msg_api.js","name":"env","original":{"line":21,"column":41},"generated":{"line":1,"column":485}},{"source":"msg_api.js","name":"MSG_API_PORT","original":{"line":21,"column":45},"generated":{"line":1,"column":489}},{"source":"msg_api.js","name":"CLIENT_URL","original":{"line":23,"column":6},"generated":{"line":1,"column":502}},{"source":"msg_api.js","original":{"line":23,"column":19},"generated":{"line":1,"column":504}},{"source":"msg_api.js","name":"app","original":{"line":25,"column":6},"generated":{"line":1,"column":528}},{"source":"msg_api.js","original":{"line":25,"column":12},"generated":{"line":1,"column":531}},{"source":"msg_api.js","original":{"line":25,"column":0},"generated":{"line":1,"column":533}},{"source":"msg_api.js","original":{"line":25,"column":0},"generated":{"line":1,"column":535}},{"source":"msg_api.js","original":{"line":29,"column":0},"generated":{"line":1,"column":546}},{"source":"msg_api.js","name":"app","original":{"line":26,"column":0},"generated":{"line":1,"column":549}},{"source":"msg_api.js","name":"use","original":{"line":26,"column":4},"generated":{"line":1,"column":551}},{"source":"msg_api.js","original":{"line":26,"column":8},"generated":{"line":1,"column":556}},{"source":"msg_api.js","original":{"line":26,"column":0},"generated":{"line":1,"column":558}},{"source":"msg_api.js","original":{"line":26,"column":0},"generated":{"line":1,"column":560}},{"source":"msg_api.js","name":"config","original":{"line":29,"column":4},"generated":{"line":1,"column":572}},{"source":"msg_api.js","name":"error","original":{"line":29,"column":11},"generated":{"line":1,"column":574}},{"source":"msg_api.js","name":"error","original":{"line":29,"column":11},"generated":{"line":1,"column":582}},{"source":"msg_api.js","name":"config","original":{"line":29,"column":26},"generated":{"line":1,"column":588}},{"source":"msg_api.js","name":"config","original":{"line":29,"column":26},"generated":{"line":1,"column":594}},{"source":"msg_api.js","name":"error","original":{"line":29,"column":33},"generated":{"line":1,"column":596}},{"source":"msg_api.js","name":"error","original":{"line":29,"column":33},"generated":{"line":1,"column":604}},{"source":"msg_api.js","original":{"line":32,"column":0},"generated":{"line":1,"column":610}},{"source":"msg_api.js","name":"requestId","original":{"line":32,"column":6},"generated":{"line":1,"column":616}},{"source":"msg_api.js","original":{"line":32,"column":18},"generated":{"line":1,"column":618}},{"source":"msg_api.js","name":"req","original":{"line":32,"column":19},"generated":{"line":1,"column":619}},{"source":"msg_api.js","name":"res","original":{"line":32,"column":24},"generated":{"line":1,"column":621}},{"source":"msg_api.js","name":"next","original":{"line":32,"column":29},"generated":{"line":1,"column":623}},{"source":"msg_api.js","name":"req","original":{"line":33,"column":4},"generated":{"line":1,"column":628}},{"source":"msg_api.js","name":"id","original":{"line":33,"column":8},"generated":{"line":1,"column":630}},{"source":"msg_api.js","original":{"line":33,"column":13},"generated":{"line":1,"column":634}},{"source":"msg_api.js","original":{"line":33,"column":4},"generated":{"line":1,"column":636}},{"source":"msg_api.js","original":{"line":33,"column":4},"generated":{"line":1,"column":638}},{"source":"msg_api.js","name":"next","original":{"line":34,"column":4},"generated":{"line":1,"column":649}},{"source":"msg_api.js","name":"morgan","original":{"line":37,"column":0},"generated":{"line":1,"column":654}},{"source":"msg_api.js","name":"token","original":{"line":37,"column":7},"generated":{"line":1,"column":656}},{"source":"msg_api.js","name":"token","original":{"line":37,"column":7},"generated":{"line":1,"column":664}},{"source":"msg_api.js","original":{"line":37,"column":13},"generated":{"line":1,"column":670}},{"source":"msg_api.js","name":"req","original":{"line":37,"column":20},"generated":{"line":1,"column":675}},{"source":"msg_api.js","name":"req","original":{"line":37,"column":37},"generated":{"line":1,"column":678}},{"source":"msg_api.js","name":"id","original":{"line":37,"column":41},"generated":{"line":1,"column":680}},{"source":"msg_api.js","name":"app","original":{"line":39,"column":0},"generated":{"line":1,"column":684}},{"source":"msg_api.js","name":"use","original":{"line":39,"column":4},"generated":{"line":1,"column":686}},{"source":"msg_api.js","name":"requestId","original":{"line":39,"column":8},"generated":{"line":1,"column":690}},{"source":"msg_api.js","name":"app","original":{"line":40,"column":0},"generated":{"line":1,"column":693}},{"source":"msg_api.js","name":"use","original":{"line":40,"column":4},"generated":{"line":1,"column":695}},{"source":"msg_api.js","name":"bodyParser","original":{"line":40,"column":8},"generated":{"line":1,"column":699}},{"source":"msg_api.js","name":"json","original":{"line":40,"column":19},"generated":{"line":1,"column":701}},{"source":"msg_api.js","name":"json","original":{"line":40,"column":19},"generated":{"line":1,"column":709}},{"source":"msg_api.js","name":"app","original":{"line":41,"column":0},"generated":{"line":1,"column":717}},{"source":"msg_api.js","name":"use","original":{"line":41,"column":4},"generated":{"line":1,"column":719}},{"source":"msg_api.js","name":"bodyParser","original":{"line":41,"column":8},"generated":{"line":1,"column":723}},{"source":"msg_api.js","name":"urlencoded","original":{"line":41,"column":19},"generated":{"line":1,"column":725}},{"source":"msg_api.js","name":"urlencoded","original":{"line":41,"column":19},"generated":{"line":1,"column":733}},{"source":"msg_api.js","original":{"line":41,"column":30},"generated":{"line":1,"column":744}},{"source":"msg_api.js","name":"extended","original":{"line":41,"column":32},"generated":{"line":1,"column":745}},{"source":"msg_api.js","original":{"line":41,"column":42},"generated":{"line":1,"column":755}},{"source":"msg_api.js","name":"app","original":{"line":43,"column":0},"generated":{"line":1,"column":760}},{"source":"msg_api.js","name":"use","original":{"line":43,"column":4},"generated":{"line":1,"column":762}},{"source":"msg_api.js","original":{"line":43,"column":8},"generated":{"line":1,"column":767}},{"source":"msg_api.js","name":"log_format","original":{"line":43,"column":15},"generated":{"line":1,"column":769}},{"source":"msg_api.js","name":"log_format","original":{"line":43,"column":15},"generated":{"line":1,"column":771}},{"source":"msg_api.js","name":"log_format","original":{"line":43,"column":15},"generated":{"line":1,"column":780}},{"source":"msg_api.js","original":{"line":43,"column":27},"generated":{"line":1,"column":782}},{"source":"msg_api.js","name":"stream","original":{"line":43,"column":29},"generated":{"line":1,"column":783}},{"source":"msg_api.js","name":"winston","original":{"line":43,"column":37},"generated":{"line":1,"column":790}},{"source":"msg_api.js","name":"stream","original":{"line":43,"column":45},"generated":{"line":1,"column":792}},{"source":"msg_api.js","name":"stream","original":{"line":43,"column":45},"generated":{"line":1,"column":800}},{"source":"msg_api.js","name":"app","original":{"line":44,"column":0},"generated":{"line":1,"column":810}},{"source":"msg_api.js","name":"use","original":{"line":44,"column":4},"generated":{"line":1,"column":812}},{"source":"msg_api.js","original":{"line":44,"column":8},"generated":{"line":1,"column":817}},{"source":"msg_api.js","original":{"line":44,"column":13},"generated":{"line":1,"column":819}},{"source":"msg_api.js","original":{"line":44,"column":13},"generated":{"line":1,"column":821}},{"source":"msg_api.js","original":{"line":44,"column":13},"generated":{"line":1,"column":830}},{"source":"msg_api.js","name":"origin","original":{"line":44,"column":15},"generated":{"line":1,"column":831}},{"source":"msg_api.js","name":"CLIENT_URL","original":{"line":44,"column":23},"generated":{"line":1,"column":838}},{"source":"msg_api.js","name":"app","original":{"line":47,"column":0},"generated":{"line":1,"column":843}},{"source":"msg_api.js","name":"get","original":{"line":47,"column":4},"generated":{"line":1,"column":845}},{"source":"msg_api.js","original":{"line":47,"column":8},"generated":{"line":1,"column":849}},{"source":"msg_api.js","original":{"line":47,"column":17},"generated":{"line":1,"column":857}},{"source":"msg_api.js","name":"req","original":{"line":47,"column":18},"generated":{"line":1,"column":858}},{"source":"msg_api.js","name":"res","original":{"line":47,"column":23},"generated":{"line":1,"column":860}},{"source":"msg_api.js","name":"payload","original":{"line":48,"column":8},"generated":{"line":1,"column":865}},{"source":"msg_api.js","name":"payload","original":{"line":48,"column":8},"generated":{"line":1,"column":869}},{"source":"msg_api.js","original":{"line":48,"column":18},"generated":{"line":1,"column":871}},{"source":"msg_api.js","original":{"line":49,"column":20},"generated":{"line":1,"column":872}},{"source":"msg_api.js","name":"common","original":{"line":49,"column":22},"generated":{"line":1,"column":883}},{"source":"msg_api.js","name":"app_name","original":{"line":49,"column":29},"generated":{"line":1,"column":885}},{"source":"msg_api.js","name":"app_name","original":{"line":49,"column":29},"generated":{"line":1,"column":893}},{"source":"msg_api.js","name":"common","original":{"line":49,"column":41},"generated":{"line":1,"column":905}},{"source":"msg_api.js","name":"version","original":{"line":49,"column":48},"generated":{"line":1,"column":907}},{"source":"msg_api.js","name":"version","original":{"line":49,"column":48},"generated":{"line":1,"column":915}},{"source":"msg_api.js","name":"common","original":{"line":49,"column":59},"generated":{"line":1,"column":926}},{"source":"msg_api.js","name":"build","original":{"line":49,"column":66},"generated":{"line":1,"column":928}},{"source":"msg_api.js","name":"build","original":{"line":49,"column":66},"generated":{"line":1,"column":936}},{"source":"msg_api.js","name":"res","original":{"line":51,"column":4},"generated":{"line":1,"column":945}},{"source":"msg_api.js","name":"status","original":{"line":51,"column":8},"generated":{"line":1,"column":947}},{"source":"msg_api.js","name":"HttpStatus","original":{"line":51,"column":15},"generated":{"line":1,"column":954}},{"source":"msg_api.js","name":"OK","original":{"line":51,"column":26},"generated":{"line":1,"column":956}},{"source":"msg_api.js","name":"OK","original":{"line":51,"column":26},"generated":{"line":1,"column":964}},{"source":"msg_api.js","name":"json","original":{"line":51,"column":30},"generated":{"line":1,"column":968}},{"source":"msg_api.js","name":"payload","original":{"line":51,"column":35},"generated":{"line":1,"column":973}},{"source":"msg_api.js","name":"app","original":{"line":54,"column":0},"generated":{"line":1,"column":978}},{"source":"msg_api.js","name":"use","original":{"line":54,"column":4},"generated":{"line":1,"column":980}},{"source":"msg_api.js","original":{"line":54,"column":8},"generated":{"line":1,"column":984}},{"source":"msg_api.js","name":"msg_router","original":{"line":54,"column":17},"generated":{"line":1,"column":992}},{"source":"msg_api.js","name":"app","original":{"line":57,"column":0},"generated":{"line":1,"column":995}},{"source":"msg_api.js","name":"use","original":{"line":57,"column":4},"generated":{"line":1,"column":997}},{"source":"msg_api.js","original":{"line":57,"column":8},"generated":{"line":1,"column":1001}},{"source":"msg_api.js","name":"req","original":{"line":57,"column":9},"generated":{"line":1,"column":1002}},{"source":"msg_api.js","name":"res","original":{"line":57,"column":14},"generated":{"line":1,"column":1004}},{"source":"msg_api.js","name":"res","original":{"line":58,"column":4},"generated":{"line":1,"column":1009}},{"source":"msg_api.js","name":"status","original":{"line":58,"column":8},"generated":{"line":1,"column":1011}},{"source":"msg_api.js","name":"HttpStatus","original":{"line":58,"column":15},"generated":{"line":1,"column":1018}},{"source":"msg_api.js","name":"NOT_FOUND","original":{"line":58,"column":26},"generated":{"line":1,"column":1020}},{"source":"msg_api.js","name":"NOT_FOUND","original":{"line":58,"column":26},"generated":{"line":1,"column":1028}},{"source":"msg_api.js","name":"req","original":{"line":61,"column":8},"generated":{"line":1,"column":1039}},{"source":"msg_api.js","name":"accepts","original":{"line":61,"column":12},"generated":{"line":1,"column":1041}},{"source":"msg_api.js","original":{"line":61,"column":20},"generated":{"line":1,"column":1049}},{"source":"msg_api.js","name":"res","original":{"line":62,"column":8},"generated":{"line":1,"column":1057}},{"source":"msg_api.js","name":"send","original":{"line":62,"column":12},"generated":{"line":1,"column":1059}},{"source":"msg_api.js","original":{"line":62,"column":17},"generated":{"line":1,"column":1064}},{"source":"msg_api.js","name":"error","original":{"line":62,"column":19},"generated":{"line":1,"column":1065}},{"source":"msg_api.js","original":{"line":62,"column":26},"generated":{"line":1,"column":1071}},{"source":"msg_api.js","name":"res","original":{"line":67,"column":4},"generated":{"line":1,"column":1104}},{"source":"msg_api.js","name":"type","original":{"line":67,"column":8},"generated":{"line":1,"column":1106}},{"source":"msg_api.js","original":{"line":67,"column":13},"generated":{"line":1,"column":1111}},{"source":"msg_api.js","name":"send","original":{"line":67,"column":20},"generated":{"line":1,"column":1118}},{"source":"msg_api.js","original":{"line":67,"column":25},"generated":{"line":1,"column":1123}},{"source":"msg_api.js","name":"app","original":{"line":71,"column":0},"generated":{"line":1,"column":1157}},{"source":"msg_api.js","name":"listen","original":{"line":71,"column":4},"generated":{"line":1,"column":1159}},{"source":"msg_api.js","name":"port","original":{"line":71,"column":11},"generated":{"line":1,"column":1166}},{"source":"msg_api.js","original":{"line":71,"column":17},"generated":{"line":1,"column":1168}},{"source":"msg_api.js","name":"console","original":{"line":71,"column":23},"generated":{"line":1,"column":1172}},{"source":"msg_api.js","name":"log","original":{"line":71,"column":31},"generated":{"line":1,"column":1180}},{"source":"msg_api.js","name":"port","original":{"line":71,"column":68},"generated":{"line":1,"column":1217}}],"sources":{"msg_api.js":"/* eslint-disable no-console */\n'use strict'\n\nimport config from 'dotenv/config'\nimport express from 'express'\nimport compression from 'compression'\nimport bodyParser from 'body-parser'\nimport morgan from 'morgan'\nimport cors from 'cors'\nimport uuid from 'uuid/v4'\nimport HttpStatus from 'http-status-codes'\n\nimport winston from './shared/winston'\nimport common from './shared/common'\n\nconst msg_router = require('./routes/message_route')\n\n// eslint-disable-next-line no-unused-vars\nconst log_level = process.env.LOG_LEVEL || 'debug'\nconst log_format = process.env.LOG_FORMAT || 'combined'\nconst port = process.env.PORT || process.env.MSG_API_PORT\n\nconst CLIENT_URL = 'http://localhost:9000'\n\nconst app = express()\napp.use(compression()) // use compression\n\n// check configuration\nif (config.error) { throw config.error }\n\n// id for log\nconst requestId = (req, res, next) => {\n    req.id = uuid()\n    next()\n}\n\nmorgan.token('id', (req) => { return req.id })\n\napp.use(requestId)\napp.use(bodyParser.json())\napp.use(bodyParser.urlencoded({ extended: false }))\n\napp.use(morgan(log_format, { stream: winston.stream }))\napp.use(cors({ origin: CLIENT_URL }))\n\n// ping\napp.get('/api/', (req, res) => {\n    let payload = {\n        'Service': `${common.app_name} ${common.version} ${common.build}`\n    }\n    res.status(HttpStatus.OK).json(payload)\n})\n\napp.use('/api/', msg_router)\n\n// 404\napp.use((req, res) => {\n    res.status(HttpStatus.NOT_FOUND)\n\n    // respond with json\n    if (req.accepts('json')) {\n        res.send({ error: 'API endpoint does not exist!' })\n        return\n    }\n\n    // default to plain-text. send()\n    res.type('txt').send('API endpoint does not exist!')\n})\n\n//start the app server\napp.listen(port, () => console.log(`message api listening on port ${port}!`))"},"lineCount":null}},"error":null,"hash":"6facde5c83bd3df5ec1353e9acb0e46a","cacheData":{"env":{}}}