<nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="navbar">
    <a class="navbar-brand" routerLink="/">
        <img src="assets/images/logo.png" alt="" />
    </a>
    <button
        class="navbar-toggler"
        type="button"
        data-toggle="collapse"
        data-target="#navbarText"
        aria-controls="navbarText"
        aria-expanded="false"
        aria-label="Toggle navigation"
    >
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarText">
        <ul class="navbar-nav mr-auto">
            <li class="nav-item">
                <a class="nav-link" routerLink="/"
                    ><i class="fas fa-home"></i> Home</a
                >
            </li>
            <li class="btn-group nav-item">
                <a class="nav-link" routerLink="/browse">
                    <i class="fas fa-search"></i> Browse Tasks
                </a>
                <a
                    class="nav-link dropdown-toggle dropdown-toggle-split"
                    data-toggle="dropdown"
                    aria-haspopup="true"
                    aria-expanded="false"
                >
                    <span class="sr-only">Toggle Task Categories</span>
                </a>
                <div class="dropdown-menu">
                    <i class="fas fa-caret-up d-none"></i>
                    <a
                        *ngFor="let category of categories"
                        class="dropdown-item"
                        routerLink="/browse/{{ category }}"
                        ><i
                            class="fas fa-{{ faImageMap[category] }} text-web"
                        ></i>
                        {{ category }}</a
                    >
                </div>
            </li>
            <li class="nav-item">
                <a *ngIf="authService.loggedIn" class="nav-link" routerLink="/task/my"
                    ><i class="fas fa-list"></i> My Tasks</a
                >
            </li>
        </ul>
        <span class="navbar-text">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item" (click)="postTask()">
                    <a class="btn btn-outline-web"
                        ><i class="fas fa-plus"></i> Post Task</a
                    >
                </li>
                <li class="nav-item" (click)="upgradeToVendor()" *ngIf="!isVendor">
                    <a class="btn btn-outline-web"
                        ><i class="fas fa-user-ninja"></i> Become Tasker</a
                    >
                </li>
                <li
                    class="nav-item dropdown profile-icon profile-dropdown ml-3"
                >
                    <a
                        class="nav-link dropdown-toggle"
                        href="#"
                        id="navbarDropdown"
                        role="button"
                        data-toggle="dropdown"
                        aria-haspopup="true"
                        aria-expanded="false"
                        *ngIf="authService.userProfile$ | async as profile"
                    >
                        <img
                            [src]="
                                profile
                                    ? profile?.picture
                                    : 'assets/images/user.jpg'
                            "
                            class="profile-img border rounded-circle"
                            alt=""
                        />
                        <span class="username">{{
                            profile ? profile?.name : "Guest"
                        }}</span>
                    </a>
                    <a
                        class="nav-link dropdown-toggle"
                        href="#"
                        id="navbarDropdown"
                        role="button"
                        data-toggle="dropdown"
                        aria-haspopup="true"
                        aria-expanded="false"
                        *ngIf="(authService.userProfile$ | async) === null"
                    >
                        <img
                            [src]="'assets/images/user.jpg'"
                            class="profile-img border rounded-circle"
                            alt=""
                        />
                        <span class="username">Guest</span>
                    </a>
                    <div
                        class="dropdown-menu dropdown-menu-right"
                        aria-labelledby="navbarDropdown"
                    >
                        <div class="container-fluid">
                            <div class="row">
                                <div *ngIf="authService.loggedIn" class="col-md-6">
                                    <h5 class="dropdown-header px-0">
                                        <i
                                            class="fas fa-balance-scale-left"
                                        ></i>
                                        Financial
                                    </h5>
                                    <div class="border mb-2"></div>
                                    <a routerLink="/user/finance"
                                        >Financial Dashboard</a
                                    >
                                    <a routerLink="/user/transactions"
                                        >Transaction History</a
                                    >
                                    <h5 class="dropdown-header mt-2 px-0">
                                        <i class="fas fa-chart-bar"></i> User
                                        Insight
                                    </h5>
                                    <div class="border mb-2"></div>
                                    <a routerLink="/user/statistics"
                                        >User Statistics</a
                                    >
                                </div>
                                <div class="col-md-6">
                                    <h4
                                        *ngIf="authService.loggedIn"
                                        class="dropdown-header px-0"
                                    >
                                        <i class="far fa-user"></i> Account
                                    </h4>
                                    <div class="border mb-2"></div>
                                    <a
                                        *ngIf="authService.loggedIn"
                                        routerLink="/user/profile"
                                        >My Profile</a
                                    >
                                    <a
                                        *ngIf="authService.loggedIn"
                                        routerLink="/user/settings"
                                        >User Setting</a
                                    >
                                    <h5 class="dropdown-header mt-2 px-0">
                                        <i class="fas fa-question-circle"></i>
                                        Help
                                    </h5>
                                    <div class="border mb-2"></div>
                                    <a
                                        *ngIf="authService.loggedIn"
                                        routerLink="/user/support"
                                        >Get Support</a
                                    >
                                    <a *ngIf="authService.loggedIn" routerLink="/"
                                        >Invite Friend</a
                                    >
                                    <a *ngIf="authService.loggedIn" (click)="logout()"
                                        >Logout</a
                                    >
                                    <a *ngIf="!authService.loggedIn" (click)="login()"
                                        >Signup</a
                                    >
                                    <a *ngIf="!authService.loggedIn" (click)="login()"
                                        >Login</a
                                    >
                                </div>
                            </div>
                        </div>
                    </div>
                </li>
            </ul>
        </span>
        <span class="navbar-text d-none">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item">
                    <a
                        class="btn btn-outline-web"
                        data-toggle="modal"
                        data-target="#postTaskModal"
                        ><i class="fas fa-plus"></i> Post Task</a
                    >
                </li>
                <li class="nav-item">
                    <a class="nav-link" routerLink="/"
                        ><i class="fas fa-sign-in-alt"></i> Sign In</a
                    >
                </li>
                <li class="nav-item">
                    <a class="btn btn-web" routerLink="/">Join Us</a>
                </li>
            </ul>
        </span>
    </div>
</nav>
