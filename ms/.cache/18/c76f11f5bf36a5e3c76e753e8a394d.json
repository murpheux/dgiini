{"id":"jkw7","dependencies":[{"name":"/Users/murpheux/Workspace/projects/dgiini/microservices/.babelrc","includedInParent":true,"mtime":1557029603000},{"name":"/Users/murpheux/Workspace/projects/dgiini/microservices/package.json","includedInParent":true,"mtime":1563334619778},{"name":"./shared/winston","loc":{"line":13,"column":20},"parent":"/Users/murpheux/Workspace/projects/dgiini/microservices/src/auth_api.js","resolved":"/Users/murpheux/Workspace/projects/dgiini/microservices/src/shared/winston.js"},{"name":"./shared/common","loc":{"line":14,"column":19},"parent":"/Users/murpheux/Workspace/projects/dgiini/microservices/src/auth_api.js","resolved":"/Users/murpheux/Workspace/projects/dgiini/microservices/src/shared/common.js"},{"name":"./routes/auth_route","loc":{"line":16,"column":24},"parent":"/Users/murpheux/Workspace/projects/dgiini/microservices/src/auth_api.js","resolved":"/Users/murpheux/Workspace/projects/dgiini/microservices/src/routes/auth_route.js"}],"generated":{"js":"\"use strict\";var e=f(require(\"dotenv/config\")),t=f(require(\"express\")),r=f(require(\"compression\")),s=f(require(\"body-parser\")),u=f(require(\"morgan\")),o=f(require(\"cors\")),d=f(require(\"uuid/v4\")),n=f(require(\"http-status-codes\")),a=f(require(\"./shared/winston\")),i=f(require(\"./shared/common\")),l=f(require(\"./routes/auth_route\"));function f(e){return e&&e.__esModule?e:{default:e}}const c=process.env.LOG_LEVEL||\"debug\",p=process.env.LOG_FORMAT||\"combined\",q=process.env.PORT||process.env.AUTH_API_PORT,v=\"http://localhost:9000\",_=(0,t.default)();if(_.use((0,r.default)()),e.default.error)throw e.default.error;const h=(e,t,r)=>{e.id=(0,d.default)(),r()};u.default.token(\"id\",e=>e.id),_.use(h),_.use(s.default.json()),_.use(s.default.urlencoded({extended:!1})),_.use((0,u.default)(p,{stream:a.default.stream})),_.use((0,o.default)({origin:v})),_.get(\"/api/\",(e,t)=>{let r={Service:`${i.default.app_name} ${i.default.version} ${i.default.build}`};t.status(n.default.OK).json(r)}),_.use(\"/api/\",l.default),_.use((e,t)=>{t.status(n.default.NOT_FOUND),e.accepts(\"json\")?t.send({error:\"API endpoint does not exist!\"}):t.type(\"txt\").send(\"API endpoint does not exist!\")}),_.listen(q,()=>console.log(`auth api listening on port ${q}!`));"},"sourceMaps":{"js":{"mappings":[{"source":"auth_api.js","original":{"line":2,"column":0},"generated":{"line":1,"column":0}},{"source":"auth_api.js","original":{"line":4,"column":0},"generated":{"line":1,"column":13}},{"source":"auth_api.js","original":{"line":4,"column":0},"generated":{"line":1,"column":17}},{"source":"auth_api.js","original":{"line":4,"column":0},"generated":{"line":1,"column":19}},{"source":"auth_api.js","original":{"line":4,"column":0},"generated":{"line":1,"column":21}},{"source":"auth_api.js","original":{"line":4,"column":0},"generated":{"line":1,"column":29}},{"source":"auth_api.js","original":{"line":5,"column":0},"generated":{"line":1,"column":47}},{"source":"auth_api.js","original":{"line":5,"column":0},"generated":{"line":1,"column":49}},{"source":"auth_api.js","original":{"line":5,"column":0},"generated":{"line":1,"column":51}},{"source":"auth_api.js","original":{"line":5,"column":0},"generated":{"line":1,"column":59}},{"source":"auth_api.js","original":{"line":6,"column":0},"generated":{"line":1,"column":71}},{"source":"auth_api.js","original":{"line":6,"column":0},"generated":{"line":1,"column":73}},{"source":"auth_api.js","original":{"line":6,"column":0},"generated":{"line":1,"column":75}},{"source":"auth_api.js","original":{"line":6,"column":0},"generated":{"line":1,"column":83}},{"source":"auth_api.js","original":{"line":7,"column":0},"generated":{"line":1,"column":99}},{"source":"auth_api.js","original":{"line":7,"column":0},"generated":{"line":1,"column":101}},{"source":"auth_api.js","original":{"line":7,"column":0},"generated":{"line":1,"column":103}},{"source":"auth_api.js","original":{"line":7,"column":0},"generated":{"line":1,"column":111}},{"source":"auth_api.js","original":{"line":8,"column":0},"generated":{"line":1,"column":127}},{"source":"auth_api.js","original":{"line":8,"column":0},"generated":{"line":1,"column":129}},{"source":"auth_api.js","original":{"line":8,"column":0},"generated":{"line":1,"column":131}},{"source":"auth_api.js","original":{"line":8,"column":0},"generated":{"line":1,"column":139}},{"source":"auth_api.js","original":{"line":9,"column":0},"generated":{"line":1,"column":150}},{"source":"auth_api.js","original":{"line":9,"column":0},"generated":{"line":1,"column":152}},{"source":"auth_api.js","original":{"line":9,"column":0},"generated":{"line":1,"column":154}},{"source":"auth_api.js","original":{"line":9,"column":0},"generated":{"line":1,"column":162}},{"source":"auth_api.js","original":{"line":10,"column":0},"generated":{"line":1,"column":171}},{"source":"auth_api.js","original":{"line":10,"column":0},"generated":{"line":1,"column":173}},{"source":"auth_api.js","original":{"line":10,"column":0},"generated":{"line":1,"column":175}},{"source":"auth_api.js","original":{"line":10,"column":0},"generated":{"line":1,"column":183}},{"source":"auth_api.js","original":{"line":11,"column":0},"generated":{"line":1,"column":195}},{"source":"auth_api.js","original":{"line":11,"column":0},"generated":{"line":1,"column":197}},{"source":"auth_api.js","original":{"line":11,"column":0},"generated":{"line":1,"column":199}},{"source":"auth_api.js","original":{"line":11,"column":0},"generated":{"line":1,"column":207}},{"source":"auth_api.js","original":{"line":13,"column":0},"generated":{"line":1,"column":229}},{"source":"auth_api.js","original":{"line":13,"column":0},"generated":{"line":1,"column":231}},{"source":"auth_api.js","original":{"line":13,"column":0},"generated":{"line":1,"column":233}},{"source":"auth_api.js","original":{"line":13,"column":0},"generated":{"line":1,"column":241}},{"source":"auth_api.js","original":{"line":14,"column":0},"generated":{"line":1,"column":262}},{"source":"auth_api.js","original":{"line":14,"column":0},"generated":{"line":1,"column":264}},{"source":"auth_api.js","original":{"line":14,"column":0},"generated":{"line":1,"column":266}},{"source":"auth_api.js","original":{"line":14,"column":0},"generated":{"line":1,"column":274}},{"source":"auth_api.js","original":{"line":16,"column":0},"generated":{"line":1,"column":294}},{"source":"auth_api.js","original":{"line":16,"column":0},"generated":{"line":1,"column":296}},{"source":"auth_api.js","original":{"line":16,"column":0},"generated":{"line":1,"column":298}},{"source":"auth_api.js","original":{"line":16,"column":0},"generated":{"line":1,"column":306}},{"source":"auth_api.js","original":{"line":71,"column":0},"generated":{"line":1,"column":330}},{"source":"auth_api.js","original":{"line":71,"column":0},"generated":{"line":1,"column":339}},{"source":"auth_api.js","original":{"line":71,"column":0},"generated":{"line":1,"column":341}},{"source":"auth_api.js","original":{"line":71,"column":0},"generated":{"line":1,"column":344}},{"source":"auth_api.js","original":{"line":71,"column":0},"generated":{"line":1,"column":351}},{"source":"auth_api.js","original":{"line":71,"column":0},"generated":{"line":1,"column":354}},{"source":"auth_api.js","original":{"line":71,"column":0},"generated":{"line":1,"column":356}},{"source":"auth_api.js","original":{"line":71,"column":0},"generated":{"line":1,"column":367}},{"source":"auth_api.js","original":{"line":71,"column":0},"generated":{"line":1,"column":369}},{"source":"auth_api.js","original":{"line":71,"column":0},"generated":{"line":1,"column":370}},{"source":"auth_api.js","original":{"line":71,"column":0},"generated":{"line":1,"column":378}},{"source":"auth_api.js","original":{"line":19,"column":0},"generated":{"line":1,"column":381}},{"source":"auth_api.js","name":"log_level","original":{"line":19,"column":6},"generated":{"line":1,"column":387}},{"source":"auth_api.js","name":"process","original":{"line":19,"column":18},"generated":{"line":1,"column":389}},{"source":"auth_api.js","name":"env","original":{"line":19,"column":26},"generated":{"line":1,"column":397}},{"source":"auth_api.js","name":"LOG_LEVEL","original":{"line":19,"column":30},"generated":{"line":1,"column":401}},{"source":"auth_api.js","original":{"line":19,"column":43},"generated":{"line":1,"column":412}},{"source":"auth_api.js","name":"log_format","original":{"line":20,"column":6},"generated":{"line":1,"column":420}},{"source":"auth_api.js","name":"process","original":{"line":20,"column":19},"generated":{"line":1,"column":422}},{"source":"auth_api.js","name":"env","original":{"line":20,"column":27},"generated":{"line":1,"column":430}},{"source":"auth_api.js","name":"LOG_FORMAT","original":{"line":20,"column":31},"generated":{"line":1,"column":434}},{"source":"auth_api.js","original":{"line":20,"column":45},"generated":{"line":1,"column":446}},{"source":"auth_api.js","name":"port","original":{"line":21,"column":6},"generated":{"line":1,"column":457}},{"source":"auth_api.js","name":"process","original":{"line":21,"column":13},"generated":{"line":1,"column":459}},{"source":"auth_api.js","name":"env","original":{"line":21,"column":21},"generated":{"line":1,"column":467}},{"source":"auth_api.js","name":"PORT","original":{"line":21,"column":25},"generated":{"line":1,"column":471}},{"source":"auth_api.js","name":"process","original":{"line":21,"column":33},"generated":{"line":1,"column":477}},{"source":"auth_api.js","name":"env","original":{"line":21,"column":41},"generated":{"line":1,"column":485}},{"source":"auth_api.js","name":"AUTH_API_PORT","original":{"line":21,"column":45},"generated":{"line":1,"column":489}},{"source":"auth_api.js","name":"CLIENT_URL","original":{"line":23,"column":6},"generated":{"line":1,"column":503}},{"source":"auth_api.js","original":{"line":23,"column":19},"generated":{"line":1,"column":505}},{"source":"auth_api.js","name":"app","original":{"line":25,"column":6},"generated":{"line":1,"column":529}},{"source":"auth_api.js","original":{"line":25,"column":12},"generated":{"line":1,"column":532}},{"source":"auth_api.js","original":{"line":25,"column":0},"generated":{"line":1,"column":534}},{"source":"auth_api.js","original":{"line":25,"column":0},"generated":{"line":1,"column":536}},{"source":"auth_api.js","original":{"line":29,"column":0},"generated":{"line":1,"column":547}},{"source":"auth_api.js","name":"app","original":{"line":26,"column":0},"generated":{"line":1,"column":550}},{"source":"auth_api.js","name":"use","original":{"line":26,"column":4},"generated":{"line":1,"column":552}},{"source":"auth_api.js","original":{"line":26,"column":8},"generated":{"line":1,"column":557}},{"source":"auth_api.js","original":{"line":26,"column":0},"generated":{"line":1,"column":559}},{"source":"auth_api.js","original":{"line":26,"column":0},"generated":{"line":1,"column":561}},{"source":"auth_api.js","name":"config","original":{"line":29,"column":4},"generated":{"line":1,"column":573}},{"source":"auth_api.js","name":"error","original":{"line":29,"column":11},"generated":{"line":1,"column":575}},{"source":"auth_api.js","name":"error","original":{"line":29,"column":11},"generated":{"line":1,"column":583}},{"source":"auth_api.js","name":"config","original":{"line":29,"column":26},"generated":{"line":1,"column":589}},{"source":"auth_api.js","name":"config","original":{"line":29,"column":26},"generated":{"line":1,"column":595}},{"source":"auth_api.js","name":"error","original":{"line":29,"column":33},"generated":{"line":1,"column":597}},{"source":"auth_api.js","name":"error","original":{"line":29,"column":33},"generated":{"line":1,"column":605}},{"source":"auth_api.js","original":{"line":32,"column":0},"generated":{"line":1,"column":611}},{"source":"auth_api.js","name":"requestId","original":{"line":32,"column":6},"generated":{"line":1,"column":617}},{"source":"auth_api.js","original":{"line":32,"column":18},"generated":{"line":1,"column":619}},{"source":"auth_api.js","name":"req","original":{"line":32,"column":19},"generated":{"line":1,"column":620}},{"source":"auth_api.js","name":"res","original":{"line":32,"column":24},"generated":{"line":1,"column":622}},{"source":"auth_api.js","name":"next","original":{"line":32,"column":29},"generated":{"line":1,"column":624}},{"source":"auth_api.js","name":"req","original":{"line":33,"column":4},"generated":{"line":1,"column":629}},{"source":"auth_api.js","name":"id","original":{"line":33,"column":8},"generated":{"line":1,"column":631}},{"source":"auth_api.js","original":{"line":33,"column":13},"generated":{"line":1,"column":635}},{"source":"auth_api.js","original":{"line":33,"column":4},"generated":{"line":1,"column":637}},{"source":"auth_api.js","original":{"line":33,"column":4},"generated":{"line":1,"column":639}},{"source":"auth_api.js","name":"next","original":{"line":34,"column":4},"generated":{"line":1,"column":650}},{"source":"auth_api.js","name":"morgan","original":{"line":37,"column":0},"generated":{"line":1,"column":655}},{"source":"auth_api.js","name":"token","original":{"line":37,"column":7},"generated":{"line":1,"column":657}},{"source":"auth_api.js","name":"token","original":{"line":37,"column":7},"generated":{"line":1,"column":665}},{"source":"auth_api.js","original":{"line":37,"column":13},"generated":{"line":1,"column":671}},{"source":"auth_api.js","name":"req","original":{"line":37,"column":20},"generated":{"line":1,"column":676}},{"source":"auth_api.js","name":"req","original":{"line":37,"column":37},"generated":{"line":1,"column":679}},{"source":"auth_api.js","name":"id","original":{"line":37,"column":41},"generated":{"line":1,"column":681}},{"source":"auth_api.js","name":"app","original":{"line":39,"column":0},"generated":{"line":1,"column":685}},{"source":"auth_api.js","name":"use","original":{"line":39,"column":4},"generated":{"line":1,"column":687}},{"source":"auth_api.js","name":"requestId","original":{"line":39,"column":8},"generated":{"line":1,"column":691}},{"source":"auth_api.js","name":"app","original":{"line":40,"column":0},"generated":{"line":1,"column":694}},{"source":"auth_api.js","name":"use","original":{"line":40,"column":4},"generated":{"line":1,"column":696}},{"source":"auth_api.js","name":"bodyParser","original":{"line":40,"column":8},"generated":{"line":1,"column":700}},{"source":"auth_api.js","name":"json","original":{"line":40,"column":19},"generated":{"line":1,"column":702}},{"source":"auth_api.js","name":"json","original":{"line":40,"column":19},"generated":{"line":1,"column":710}},{"source":"auth_api.js","name":"app","original":{"line":41,"column":0},"generated":{"line":1,"column":718}},{"source":"auth_api.js","name":"use","original":{"line":41,"column":4},"generated":{"line":1,"column":720}},{"source":"auth_api.js","name":"bodyParser","original":{"line":41,"column":8},"generated":{"line":1,"column":724}},{"source":"auth_api.js","name":"urlencoded","original":{"line":41,"column":19},"generated":{"line":1,"column":726}},{"source":"auth_api.js","name":"urlencoded","original":{"line":41,"column":19},"generated":{"line":1,"column":734}},{"source":"auth_api.js","original":{"line":41,"column":30},"generated":{"line":1,"column":745}},{"source":"auth_api.js","name":"extended","original":{"line":41,"column":32},"generated":{"line":1,"column":746}},{"source":"auth_api.js","original":{"line":41,"column":42},"generated":{"line":1,"column":756}},{"source":"auth_api.js","name":"app","original":{"line":43,"column":0},"generated":{"line":1,"column":761}},{"source":"auth_api.js","name":"use","original":{"line":43,"column":4},"generated":{"line":1,"column":763}},{"source":"auth_api.js","original":{"line":43,"column":8},"generated":{"line":1,"column":768}},{"source":"auth_api.js","name":"log_format","original":{"line":43,"column":15},"generated":{"line":1,"column":770}},{"source":"auth_api.js","name":"log_format","original":{"line":43,"column":15},"generated":{"line":1,"column":772}},{"source":"auth_api.js","name":"log_format","original":{"line":43,"column":15},"generated":{"line":1,"column":781}},{"source":"auth_api.js","original":{"line":43,"column":27},"generated":{"line":1,"column":783}},{"source":"auth_api.js","name":"stream","original":{"line":43,"column":29},"generated":{"line":1,"column":784}},{"source":"auth_api.js","name":"winston","original":{"line":43,"column":37},"generated":{"line":1,"column":791}},{"source":"auth_api.js","name":"stream","original":{"line":43,"column":45},"generated":{"line":1,"column":793}},{"source":"auth_api.js","name":"stream","original":{"line":43,"column":45},"generated":{"line":1,"column":801}},{"source":"auth_api.js","name":"app","original":{"line":44,"column":0},"generated":{"line":1,"column":811}},{"source":"auth_api.js","name":"use","original":{"line":44,"column":4},"generated":{"line":1,"column":813}},{"source":"auth_api.js","original":{"line":44,"column":8},"generated":{"line":1,"column":818}},{"source":"auth_api.js","original":{"line":44,"column":13},"generated":{"line":1,"column":820}},{"source":"auth_api.js","original":{"line":44,"column":13},"generated":{"line":1,"column":822}},{"source":"auth_api.js","original":{"line":44,"column":13},"generated":{"line":1,"column":831}},{"source":"auth_api.js","name":"origin","original":{"line":44,"column":15},"generated":{"line":1,"column":832}},{"source":"auth_api.js","name":"CLIENT_URL","original":{"line":44,"column":23},"generated":{"line":1,"column":839}},{"source":"auth_api.js","name":"app","original":{"line":47,"column":0},"generated":{"line":1,"column":844}},{"source":"auth_api.js","name":"get","original":{"line":47,"column":4},"generated":{"line":1,"column":846}},{"source":"auth_api.js","original":{"line":47,"column":8},"generated":{"line":1,"column":850}},{"source":"auth_api.js","original":{"line":47,"column":17},"generated":{"line":1,"column":858}},{"source":"auth_api.js","name":"req","original":{"line":47,"column":18},"generated":{"line":1,"column":859}},{"source":"auth_api.js","name":"res","original":{"line":47,"column":23},"generated":{"line":1,"column":861}},{"source":"auth_api.js","name":"payload","original":{"line":48,"column":8},"generated":{"line":1,"column":866}},{"source":"auth_api.js","name":"payload","original":{"line":48,"column":8},"generated":{"line":1,"column":870}},{"source":"auth_api.js","original":{"line":48,"column":18},"generated":{"line":1,"column":872}},{"source":"auth_api.js","original":{"line":49,"column":20},"generated":{"line":1,"column":873}},{"source":"auth_api.js","name":"common","original":{"line":49,"column":22},"generated":{"line":1,"column":884}},{"source":"auth_api.js","name":"app_name","original":{"line":49,"column":29},"generated":{"line":1,"column":886}},{"source":"auth_api.js","name":"app_name","original":{"line":49,"column":29},"generated":{"line":1,"column":894}},{"source":"auth_api.js","name":"common","original":{"line":49,"column":41},"generated":{"line":1,"column":906}},{"source":"auth_api.js","name":"version","original":{"line":49,"column":48},"generated":{"line":1,"column":908}},{"source":"auth_api.js","name":"version","original":{"line":49,"column":48},"generated":{"line":1,"column":916}},{"source":"auth_api.js","name":"common","original":{"line":49,"column":59},"generated":{"line":1,"column":927}},{"source":"auth_api.js","name":"build","original":{"line":49,"column":66},"generated":{"line":1,"column":929}},{"source":"auth_api.js","name":"build","original":{"line":49,"column":66},"generated":{"line":1,"column":937}},{"source":"auth_api.js","name":"res","original":{"line":51,"column":4},"generated":{"line":1,"column":946}},{"source":"auth_api.js","name":"status","original":{"line":51,"column":8},"generated":{"line":1,"column":948}},{"source":"auth_api.js","name":"HttpStatus","original":{"line":51,"column":15},"generated":{"line":1,"column":955}},{"source":"auth_api.js","name":"OK","original":{"line":51,"column":26},"generated":{"line":1,"column":957}},{"source":"auth_api.js","name":"OK","original":{"line":51,"column":26},"generated":{"line":1,"column":965}},{"source":"auth_api.js","name":"json","original":{"line":51,"column":30},"generated":{"line":1,"column":969}},{"source":"auth_api.js","name":"payload","original":{"line":51,"column":35},"generated":{"line":1,"column":974}},{"source":"auth_api.js","name":"app","original":{"line":54,"column":0},"generated":{"line":1,"column":979}},{"source":"auth_api.js","name":"use","original":{"line":54,"column":4},"generated":{"line":1,"column":981}},{"source":"auth_api.js","original":{"line":54,"column":8},"generated":{"line":1,"column":985}},{"source":"auth_api.js","name":"auth_router","original":{"line":54,"column":17},"generated":{"line":1,"column":993}},{"source":"auth_api.js","original":{"line":54,"column":0},"generated":{"line":1,"column":995}},{"source":"auth_api.js","name":"app","original":{"line":57,"column":0},"generated":{"line":1,"column":1004}},{"source":"auth_api.js","name":"use","original":{"line":57,"column":4},"generated":{"line":1,"column":1006}},{"source":"auth_api.js","original":{"line":57,"column":8},"generated":{"line":1,"column":1010}},{"source":"auth_api.js","name":"req","original":{"line":57,"column":9},"generated":{"line":1,"column":1011}},{"source":"auth_api.js","name":"res","original":{"line":57,"column":14},"generated":{"line":1,"column":1013}},{"source":"auth_api.js","name":"res","original":{"line":58,"column":4},"generated":{"line":1,"column":1018}},{"source":"auth_api.js","name":"status","original":{"line":58,"column":8},"generated":{"line":1,"column":1020}},{"source":"auth_api.js","name":"HttpStatus","original":{"line":58,"column":15},"generated":{"line":1,"column":1027}},{"source":"auth_api.js","name":"NOT_FOUND","original":{"line":58,"column":26},"generated":{"line":1,"column":1029}},{"source":"auth_api.js","name":"NOT_FOUND","original":{"line":58,"column":26},"generated":{"line":1,"column":1037}},{"source":"auth_api.js","name":"req","original":{"line":61,"column":8},"generated":{"line":1,"column":1048}},{"source":"auth_api.js","name":"accepts","original":{"line":61,"column":12},"generated":{"line":1,"column":1050}},{"source":"auth_api.js","original":{"line":61,"column":20},"generated":{"line":1,"column":1058}},{"source":"auth_api.js","name":"res","original":{"line":62,"column":8},"generated":{"line":1,"column":1066}},{"source":"auth_api.js","name":"send","original":{"line":62,"column":12},"generated":{"line":1,"column":1068}},{"source":"auth_api.js","original":{"line":62,"column":17},"generated":{"line":1,"column":1073}},{"source":"auth_api.js","name":"error","original":{"line":62,"column":19},"generated":{"line":1,"column":1074}},{"source":"auth_api.js","original":{"line":62,"column":26},"generated":{"line":1,"column":1080}},{"source":"auth_api.js","name":"res","original":{"line":67,"column":4},"generated":{"line":1,"column":1113}},{"source":"auth_api.js","name":"type","original":{"line":67,"column":8},"generated":{"line":1,"column":1115}},{"source":"auth_api.js","original":{"line":67,"column":13},"generated":{"line":1,"column":1120}},{"source":"auth_api.js","name":"send","original":{"line":67,"column":20},"generated":{"line":1,"column":1127}},{"source":"auth_api.js","original":{"line":67,"column":25},"generated":{"line":1,"column":1132}},{"source":"auth_api.js","name":"app","original":{"line":71,"column":0},"generated":{"line":1,"column":1166}},{"source":"auth_api.js","name":"listen","original":{"line":71,"column":4},"generated":{"line":1,"column":1168}},{"source":"auth_api.js","name":"port","original":{"line":71,"column":11},"generated":{"line":1,"column":1175}},{"source":"auth_api.js","original":{"line":71,"column":17},"generated":{"line":1,"column":1177}},{"source":"auth_api.js","name":"console","original":{"line":71,"column":23},"generated":{"line":1,"column":1181}},{"source":"auth_api.js","name":"log","original":{"line":71,"column":31},"generated":{"line":1,"column":1189}},{"source":"auth_api.js","name":"port","original":{"line":71,"column":65},"generated":{"line":1,"column":1223}}],"sources":{"auth_api.js":"/* eslint-disable no-console */\n'use strict'\n\nimport config from 'dotenv/config'\nimport express from 'express'\nimport compression from 'compression'\nimport bodyParser from 'body-parser'\nimport morgan from 'morgan'\nimport cors from 'cors'\nimport uuid from 'uuid/v4'\nimport HttpStatus from 'http-status-codes'\n\nimport winston from './shared/winston'\nimport common from './shared/common'\n\nimport auth_router from './routes/auth_route'\n\n// eslint-disable-next-line no-unused-vars\nconst log_level = process.env.LOG_LEVEL || 'debug'\nconst log_format = process.env.LOG_FORMAT || 'combined'\nconst port = process.env.PORT || process.env.AUTH_API_PORT\n\nconst CLIENT_URL = 'http://localhost:9000'\n\nconst app = express()\napp.use(compression()) // use compression\n\n// check configuration\nif (config.error) { throw config.error }\n\n// id for log\nconst requestId = (req, res, next) => {\n    req.id = uuid()\n    next()\n}\n\nmorgan.token('id', (req) => { return req.id })\n\napp.use(requestId)\napp.use(bodyParser.json())\napp.use(bodyParser.urlencoded({ extended: false }))\n\napp.use(morgan(log_format, { stream: winston.stream }))\napp.use(cors({ origin: CLIENT_URL }))\n\n// ping\napp.get('/api/', (req, res) => {\n    let payload = {\n        'Service': `${common.app_name} ${common.version} ${common.build}`\n    }\n    res.status(HttpStatus.OK).json(payload)\n})\n\napp.use('/api/', auth_router)\n\n// 404\napp.use((req, res) => {\n    res.status(HttpStatus.NOT_FOUND)\n\n    // respond with json\n    if (req.accepts('json')) {\n        res.send({ error: 'API endpoint does not exist!' })\n        return\n    }\n\n    // default to plain-text. send()\n    res.type('txt').send('API endpoint does not exist!')\n})\n\n//start the app server\napp.listen(port, () => console.log(`auth api listening on port ${port}!`))"},"lineCount":null}},"error":null,"hash":"9e156c801e5b456089ed3ba3c8d424ef","cacheData":{"env":{}}}