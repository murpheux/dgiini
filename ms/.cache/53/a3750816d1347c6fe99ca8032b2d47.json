{"id":"8DCa","dependencies":[{"name":"/Users/murpheux/Workspace/projects/dgiini/microservices/.babelrc","includedInParent":true,"mtime":1557029603000},{"name":"/Users/murpheux/Workspace/projects/dgiini/microservices/package.json","includedInParent":true,"mtime":1563323962672},{"name":"mongodb","loc":{"line":2,"column":20},"parent":"/Users/murpheux/Workspace/projects/dgiini/microservices/src/data/mongo_access.js","resolved":"/Users/murpheux/Workspace/projects/dgiini/microservices/node_modules/mongodb/index.js"}],"generated":{"js":"\"use strict\";var n=t(require(\"mongodb\"));function t(n){return n&&n.__esModule?n:{default:n}}var e=n.default.MongoClient,i=n.default.ObjectId;module.exports={setup_database:function(n,t,i,o){return new Promise(function(c,u){e.connect(n,i,function(n,e){o.forEach(function(n){e.db(t).createCollection(n,function(t){t?u(t):c(n),n===o[o.length-1]&&e.close()})})})})},get_connection:function(n,t,i){return new Promise(function(o,c){e.connect(n,i,function(n,e){n?c(n):o(e.db(t))})})},create:function(n,t,e){return new Promise(function(i,o){n.collection(t).insertOne(e,function(n,t){n?o(n):i(t)})})},getlist:function(n,t,e){return e.filter._id&&(e.filter._id=i(e.filter._id)),e.lastid?new Promise(function(o,c){n.collection(t).find({_id:{$gt:i(e.lastid)}}).limit(e.page_limit).toArray(function(n,t){n?c(n):o(t)})}):new Promise(function(i,o){n.collection(t).find(e.filter).skip(e.page_limit*(e.page-1)).limit(e.page_limit).toArray(function(n,t){n?o(n):i(t)})})},getone:function(n,t,e){return e._id&&(e._id=i(e._id)),new Promise(function(i,o){n.collection(t).findOne(e,function(n,t){n?o(n):i(t)})})},updateone:function(n,t,e,o){return new Promise(function(c,u){n.collection(t).updateOne({_id:i(e)},{$set:o},function(n,t){n?u(n):c(t)})})},disable:function(n,t,e){return new Promise(function(o,c){n.collection(t).deleteOne({_id:i(e)},function(n,t){n?c(n):o(t)})})},destroy:function(n,t,e){return new Promise(function(o,c){n.collection(t).deleteOne({_id:i(e)},function(n,t){n?c(n):o(t)})})},count:function(n,t,e){return new Promise(function(i,o){i(n.collection(t).find(e).count())})}};"},"sourceMaps":{"js":{"mappings":[{"source":"data/mongo_access.js","original":{"line":7,"column":0},"generated":{"line":1,"column":0}},{"source":"data/mongo_access.js","original":{"line":2,"column":0},"generated":{"line":1,"column":13}},{"source":"data/mongo_access.js","original":{"line":2,"column":0},"generated":{"line":1,"column":17}},{"source":"data/mongo_access.js","original":{"line":2,"column":0},"generated":{"line":1,"column":19}},{"source":"data/mongo_access.js","original":{"line":2,"column":0},"generated":{"line":1,"column":21}},{"source":"data/mongo_access.js","original":{"line":2,"column":0},"generated":{"line":1,"column":29}},{"source":"data/mongo_access.js","original":{"line":7,"column":0},"generated":{"line":1,"column":41}},{"source":"data/mongo_access.js","original":{"line":7,"column":0},"generated":{"line":1,"column":50}},{"source":"data/mongo_access.js","original":{"line":7,"column":0},"generated":{"line":1,"column":52}},{"source":"data/mongo_access.js","original":{"line":7,"column":0},"generated":{"line":1,"column":55}},{"source":"data/mongo_access.js","original":{"line":7,"column":0},"generated":{"line":1,"column":62}},{"source":"data/mongo_access.js","original":{"line":7,"column":0},"generated":{"line":1,"column":65}},{"source":"data/mongo_access.js","original":{"line":7,"column":0},"generated":{"line":1,"column":67}},{"source":"data/mongo_access.js","original":{"line":7,"column":0},"generated":{"line":1,"column":78}},{"source":"data/mongo_access.js","original":{"line":7,"column":0},"generated":{"line":1,"column":80}},{"source":"data/mongo_access.js","original":{"line":7,"column":0},"generated":{"line":1,"column":81}},{"source":"data/mongo_access.js","original":{"line":7,"column":0},"generated":{"line":1,"column":89}},{"source":"data/mongo_access.js","original":{"line":4,"column":0},"generated":{"line":1,"column":92}},{"source":"data/mongo_access.js","name":"mongoClient","original":{"line":4,"column":6},"generated":{"line":1,"column":96}},{"source":"data/mongo_access.js","name":"mongodb","original":{"line":4,"column":20},"generated":{"line":1,"column":98}},{"source":"data/mongo_access.js","name":"MongoClient","original":{"line":4,"column":28},"generated":{"line":1,"column":100}},{"source":"data/mongo_access.js","name":"MongoClient","original":{"line":4,"column":28},"generated":{"line":1,"column":108}},{"source":"data/mongo_access.js","name":"ObjectId","original":{"line":5,"column":6},"generated":{"line":1,"column":120}},{"source":"data/mongo_access.js","name":"mongodb","original":{"line":5,"column":17},"generated":{"line":1,"column":122}},{"source":"data/mongo_access.js","name":"ObjectId","original":{"line":5,"column":25},"generated":{"line":1,"column":124}},{"source":"data/mongo_access.js","name":"ObjectId","original":{"line":5,"column":25},"generated":{"line":1,"column":132}},{"source":"data/mongo_access.js","name":"module","original":{"line":7,"column":0},"generated":{"line":1,"column":141}},{"source":"data/mongo_access.js","name":"exports","original":{"line":7,"column":7},"generated":{"line":1,"column":148}},{"source":"data/mongo_access.js","original":{"line":7,"column":17},"generated":{"line":1,"column":156}},{"source":"data/mongo_access.js","name":"setup_database","original":{"line":10,"column":4},"generated":{"line":1,"column":157}},{"source":"data/mongo_access.js","original":{"line":10,"column":20},"generated":{"line":1,"column":172}},{"source":"data/mongo_access.js","name":"db_url","original":{"line":10,"column":21},"generated":{"line":1,"column":181}},{"source":"data/mongo_access.js","name":"database_name","original":{"line":10,"column":29},"generated":{"line":1,"column":183}},{"source":"data/mongo_access.js","name":"options","original":{"line":10,"column":44},"generated":{"line":1,"column":185}},{"source":"data/mongo_access.js","name":"collections","original":{"line":10,"column":53},"generated":{"line":1,"column":187}},{"source":"data/mongo_access.js","original":{"line":11,"column":15},"generated":{"line":1,"column":190}},{"source":"data/mongo_access.js","original":{"line":11,"column":15},"generated":{"line":1,"column":197}},{"source":"data/mongo_access.js","name":"Promise","original":{"line":11,"column":19},"generated":{"line":1,"column":201}},{"source":"data/mongo_access.js","original":{"line":11,"column":27},"generated":{"line":1,"column":209}},{"source":"data/mongo_access.js","name":"resolve","original":{"line":11,"column":28},"generated":{"line":1,"column":218}},{"source":"data/mongo_access.js","name":"reject","original":{"line":11,"column":37},"generated":{"line":1,"column":220}},{"source":"data/mongo_access.js","name":"mongoClient","original":{"line":12,"column":12},"generated":{"line":1,"column":223}},{"source":"data/mongo_access.js","name":"connect","original":{"line":12,"column":24},"generated":{"line":1,"column":225}},{"source":"data/mongo_access.js","name":"db_url","original":{"line":12,"column":32},"generated":{"line":1,"column":233}},{"source":"data/mongo_access.js","name":"options","original":{"line":12,"column":40},"generated":{"line":1,"column":235}},{"source":"data/mongo_access.js","original":{"line":12,"column":49},"generated":{"line":1,"column":237}},{"source":"data/mongo_access.js","name":"err","original":{"line":12,"column":50},"generated":{"line":1,"column":246}},{"source":"data/mongo_access.js","name":"client","original":{"line":12,"column":55},"generated":{"line":1,"column":248}},{"source":"data/mongo_access.js","name":"collections","original":{"line":13,"column":16},"generated":{"line":1,"column":251}},{"source":"data/mongo_access.js","name":"forEach","original":{"line":13,"column":28},"generated":{"line":1,"column":253}},{"source":"data/mongo_access.js","original":{"line":13,"column":36},"generated":{"line":1,"column":261}},{"source":"data/mongo_access.js","name":"coll","original":{"line":13,"column":36},"generated":{"line":1,"column":270}},{"source":"data/mongo_access.js","name":"client","original":{"line":14,"column":20},"generated":{"line":1,"column":273}},{"source":"data/mongo_access.js","name":"db","original":{"line":14,"column":27},"generated":{"line":1,"column":275}},{"source":"data/mongo_access.js","name":"database_name","original":{"line":14,"column":30},"generated":{"line":1,"column":278}},{"source":"data/mongo_access.js","name":"createCollection","original":{"line":14,"column":45},"generated":{"line":1,"column":281}},{"source":"data/mongo_access.js","name":"coll","original":{"line":14,"column":62},"generated":{"line":1,"column":298}},{"source":"data/mongo_access.js","original":{"line":14,"column":68},"generated":{"line":1,"column":300}},{"source":"data/mongo_access.js","name":"err","original":{"line":14,"column":69},"generated":{"line":1,"column":309}},{"source":"data/mongo_access.js","name":"err","original":{"line":15,"column":24},"generated":{"line":1,"column":312}},{"source":"data/mongo_access.js","name":"reject","original":{"line":15,"column":30},"generated":{"line":1,"column":314}},{"source":"data/mongo_access.js","name":"err","original":{"line":15,"column":37},"generated":{"line":1,"column":316}},{"source":"data/mongo_access.js","name":"resolve","original":{"line":15,"column":44},"generated":{"line":1,"column":319}},{"source":"data/mongo_access.js","name":"coll","original":{"line":15,"column":52},"generated":{"line":1,"column":321}},{"source":"data/mongo_access.js","name":"coll","original":{"line":17,"column":28},"generated":{"line":1,"column":324}},{"source":"data/mongo_access.js","name":"collections","original":{"line":17,"column":37},"generated":{"line":1,"column":328}},{"source":"data/mongo_access.js","name":"collections","original":{"line":17,"column":49},"generated":{"line":1,"column":330}},{"source":"data/mongo_access.js","name":"length","original":{"line":17,"column":61},"generated":{"line":1,"column":332}},{"source":"data/mongo_access.js","original":{"line":17,"column":70},"generated":{"line":1,"column":339}},{"source":"data/mongo_access.js","name":"client","original":{"line":17,"column":76},"generated":{"line":1,"column":343}},{"source":"data/mongo_access.js","name":"close","original":{"line":17,"column":83},"generated":{"line":1,"column":345}},{"source":"data/mongo_access.js","name":"get_connection","original":{"line":25,"column":4},"generated":{"line":1,"column":362}},{"source":"data/mongo_access.js","original":{"line":25,"column":20},"generated":{"line":1,"column":377}},{"source":"data/mongo_access.js","name":"db_url","original":{"line":25,"column":21},"generated":{"line":1,"column":386}},{"source":"data/mongo_access.js","name":"database_name","original":{"line":25,"column":29},"generated":{"line":1,"column":388}},{"source":"data/mongo_access.js","name":"options","original":{"line":25,"column":44},"generated":{"line":1,"column":390}},{"source":"data/mongo_access.js","original":{"line":26,"column":15},"generated":{"line":1,"column":393}},{"source":"data/mongo_access.js","original":{"line":26,"column":15},"generated":{"line":1,"column":400}},{"source":"data/mongo_access.js","name":"Promise","original":{"line":26,"column":19},"generated":{"line":1,"column":404}},{"source":"data/mongo_access.js","original":{"line":26,"column":27},"generated":{"line":1,"column":412}},{"source":"data/mongo_access.js","name":"resolve","original":{"line":26,"column":28},"generated":{"line":1,"column":421}},{"source":"data/mongo_access.js","name":"reject","original":{"line":26,"column":37},"generated":{"line":1,"column":423}},{"source":"data/mongo_access.js","name":"mongoClient","original":{"line":27,"column":12},"generated":{"line":1,"column":426}},{"source":"data/mongo_access.js","name":"connect","original":{"line":27,"column":24},"generated":{"line":1,"column":428}},{"source":"data/mongo_access.js","name":"db_url","original":{"line":27,"column":32},"generated":{"line":1,"column":436}},{"source":"data/mongo_access.js","name":"options","original":{"line":27,"column":40},"generated":{"line":1,"column":438}},{"source":"data/mongo_access.js","original":{"line":27,"column":49},"generated":{"line":1,"column":440}},{"source":"data/mongo_access.js","name":"err","original":{"line":27,"column":50},"generated":{"line":1,"column":449}},{"source":"data/mongo_access.js","name":"client","original":{"line":27,"column":55},"generated":{"line":1,"column":451}},{"source":"data/mongo_access.js","name":"err","original":{"line":28,"column":16},"generated":{"line":1,"column":454}},{"source":"data/mongo_access.js","name":"reject","original":{"line":28,"column":22},"generated":{"line":1,"column":456}},{"source":"data/mongo_access.js","name":"err","original":{"line":28,"column":29},"generated":{"line":1,"column":458}},{"source":"data/mongo_access.js","name":"resolve","original":{"line":28,"column":36},"generated":{"line":1,"column":461}},{"source":"data/mongo_access.js","name":"client","original":{"line":28,"column":44},"generated":{"line":1,"column":463}},{"source":"data/mongo_access.js","name":"db","original":{"line":28,"column":51},"generated":{"line":1,"column":465}},{"source":"data/mongo_access.js","name":"database_name","original":{"line":28,"column":54},"generated":{"line":1,"column":468}},{"source":"data/mongo_access.js","name":"create","original":{"line":34,"column":4},"generated":{"line":1,"column":477}},{"source":"data/mongo_access.js","original":{"line":34,"column":12},"generated":{"line":1,"column":484}},{"source":"data/mongo_access.js","name":"db","original":{"line":34,"column":13},"generated":{"line":1,"column":493}},{"source":"data/mongo_access.js","name":"collection","original":{"line":34,"column":17},"generated":{"line":1,"column":495}},{"source":"data/mongo_access.js","name":"item","original":{"line":34,"column":29},"generated":{"line":1,"column":497}},{"source":"data/mongo_access.js","original":{"line":35,"column":15},"generated":{"line":1,"column":500}},{"source":"data/mongo_access.js","original":{"line":35,"column":15},"generated":{"line":1,"column":507}},{"source":"data/mongo_access.js","name":"Promise","original":{"line":35,"column":19},"generated":{"line":1,"column":511}},{"source":"data/mongo_access.js","original":{"line":35,"column":27},"generated":{"line":1,"column":519}},{"source":"data/mongo_access.js","name":"resolve","original":{"line":35,"column":28},"generated":{"line":1,"column":528}},{"source":"data/mongo_access.js","name":"reject","original":{"line":35,"column":37},"generated":{"line":1,"column":530}},{"source":"data/mongo_access.js","name":"db","original":{"line":36,"column":12},"generated":{"line":1,"column":533}},{"source":"data/mongo_access.js","name":"collection","original":{"line":36,"column":15},"generated":{"line":1,"column":535}},{"source":"data/mongo_access.js","name":"collection","original":{"line":36,"column":26},"generated":{"line":1,"column":546}},{"source":"data/mongo_access.js","name":"insertOne","original":{"line":36,"column":38},"generated":{"line":1,"column":549}},{"source":"data/mongo_access.js","name":"item","original":{"line":36,"column":48},"generated":{"line":1,"column":559}},{"source":"data/mongo_access.js","original":{"line":37,"column":16},"generated":{"line":1,"column":561}},{"source":"data/mongo_access.js","name":"err","original":{"line":37,"column":17},"generated":{"line":1,"column":570}},{"source":"data/mongo_access.js","name":"data","original":{"line":37,"column":22},"generated":{"line":1,"column":572}},{"source":"data/mongo_access.js","name":"err","original":{"line":38,"column":20},"generated":{"line":1,"column":575}},{"source":"data/mongo_access.js","name":"reject","original":{"line":38,"column":26},"generated":{"line":1,"column":577}},{"source":"data/mongo_access.js","name":"err","original":{"line":38,"column":33},"generated":{"line":1,"column":579}},{"source":"data/mongo_access.js","name":"resolve","original":{"line":38,"column":40},"generated":{"line":1,"column":582}},{"source":"data/mongo_access.js","name":"data","original":{"line":38,"column":48},"generated":{"line":1,"column":584}},{"source":"data/mongo_access.js","name":"getlist","original":{"line":44,"column":4},"generated":{"line":1,"column":592}},{"source":"data/mongo_access.js","original":{"line":44,"column":13},"generated":{"line":1,"column":600}},{"source":"data/mongo_access.js","name":"db","original":{"line":44,"column":14},"generated":{"line":1,"column":609}},{"source":"data/mongo_access.js","name":"collection","original":{"line":44,"column":18},"generated":{"line":1,"column":611}},{"source":"data/mongo_access.js","name":"paging","original":{"line":44,"column":30},"generated":{"line":1,"column":613}},{"source":"data/mongo_access.js","name":"paging","original":{"line":50,"column":12},"generated":{"line":1,"column":616}},{"source":"data/mongo_access.js","name":"paging","original":{"line":46,"column":12},"generated":{"line":1,"column":623}},{"source":"data/mongo_access.js","name":"filter","original":{"line":46,"column":19},"generated":{"line":1,"column":625}},{"source":"data/mongo_access.js","original":{"line":46,"column":12},"generated":{"line":1,"column":632}},{"source":"data/mongo_access.js","name":"paging","original":{"line":47,"column":12},"generated":{"line":1,"column":638}},{"source":"data/mongo_access.js","name":"filter","original":{"line":47,"column":19},"generated":{"line":1,"column":640}},{"source":"data/mongo_access.js","original":{"line":47,"column":12},"generated":{"line":1,"column":647}},{"source":"data/mongo_access.js","name":"ObjectId","original":{"line":47,"column":35},"generated":{"line":1,"column":651}},{"source":"data/mongo_access.js","name":"paging","original":{"line":47,"column":44},"generated":{"line":1,"column":653}},{"source":"data/mongo_access.js","name":"filter","original":{"line":47,"column":51},"generated":{"line":1,"column":655}},{"source":"data/mongo_access.js","original":{"line":47,"column":44},"generated":{"line":1,"column":662}},{"source":"data/mongo_access.js","name":"paging","original":{"line":50,"column":12},"generated":{"line":1,"column":668}},{"source":"data/mongo_access.js","name":"lastid","original":{"line":50,"column":19},"generated":{"line":1,"column":670}},{"source":"data/mongo_access.js","original":{"line":51,"column":19},"generated":{"line":1,"column":677}},{"source":"data/mongo_access.js","name":"Promise","original":{"line":51,"column":23},"generated":{"line":1,"column":681}},{"source":"data/mongo_access.js","original":{"line":51,"column":31},"generated":{"line":1,"column":689}},{"source":"data/mongo_access.js","name":"resolve","original":{"line":51,"column":32},"generated":{"line":1,"column":698}},{"source":"data/mongo_access.js","name":"reject","original":{"line":51,"column":41},"generated":{"line":1,"column":700}},{"source":"data/mongo_access.js","name":"db","original":{"line":52,"column":16},"generated":{"line":1,"column":703}},{"source":"data/mongo_access.js","name":"collection","original":{"line":52,"column":19},"generated":{"line":1,"column":705}},{"source":"data/mongo_access.js","name":"collection","original":{"line":52,"column":30},"generated":{"line":1,"column":716}},{"source":"data/mongo_access.js","name":"find","original":{"line":52,"column":42},"generated":{"line":1,"column":719}},{"source":"data/mongo_access.js","original":{"line":52,"column":47},"generated":{"line":1,"column":724}},{"source":"data/mongo_access.js","original":{"line":52,"column":56},"generated":{"line":1,"column":725}},{"source":"data/mongo_access.js","original":{"line":52,"column":56},"generated":{"line":1,"column":729}},{"source":"data/mongo_access.js","name":"ObjectId","original":{"line":52,"column":65},"generated":{"line":1,"column":730}},{"source":"data/mongo_access.js","name":"ObjectId","original":{"line":52,"column":65},"generated":{"line":1,"column":734}},{"source":"data/mongo_access.js","name":"paging","original":{"line":52,"column":74},"generated":{"line":1,"column":736}},{"source":"data/mongo_access.js","name":"lastid","original":{"line":52,"column":81},"generated":{"line":1,"column":738}},{"source":"data/mongo_access.js","name":"limit","original":{"line":53,"column":21},"generated":{"line":1,"column":749}},{"source":"data/mongo_access.js","name":"paging","original":{"line":53,"column":27},"generated":{"line":1,"column":755}},{"source":"data/mongo_access.js","name":"page_limit","original":{"line":53,"column":34},"generated":{"line":1,"column":757}},{"source":"data/mongo_access.js","name":"toArray","original":{"line":54,"column":21},"generated":{"line":1,"column":769}},{"source":"data/mongo_access.js","original":{"line":54,"column":29},"generated":{"line":1,"column":777}},{"source":"data/mongo_access.js","name":"err","original":{"line":54,"column":30},"generated":{"line":1,"column":786}},{"source":"data/mongo_access.js","name":"data","original":{"line":54,"column":35},"generated":{"line":1,"column":788}},{"source":"data/mongo_access.js","name":"err","original":{"line":55,"column":24},"generated":{"line":1,"column":791}},{"source":"data/mongo_access.js","name":"reject","original":{"line":55,"column":30},"generated":{"line":1,"column":793}},{"source":"data/mongo_access.js","name":"err","original":{"line":55,"column":37},"generated":{"line":1,"column":795}},{"source":"data/mongo_access.js","name":"resolve","original":{"line":55,"column":44},"generated":{"line":1,"column":798}},{"source":"data/mongo_access.js","name":"data","original":{"line":55,"column":52},"generated":{"line":1,"column":800}},{"source":"data/mongo_access.js","original":{"line":59,"column":19},"generated":{"line":1,"column":807}},{"source":"data/mongo_access.js","name":"Promise","original":{"line":59,"column":23},"generated":{"line":1,"column":811}},{"source":"data/mongo_access.js","original":{"line":59,"column":31},"generated":{"line":1,"column":819}},{"source":"data/mongo_access.js","name":"resolve","original":{"line":59,"column":32},"generated":{"line":1,"column":828}},{"source":"data/mongo_access.js","name":"reject","original":{"line":59,"column":41},"generated":{"line":1,"column":830}},{"source":"data/mongo_access.js","name":"db","original":{"line":60,"column":16},"generated":{"line":1,"column":833}},{"source":"data/mongo_access.js","name":"collection","original":{"line":60,"column":19},"generated":{"line":1,"column":835}},{"source":"data/mongo_access.js","name":"collection","original":{"line":60,"column":30},"generated":{"line":1,"column":846}},{"source":"data/mongo_access.js","name":"find","original":{"line":60,"column":42},"generated":{"line":1,"column":849}},{"source":"data/mongo_access.js","name":"paging","original":{"line":60,"column":47},"generated":{"line":1,"column":854}},{"source":"data/mongo_access.js","name":"filter","original":{"line":60,"column":54},"generated":{"line":1,"column":856}},{"source":"data/mongo_access.js","name":"skip","original":{"line":61,"column":21},"generated":{"line":1,"column":864}},{"source":"data/mongo_access.js","name":"paging","original":{"line":61,"column":26},"generated":{"line":1,"column":869}},{"source":"data/mongo_access.js","name":"page_limit","original":{"line":61,"column":33},"generated":{"line":1,"column":871}},{"source":"data/mongo_access.js","name":"paging","original":{"line":61,"column":47},"generated":{"line":1,"column":883}},{"source":"data/mongo_access.js","name":"page","original":{"line":61,"column":54},"generated":{"line":1,"column":885}},{"source":"data/mongo_access.js","original":{"line":61,"column":61},"generated":{"line":1,"column":890}},{"source":"data/mongo_access.js","name":"limit","original":{"line":61,"column":65},"generated":{"line":1,"column":894}},{"source":"data/mongo_access.js","name":"paging","original":{"line":61,"column":71},"generated":{"line":1,"column":900}},{"source":"data/mongo_access.js","name":"page_limit","original":{"line":61,"column":78},"generated":{"line":1,"column":902}},{"source":"data/mongo_access.js","name":"toArray","original":{"line":62,"column":21},"generated":{"line":1,"column":914}},{"source":"data/mongo_access.js","original":{"line":62,"column":29},"generated":{"line":1,"column":922}},{"source":"data/mongo_access.js","name":"err","original":{"line":62,"column":30},"generated":{"line":1,"column":931}},{"source":"data/mongo_access.js","name":"data","original":{"line":62,"column":35},"generated":{"line":1,"column":933}},{"source":"data/mongo_access.js","name":"err","original":{"line":63,"column":24},"generated":{"line":1,"column":936}},{"source":"data/mongo_access.js","name":"reject","original":{"line":63,"column":30},"generated":{"line":1,"column":938}},{"source":"data/mongo_access.js","name":"err","original":{"line":63,"column":37},"generated":{"line":1,"column":940}},{"source":"data/mongo_access.js","name":"resolve","original":{"line":63,"column":44},"generated":{"line":1,"column":943}},{"source":"data/mongo_access.js","name":"data","original":{"line":63,"column":52},"generated":{"line":1,"column":945}},{"source":"data/mongo_access.js","name":"getone","original":{"line":70,"column":4},"generated":{"line":1,"column":953}},{"source":"data/mongo_access.js","original":{"line":70,"column":12},"generated":{"line":1,"column":960}},{"source":"data/mongo_access.js","name":"db","original":{"line":70,"column":13},"generated":{"line":1,"column":969}},{"source":"data/mongo_access.js","name":"collection","original":{"line":70,"column":17},"generated":{"line":1,"column":971}},{"source":"data/mongo_access.js","name":"filter","original":{"line":70,"column":29},"generated":{"line":1,"column":973}},{"source":"data/mongo_access.js","original":{"line":75,"column":15},"generated":{"line":1,"column":976}},{"source":"data/mongo_access.js","name":"filter","original":{"line":71,"column":12},"generated":{"line":1,"column":983}},{"source":"data/mongo_access.js","original":{"line":71,"column":18},"generated":{"line":1,"column":985}},{"source":"data/mongo_access.js","name":"filter","original":{"line":72,"column":12},"generated":{"line":1,"column":991}},{"source":"data/mongo_access.js","original":{"line":72,"column":18},"generated":{"line":1,"column":993}},{"source":"data/mongo_access.js","name":"ObjectId","original":{"line":72,"column":28},"generated":{"line":1,"column":997}},{"source":"data/mongo_access.js","name":"filter","original":{"line":72,"column":37},"generated":{"line":1,"column":999}},{"source":"data/mongo_access.js","original":{"line":72,"column":43},"generated":{"line":1,"column":1001}},{"source":"data/mongo_access.js","original":{"line":75,"column":15},"generated":{"line":1,"column":1007}},{"source":"data/mongo_access.js","name":"Promise","original":{"line":75,"column":19},"generated":{"line":1,"column":1011}},{"source":"data/mongo_access.js","original":{"line":75,"column":27},"generated":{"line":1,"column":1019}},{"source":"data/mongo_access.js","name":"resolve","original":{"line":75,"column":28},"generated":{"line":1,"column":1028}},{"source":"data/mongo_access.js","name":"reject","original":{"line":75,"column":37},"generated":{"line":1,"column":1030}},{"source":"data/mongo_access.js","name":"db","original":{"line":76,"column":12},"generated":{"line":1,"column":1033}},{"source":"data/mongo_access.js","name":"collection","original":{"line":76,"column":15},"generated":{"line":1,"column":1035}},{"source":"data/mongo_access.js","name":"collection","original":{"line":76,"column":26},"generated":{"line":1,"column":1046}},{"source":"data/mongo_access.js","name":"findOne","original":{"line":76,"column":38},"generated":{"line":1,"column":1049}},{"source":"data/mongo_access.js","name":"filter","original":{"line":76,"column":46},"generated":{"line":1,"column":1057}},{"source":"data/mongo_access.js","original":{"line":77,"column":16},"generated":{"line":1,"column":1059}},{"source":"data/mongo_access.js","name":"err","original":{"line":77,"column":17},"generated":{"line":1,"column":1068}},{"source":"data/mongo_access.js","name":"data","original":{"line":77,"column":22},"generated":{"line":1,"column":1070}},{"source":"data/mongo_access.js","name":"err","original":{"line":78,"column":20},"generated":{"line":1,"column":1073}},{"source":"data/mongo_access.js","name":"reject","original":{"line":78,"column":26},"generated":{"line":1,"column":1075}},{"source":"data/mongo_access.js","name":"err","original":{"line":78,"column":33},"generated":{"line":1,"column":1077}},{"source":"data/mongo_access.js","name":"resolve","original":{"line":78,"column":40},"generated":{"line":1,"column":1080}},{"source":"data/mongo_access.js","name":"data","original":{"line":78,"column":48},"generated":{"line":1,"column":1082}},{"source":"data/mongo_access.js","name":"updateone","original":{"line":84,"column":4},"generated":{"line":1,"column":1090}},{"source":"data/mongo_access.js","original":{"line":84,"column":15},"generated":{"line":1,"column":1100}},{"source":"data/mongo_access.js","name":"db","original":{"line":84,"column":16},"generated":{"line":1,"column":1109}},{"source":"data/mongo_access.js","name":"collection","original":{"line":84,"column":20},"generated":{"line":1,"column":1111}},{"source":"data/mongo_access.js","name":"id","original":{"line":84,"column":32},"generated":{"line":1,"column":1113}},{"source":"data/mongo_access.js","name":"item","original":{"line":84,"column":36},"generated":{"line":1,"column":1115}},{"source":"data/mongo_access.js","original":{"line":85,"column":15},"generated":{"line":1,"column":1118}},{"source":"data/mongo_access.js","original":{"line":85,"column":15},"generated":{"line":1,"column":1125}},{"source":"data/mongo_access.js","name":"Promise","original":{"line":85,"column":19},"generated":{"line":1,"column":1129}},{"source":"data/mongo_access.js","original":{"line":85,"column":27},"generated":{"line":1,"column":1137}},{"source":"data/mongo_access.js","name":"resolve","original":{"line":85,"column":28},"generated":{"line":1,"column":1146}},{"source":"data/mongo_access.js","name":"reject","original":{"line":85,"column":37},"generated":{"line":1,"column":1148}},{"source":"data/mongo_access.js","name":"db","original":{"line":86,"column":12},"generated":{"line":1,"column":1151}},{"source":"data/mongo_access.js","name":"collection","original":{"line":86,"column":15},"generated":{"line":1,"column":1153}},{"source":"data/mongo_access.js","name":"collection","original":{"line":86,"column":26},"generated":{"line":1,"column":1164}},{"source":"data/mongo_access.js","name":"updateOne","original":{"line":86,"column":38},"generated":{"line":1,"column":1167}},{"source":"data/mongo_access.js","original":{"line":86,"column":48},"generated":{"line":1,"column":1177}},{"source":"data/mongo_access.js","name":"_id","original":{"line":87,"column":16},"generated":{"line":1,"column":1178}},{"source":"data/mongo_access.js","name":"ObjectId","original":{"line":87,"column":21},"generated":{"line":1,"column":1182}},{"source":"data/mongo_access.js","name":"id","original":{"line":87,"column":30},"generated":{"line":1,"column":1184}},{"source":"data/mongo_access.js","original":{"line":88,"column":15},"generated":{"line":1,"column":1188}},{"source":"data/mongo_access.js","name":"$set","original":{"line":89,"column":16},"generated":{"line":1,"column":1189}},{"source":"data/mongo_access.js","name":"item","original":{"line":89,"column":22},"generated":{"line":1,"column":1194}},{"source":"data/mongo_access.js","original":{"line":90,"column":15},"generated":{"line":1,"column":1197}},{"source":"data/mongo_access.js","name":"err","original":{"line":90,"column":16},"generated":{"line":1,"column":1206}},{"source":"data/mongo_access.js","name":"data","original":{"line":90,"column":21},"generated":{"line":1,"column":1208}},{"source":"data/mongo_access.js","name":"err","original":{"line":91,"column":16},"generated":{"line":1,"column":1211}},{"source":"data/mongo_access.js","name":"reject","original":{"line":91,"column":22},"generated":{"line":1,"column":1213}},{"source":"data/mongo_access.js","name":"err","original":{"line":91,"column":29},"generated":{"line":1,"column":1215}},{"source":"data/mongo_access.js","name":"resolve","original":{"line":91,"column":36},"generated":{"line":1,"column":1218}},{"source":"data/mongo_access.js","name":"data","original":{"line":91,"column":44},"generated":{"line":1,"column":1220}},{"source":"data/mongo_access.js","name":"disable","original":{"line":98,"column":4},"generated":{"line":1,"column":1228}},{"source":"data/mongo_access.js","original":{"line":98,"column":13},"generated":{"line":1,"column":1236}},{"source":"data/mongo_access.js","name":"db","original":{"line":98,"column":14},"generated":{"line":1,"column":1245}},{"source":"data/mongo_access.js","name":"collection","original":{"line":98,"column":18},"generated":{"line":1,"column":1247}},{"source":"data/mongo_access.js","name":"id","original":{"line":98,"column":30},"generated":{"line":1,"column":1249}},{"source":"data/mongo_access.js","original":{"line":99,"column":15},"generated":{"line":1,"column":1252}},{"source":"data/mongo_access.js","original":{"line":99,"column":15},"generated":{"line":1,"column":1259}},{"source":"data/mongo_access.js","name":"Promise","original":{"line":99,"column":19},"generated":{"line":1,"column":1263}},{"source":"data/mongo_access.js","original":{"line":99,"column":27},"generated":{"line":1,"column":1271}},{"source":"data/mongo_access.js","name":"resolve","original":{"line":99,"column":28},"generated":{"line":1,"column":1280}},{"source":"data/mongo_access.js","name":"reject","original":{"line":99,"column":37},"generated":{"line":1,"column":1282}},{"source":"data/mongo_access.js","name":"db","original":{"line":100,"column":12},"generated":{"line":1,"column":1285}},{"source":"data/mongo_access.js","name":"collection","original":{"line":100,"column":15},"generated":{"line":1,"column":1287}},{"source":"data/mongo_access.js","name":"collection","original":{"line":100,"column":26},"generated":{"line":1,"column":1298}},{"source":"data/mongo_access.js","name":"deleteOne","original":{"line":100,"column":38},"generated":{"line":1,"column":1301}},{"source":"data/mongo_access.js","original":{"line":100,"column":48},"generated":{"line":1,"column":1311}},{"source":"data/mongo_access.js","name":"_id","original":{"line":101,"column":16},"generated":{"line":1,"column":1312}},{"source":"data/mongo_access.js","name":"ObjectId","original":{"line":101,"column":21},"generated":{"line":1,"column":1316}},{"source":"data/mongo_access.js","name":"id","original":{"line":101,"column":30},"generated":{"line":1,"column":1318}},{"source":"data/mongo_access.js","original":{"line":102,"column":15},"generated":{"line":1,"column":1322}},{"source":"data/mongo_access.js","name":"err","original":{"line":102,"column":16},"generated":{"line":1,"column":1331}},{"source":"data/mongo_access.js","name":"data","original":{"line":102,"column":21},"generated":{"line":1,"column":1333}},{"source":"data/mongo_access.js","name":"err","original":{"line":103,"column":16},"generated":{"line":1,"column":1336}},{"source":"data/mongo_access.js","name":"reject","original":{"line":103,"column":22},"generated":{"line":1,"column":1338}},{"source":"data/mongo_access.js","name":"err","original":{"line":103,"column":29},"generated":{"line":1,"column":1340}},{"source":"data/mongo_access.js","name":"resolve","original":{"line":103,"column":36},"generated":{"line":1,"column":1343}},{"source":"data/mongo_access.js","name":"data","original":{"line":103,"column":44},"generated":{"line":1,"column":1345}},{"source":"data/mongo_access.js","name":"destroy","original":{"line":109,"column":4},"generated":{"line":1,"column":1353}},{"source":"data/mongo_access.js","original":{"line":109,"column":13},"generated":{"line":1,"column":1361}},{"source":"data/mongo_access.js","name":"db","original":{"line":109,"column":14},"generated":{"line":1,"column":1370}},{"source":"data/mongo_access.js","name":"collection","original":{"line":109,"column":18},"generated":{"line":1,"column":1372}},{"source":"data/mongo_access.js","name":"id","original":{"line":109,"column":30},"generated":{"line":1,"column":1374}},{"source":"data/mongo_access.js","original":{"line":110,"column":15},"generated":{"line":1,"column":1377}},{"source":"data/mongo_access.js","original":{"line":110,"column":15},"generated":{"line":1,"column":1384}},{"source":"data/mongo_access.js","name":"Promise","original":{"line":110,"column":19},"generated":{"line":1,"column":1388}},{"source":"data/mongo_access.js","original":{"line":110,"column":27},"generated":{"line":1,"column":1396}},{"source":"data/mongo_access.js","name":"resolve","original":{"line":110,"column":28},"generated":{"line":1,"column":1405}},{"source":"data/mongo_access.js","name":"reject","original":{"line":110,"column":37},"generated":{"line":1,"column":1407}},{"source":"data/mongo_access.js","name":"db","original":{"line":111,"column":12},"generated":{"line":1,"column":1410}},{"source":"data/mongo_access.js","name":"collection","original":{"line":111,"column":15},"generated":{"line":1,"column":1412}},{"source":"data/mongo_access.js","name":"collection","original":{"line":111,"column":26},"generated":{"line":1,"column":1423}},{"source":"data/mongo_access.js","name":"deleteOne","original":{"line":111,"column":38},"generated":{"line":1,"column":1426}},{"source":"data/mongo_access.js","original":{"line":111,"column":48},"generated":{"line":1,"column":1436}},{"source":"data/mongo_access.js","name":"_id","original":{"line":112,"column":16},"generated":{"line":1,"column":1437}},{"source":"data/mongo_access.js","name":"ObjectId","original":{"line":112,"column":21},"generated":{"line":1,"column":1441}},{"source":"data/mongo_access.js","name":"id","original":{"line":112,"column":30},"generated":{"line":1,"column":1443}},{"source":"data/mongo_access.js","original":{"line":113,"column":15},"generated":{"line":1,"column":1447}},{"source":"data/mongo_access.js","name":"err","original":{"line":113,"column":16},"generated":{"line":1,"column":1456}},{"source":"data/mongo_access.js","name":"data","original":{"line":113,"column":21},"generated":{"line":1,"column":1458}},{"source":"data/mongo_access.js","name":"err","original":{"line":114,"column":16},"generated":{"line":1,"column":1461}},{"source":"data/mongo_access.js","name":"reject","original":{"line":114,"column":22},"generated":{"line":1,"column":1463}},{"source":"data/mongo_access.js","name":"err","original":{"line":114,"column":29},"generated":{"line":1,"column":1465}},{"source":"data/mongo_access.js","name":"resolve","original":{"line":114,"column":36},"generated":{"line":1,"column":1468}},{"source":"data/mongo_access.js","name":"data","original":{"line":114,"column":44},"generated":{"line":1,"column":1470}},{"source":"data/mongo_access.js","name":"count","original":{"line":120,"column":4},"generated":{"line":1,"column":1478}},{"source":"data/mongo_access.js","original":{"line":120,"column":11},"generated":{"line":1,"column":1484}},{"source":"data/mongo_access.js","name":"db","original":{"line":120,"column":12},"generated":{"line":1,"column":1493}},{"source":"data/mongo_access.js","name":"collection","original":{"line":120,"column":16},"generated":{"line":1,"column":1495}},{"source":"data/mongo_access.js","name":"filter","original":{"line":120,"column":28},"generated":{"line":1,"column":1497}},{"source":"data/mongo_access.js","original":{"line":121,"column":15},"generated":{"line":1,"column":1500}},{"source":"data/mongo_access.js","original":{"line":121,"column":15},"generated":{"line":1,"column":1507}},{"source":"data/mongo_access.js","name":"Promise","original":{"line":121,"column":19},"generated":{"line":1,"column":1511}},{"source":"data/mongo_access.js","original":{"line":121,"column":27},"generated":{"line":1,"column":1519}},{"source":"data/mongo_access.js","name":"resolve","original":{"line":121,"column":28},"generated":{"line":1,"column":1528}},{"source":"data/mongo_access.js","name":"_","original":{"line":121,"column":37},"generated":{"line":1,"column":1530}},{"source":"data/mongo_access.js","name":"resolve","original":{"line":123,"column":12},"generated":{"line":1,"column":1533}},{"source":"data/mongo_access.js","name":"db","original":{"line":122,"column":26},"generated":{"line":1,"column":1535}},{"source":"data/mongo_access.js","name":"collection","original":{"line":122,"column":29},"generated":{"line":1,"column":1537}},{"source":"data/mongo_access.js","name":"collection","original":{"line":122,"column":40},"generated":{"line":1,"column":1548}},{"source":"data/mongo_access.js","name":"find","original":{"line":122,"column":52},"generated":{"line":1,"column":1551}},{"source":"data/mongo_access.js","name":"filter","original":{"line":122,"column":57},"generated":{"line":1,"column":1556}},{"source":"data/mongo_access.js","name":"count","original":{"line":122,"column":65},"generated":{"line":1,"column":1559}}],"sources":{"data/mongo_access.js":"/* eslint-disable no-unused-vars */\nimport mongodb from 'mongodb'\n\nconst mongoClient = mongodb.MongoClient\nconst ObjectId = mongodb.ObjectId\n\nmodule.exports = {\n\n    // init\n    setup_database: (db_url, database_name, options, collections) => {\n        return new Promise((resolve, reject) => {\n            mongoClient.connect(db_url, options, (err, client) => {\n                collections.forEach(coll => {\n                    client.db(database_name).createCollection(coll, (err) => {\n                        err ? reject(err) : resolve(coll)\n\n                        if (coll === collections[collections.length - 1]) { client.close() }\n                    })\n                })\n            })\n        })\n    },\n\n    // get connection\n    get_connection: (db_url, database_name, options) => {\n        return new Promise((resolve, reject) => {\n            mongoClient.connect(db_url, options, (err, client) => {\n                err ? reject(err) : resolve(client.db(database_name))\n            })\n        })\n    },\n\n    // create\n    create: (db, collection, item) => {\n        return new Promise((resolve, reject) => {\n            db.collection(collection).insertOne(item,\n                (err, data) => {\n                    err ? reject(err) : resolve(data)\n                })\n        })\n    },\n\n    // get list\n    getlist: (db, collection, paging) => {\n\n        if (paging.filter['_id']) {\n            paging.filter['_id'] = ObjectId(paging.filter['_id'])\n        }\n\n        if (paging.lastid) {\n            return new Promise((resolve, reject) => {\n                db.collection(collection).find({ '_id': { '$gt': ObjectId(paging.lastid) } })\n                    .limit(paging.page_limit)\n                    .toArray((err, data) => {\n                        err ? reject(err) : resolve(data)\n                    })\n            })\n        } else {\n            return new Promise((resolve, reject) => {\n                db.collection(collection).find(paging.filter)\n                    .skip(paging.page_limit * (paging.page - 1)).limit(paging.page_limit)\n                    .toArray((err, data) => {\n                        err ? reject(err) : resolve(data)\n                    })\n            })\n        }\n    },\n\n    // get one\n    getone: (db, collection, filter) => {\n        if (filter['_id']) {\n            filter['_id'] = ObjectId(filter['_id'])\n        }\n\n        return new Promise((resolve, reject) => {\n            db.collection(collection).findOne(filter,\n                (err, data) => {\n                    err ? reject(err) : resolve(data)\n                })\n        })\n    },\n\n    // update\n    updateone: (db, collection, id, item) => {\n        return new Promise((resolve, reject) => {\n            db.collection(collection).updateOne({\n                _id: ObjectId(id)\n            }, {\n                $set: item\n            }, (err, data) => {\n                err ? reject(err) : resolve(data)\n            })\n        })\n    },\n\n    // disable\n    //TODO: change to disable\n    disable: (db, collection, id) => {\n        return new Promise((resolve, reject) => {\n            db.collection(collection).deleteOne({\n                _id: ObjectId(id)\n            }, (err, data) => {\n                err ? reject(err) : resolve(data)\n            })\n        })\n    },\n\n    // delete\n    destroy: (db, collection, id) => {\n        return new Promise((resolve, reject) => {\n            db.collection(collection).deleteOne({\n                _id: ObjectId(id)\n            }, (err, data) => {\n                err ? reject(err) : resolve(data)\n            })\n        })\n    },\n\n    // item count\n    count: (db, collection, filter) => {\n        return new Promise((resolve, _) => {\n            const count = db.collection(collection).find(filter).count()\n            resolve(count)\n        })\n    }\n\n}"},"lineCount":null}},"error":null,"hash":"4f7f3f3fb122bb13640b92137281caab","cacheData":{"env":{}}}