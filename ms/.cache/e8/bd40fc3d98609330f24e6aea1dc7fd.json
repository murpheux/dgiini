{"id":"8DCa","dependencies":[{"name":"/Users/murpheux/Workspace/projects/dgiini/microservices/.babelrc","includedInParent":true,"mtime":1557029603000},{"name":"/Users/murpheux/Workspace/projects/dgiini/microservices/package.json","includedInParent":true,"mtime":1563334619778}],"generated":{"js":"\"use strict\";var e=i(require(\"mongodb\"));function i(e){return e&&e.__esModule?e:{default:e}}const t=e.default.MongoClient,o=e.default.ObjectId;module.exports={setup_database:(e,i,o,n)=>new Promise((l,c)=>{t.connect(e,o,(e,t)=>{n.forEach(e=>{t.db(i).createCollection(e,i=>{i?c(i):l(e),e===n[n.length-1]&&t.close()})})})}),get_connection:(e,i,o)=>new Promise((n,l)=>{t.connect(e,o,(e,t)=>{e?l(e):n(t.db(i))})}),create:(e,i,t)=>new Promise((o,n)=>{e.collection(i).insertOne(t,(e,i)=>{e?n(e):o(i)})}),getlist:(e,i,t)=>(t.filter._id&&(t.filter._id=o(t.filter._id)),t.lastid?new Promise((n,l)=>{e.collection(i).find({_id:{$gt:o(t.lastid)}}).limit(t.page_limit).toArray((e,i)=>{e?l(e):n(i)})}):new Promise((o,n)=>{e.collection(i).find(t.filter).skip(t.page_limit*(t.page-1)).limit(t.page_limit).toArray((e,i)=>{e?n(e):o(i)})})),getone:(e,i,t)=>(t._id&&(t._id=o(t._id)),new Promise((o,n)=>{e.collection(i).findOne(t,(e,i)=>{e?n(e):o(i)})})),updateone:(e,i,t,n)=>new Promise((l,c)=>{e.collection(i).updateOne({_id:o(t)},{$set:n},(e,i)=>{e?c(e):l(i)})}),disable:(e,i,t)=>new Promise((n,l)=>{e.collection(i).deleteOne({_id:o(t)},(e,i)=>{e?l(e):n(i)})}),destroy:(e,i,t)=>new Promise((n,l)=>{e.collection(i).deleteOne({_id:o(t)},(e,i)=>{e?l(e):n(i)})}),count:(e,i,t)=>new Promise((o,n)=>{o(e.collection(i).find(t).count())})};"},"sourceMaps":{"js":{"mappings":[{"source":"data/mongo_access.js","original":{"line":7,"column":0},"generated":{"line":1,"column":0}},{"source":"data/mongo_access.js","original":{"line":2,"column":0},"generated":{"line":1,"column":13}},{"source":"data/mongo_access.js","original":{"line":2,"column":0},"generated":{"line":1,"column":17}},{"source":"data/mongo_access.js","original":{"line":2,"column":0},"generated":{"line":1,"column":19}},{"source":"data/mongo_access.js","original":{"line":2,"column":0},"generated":{"line":1,"column":21}},{"source":"data/mongo_access.js","original":{"line":2,"column":0},"generated":{"line":1,"column":29}},{"source":"data/mongo_access.js","original":{"line":7,"column":0},"generated":{"line":1,"column":41}},{"source":"data/mongo_access.js","original":{"line":7,"column":0},"generated":{"line":1,"column":50}},{"source":"data/mongo_access.js","original":{"line":7,"column":0},"generated":{"line":1,"column":52}},{"source":"data/mongo_access.js","original":{"line":7,"column":0},"generated":{"line":1,"column":55}},{"source":"data/mongo_access.js","original":{"line":7,"column":0},"generated":{"line":1,"column":62}},{"source":"data/mongo_access.js","original":{"line":7,"column":0},"generated":{"line":1,"column":65}},{"source":"data/mongo_access.js","original":{"line":7,"column":0},"generated":{"line":1,"column":67}},{"source":"data/mongo_access.js","original":{"line":7,"column":0},"generated":{"line":1,"column":78}},{"source":"data/mongo_access.js","original":{"line":7,"column":0},"generated":{"line":1,"column":80}},{"source":"data/mongo_access.js","original":{"line":7,"column":0},"generated":{"line":1,"column":81}},{"source":"data/mongo_access.js","original":{"line":7,"column":0},"generated":{"line":1,"column":89}},{"source":"data/mongo_access.js","original":{"line":4,"column":0},"generated":{"line":1,"column":92}},{"source":"data/mongo_access.js","name":"mongoClient","original":{"line":4,"column":6},"generated":{"line":1,"column":98}},{"source":"data/mongo_access.js","name":"mongodb","original":{"line":4,"column":20},"generated":{"line":1,"column":100}},{"source":"data/mongo_access.js","name":"MongoClient","original":{"line":4,"column":28},"generated":{"line":1,"column":102}},{"source":"data/mongo_access.js","name":"MongoClient","original":{"line":4,"column":28},"generated":{"line":1,"column":110}},{"source":"data/mongo_access.js","name":"ObjectId","original":{"line":5,"column":6},"generated":{"line":1,"column":122}},{"source":"data/mongo_access.js","name":"mongodb","original":{"line":5,"column":17},"generated":{"line":1,"column":124}},{"source":"data/mongo_access.js","name":"ObjectId","original":{"line":5,"column":25},"generated":{"line":1,"column":126}},{"source":"data/mongo_access.js","name":"ObjectId","original":{"line":5,"column":25},"generated":{"line":1,"column":134}},{"source":"data/mongo_access.js","name":"module","original":{"line":7,"column":0},"generated":{"line":1,"column":143}},{"source":"data/mongo_access.js","name":"exports","original":{"line":7,"column":7},"generated":{"line":1,"column":150}},{"source":"data/mongo_access.js","original":{"line":7,"column":17},"generated":{"line":1,"column":158}},{"source":"data/mongo_access.js","name":"setup_database","original":{"line":10,"column":4},"generated":{"line":1,"column":159}},{"source":"data/mongo_access.js","original":{"line":10,"column":20},"generated":{"line":1,"column":174}},{"source":"data/mongo_access.js","name":"db_url","original":{"line":10,"column":21},"generated":{"line":1,"column":175}},{"source":"data/mongo_access.js","name":"database_name","original":{"line":10,"column":29},"generated":{"line":1,"column":177}},{"source":"data/mongo_access.js","name":"options","original":{"line":10,"column":44},"generated":{"line":1,"column":179}},{"source":"data/mongo_access.js","name":"collections","original":{"line":10,"column":53},"generated":{"line":1,"column":181}},{"source":"data/mongo_access.js","original":{"line":11,"column":15},"generated":{"line":1,"column":185}},{"source":"data/mongo_access.js","name":"Promise","original":{"line":11,"column":19},"generated":{"line":1,"column":189}},{"source":"data/mongo_access.js","original":{"line":11,"column":27},"generated":{"line":1,"column":197}},{"source":"data/mongo_access.js","name":"resolve","original":{"line":11,"column":28},"generated":{"line":1,"column":198}},{"source":"data/mongo_access.js","name":"reject","original":{"line":11,"column":37},"generated":{"line":1,"column":200}},{"source":"data/mongo_access.js","name":"mongoClient","original":{"line":12,"column":12},"generated":{"line":1,"column":205}},{"source":"data/mongo_access.js","name":"connect","original":{"line":12,"column":24},"generated":{"line":1,"column":207}},{"source":"data/mongo_access.js","name":"db_url","original":{"line":12,"column":32},"generated":{"line":1,"column":215}},{"source":"data/mongo_access.js","name":"options","original":{"line":12,"column":40},"generated":{"line":1,"column":217}},{"source":"data/mongo_access.js","original":{"line":12,"column":49},"generated":{"line":1,"column":219}},{"source":"data/mongo_access.js","name":"err","original":{"line":12,"column":50},"generated":{"line":1,"column":220}},{"source":"data/mongo_access.js","name":"client","original":{"line":12,"column":55},"generated":{"line":1,"column":222}},{"source":"data/mongo_access.js","name":"collections","original":{"line":13,"column":16},"generated":{"line":1,"column":227}},{"source":"data/mongo_access.js","name":"forEach","original":{"line":13,"column":28},"generated":{"line":1,"column":229}},{"source":"data/mongo_access.js","name":"coll","original":{"line":13,"column":36},"generated":{"line":1,"column":237}},{"source":"data/mongo_access.js","name":"client","original":{"line":14,"column":20},"generated":{"line":1,"column":241}},{"source":"data/mongo_access.js","name":"db","original":{"line":14,"column":27},"generated":{"line":1,"column":243}},{"source":"data/mongo_access.js","name":"database_name","original":{"line":14,"column":30},"generated":{"line":1,"column":246}},{"source":"data/mongo_access.js","name":"createCollection","original":{"line":14,"column":45},"generated":{"line":1,"column":249}},{"source":"data/mongo_access.js","name":"coll","original":{"line":14,"column":62},"generated":{"line":1,"column":266}},{"source":"data/mongo_access.js","name":"err","original":{"line":14,"column":69},"generated":{"line":1,"column":268}},{"source":"data/mongo_access.js","name":"err","original":{"line":15,"column":24},"generated":{"line":1,"column":272}},{"source":"data/mongo_access.js","name":"reject","original":{"line":15,"column":30},"generated":{"line":1,"column":274}},{"source":"data/mongo_access.js","name":"err","original":{"line":15,"column":37},"generated":{"line":1,"column":276}},{"source":"data/mongo_access.js","name":"resolve","original":{"line":15,"column":44},"generated":{"line":1,"column":279}},{"source":"data/mongo_access.js","name":"coll","original":{"line":15,"column":52},"generated":{"line":1,"column":281}},{"source":"data/mongo_access.js","name":"coll","original":{"line":17,"column":28},"generated":{"line":1,"column":284}},{"source":"data/mongo_access.js","name":"collections","original":{"line":17,"column":37},"generated":{"line":1,"column":288}},{"source":"data/mongo_access.js","name":"collections","original":{"line":17,"column":49},"generated":{"line":1,"column":290}},{"source":"data/mongo_access.js","name":"length","original":{"line":17,"column":61},"generated":{"line":1,"column":292}},{"source":"data/mongo_access.js","original":{"line":17,"column":70},"generated":{"line":1,"column":299}},{"source":"data/mongo_access.js","name":"client","original":{"line":17,"column":76},"generated":{"line":1,"column":303}},{"source":"data/mongo_access.js","name":"close","original":{"line":17,"column":83},"generated":{"line":1,"column":305}},{"source":"data/mongo_access.js","name":"get_connection","original":{"line":25,"column":4},"generated":{"line":1,"column":321}},{"source":"data/mongo_access.js","original":{"line":25,"column":20},"generated":{"line":1,"column":336}},{"source":"data/mongo_access.js","name":"db_url","original":{"line":25,"column":21},"generated":{"line":1,"column":337}},{"source":"data/mongo_access.js","name":"database_name","original":{"line":25,"column":29},"generated":{"line":1,"column":339}},{"source":"data/mongo_access.js","name":"options","original":{"line":25,"column":44},"generated":{"line":1,"column":341}},{"source":"data/mongo_access.js","original":{"line":26,"column":15},"generated":{"line":1,"column":345}},{"source":"data/mongo_access.js","name":"Promise","original":{"line":26,"column":19},"generated":{"line":1,"column":349}},{"source":"data/mongo_access.js","original":{"line":26,"column":27},"generated":{"line":1,"column":357}},{"source":"data/mongo_access.js","name":"resolve","original":{"line":26,"column":28},"generated":{"line":1,"column":358}},{"source":"data/mongo_access.js","name":"reject","original":{"line":26,"column":37},"generated":{"line":1,"column":360}},{"source":"data/mongo_access.js","name":"mongoClient","original":{"line":27,"column":12},"generated":{"line":1,"column":365}},{"source":"data/mongo_access.js","name":"connect","original":{"line":27,"column":24},"generated":{"line":1,"column":367}},{"source":"data/mongo_access.js","name":"db_url","original":{"line":27,"column":32},"generated":{"line":1,"column":375}},{"source":"data/mongo_access.js","name":"options","original":{"line":27,"column":40},"generated":{"line":1,"column":377}},{"source":"data/mongo_access.js","original":{"line":27,"column":49},"generated":{"line":1,"column":379}},{"source":"data/mongo_access.js","name":"err","original":{"line":27,"column":50},"generated":{"line":1,"column":380}},{"source":"data/mongo_access.js","name":"client","original":{"line":27,"column":55},"generated":{"line":1,"column":382}},{"source":"data/mongo_access.js","name":"err","original":{"line":28,"column":16},"generated":{"line":1,"column":387}},{"source":"data/mongo_access.js","name":"reject","original":{"line":28,"column":22},"generated":{"line":1,"column":389}},{"source":"data/mongo_access.js","name":"err","original":{"line":28,"column":29},"generated":{"line":1,"column":391}},{"source":"data/mongo_access.js","name":"resolve","original":{"line":28,"column":36},"generated":{"line":1,"column":394}},{"source":"data/mongo_access.js","name":"client","original":{"line":28,"column":44},"generated":{"line":1,"column":396}},{"source":"data/mongo_access.js","name":"db","original":{"line":28,"column":51},"generated":{"line":1,"column":398}},{"source":"data/mongo_access.js","name":"database_name","original":{"line":28,"column":54},"generated":{"line":1,"column":401}},{"source":"data/mongo_access.js","name":"create","original":{"line":34,"column":4},"generated":{"line":1,"column":409}},{"source":"data/mongo_access.js","original":{"line":34,"column":12},"generated":{"line":1,"column":416}},{"source":"data/mongo_access.js","name":"db","original":{"line":34,"column":13},"generated":{"line":1,"column":417}},{"source":"data/mongo_access.js","name":"collection","original":{"line":34,"column":17},"generated":{"line":1,"column":419}},{"source":"data/mongo_access.js","name":"item","original":{"line":34,"column":29},"generated":{"line":1,"column":421}},{"source":"data/mongo_access.js","original":{"line":35,"column":15},"generated":{"line":1,"column":425}},{"source":"data/mongo_access.js","name":"Promise","original":{"line":35,"column":19},"generated":{"line":1,"column":429}},{"source":"data/mongo_access.js","original":{"line":35,"column":27},"generated":{"line":1,"column":437}},{"source":"data/mongo_access.js","name":"resolve","original":{"line":35,"column":28},"generated":{"line":1,"column":438}},{"source":"data/mongo_access.js","name":"reject","original":{"line":35,"column":37},"generated":{"line":1,"column":440}},{"source":"data/mongo_access.js","name":"db","original":{"line":36,"column":12},"generated":{"line":1,"column":445}},{"source":"data/mongo_access.js","name":"collection","original":{"line":36,"column":15},"generated":{"line":1,"column":447}},{"source":"data/mongo_access.js","name":"collection","original":{"line":36,"column":26},"generated":{"line":1,"column":458}},{"source":"data/mongo_access.js","name":"insertOne","original":{"line":36,"column":38},"generated":{"line":1,"column":461}},{"source":"data/mongo_access.js","name":"item","original":{"line":36,"column":48},"generated":{"line":1,"column":471}},{"source":"data/mongo_access.js","original":{"line":37,"column":16},"generated":{"line":1,"column":473}},{"source":"data/mongo_access.js","name":"err","original":{"line":37,"column":17},"generated":{"line":1,"column":474}},{"source":"data/mongo_access.js","name":"data","original":{"line":37,"column":22},"generated":{"line":1,"column":476}},{"source":"data/mongo_access.js","name":"err","original":{"line":38,"column":20},"generated":{"line":1,"column":481}},{"source":"data/mongo_access.js","name":"reject","original":{"line":38,"column":26},"generated":{"line":1,"column":483}},{"source":"data/mongo_access.js","name":"err","original":{"line":38,"column":33},"generated":{"line":1,"column":485}},{"source":"data/mongo_access.js","name":"resolve","original":{"line":38,"column":40},"generated":{"line":1,"column":488}},{"source":"data/mongo_access.js","name":"data","original":{"line":38,"column":48},"generated":{"line":1,"column":490}},{"source":"data/mongo_access.js","name":"getlist","original":{"line":44,"column":4},"generated":{"line":1,"column":497}},{"source":"data/mongo_access.js","original":{"line":44,"column":13},"generated":{"line":1,"column":505}},{"source":"data/mongo_access.js","name":"db","original":{"line":44,"column":14},"generated":{"line":1,"column":506}},{"source":"data/mongo_access.js","name":"collection","original":{"line":44,"column":18},"generated":{"line":1,"column":508}},{"source":"data/mongo_access.js","name":"paging","original":{"line":44,"column":30},"generated":{"line":1,"column":510}},{"source":"data/mongo_access.js","name":"paging","original":{"line":46,"column":12},"generated":{"line":1,"column":515}},{"source":"data/mongo_access.js","name":"filter","original":{"line":46,"column":19},"generated":{"line":1,"column":517}},{"source":"data/mongo_access.js","original":{"line":46,"column":12},"generated":{"line":1,"column":524}},{"source":"data/mongo_access.js","name":"paging","original":{"line":47,"column":12},"generated":{"line":1,"column":530}},{"source":"data/mongo_access.js","name":"filter","original":{"line":47,"column":19},"generated":{"line":1,"column":532}},{"source":"data/mongo_access.js","original":{"line":47,"column":12},"generated":{"line":1,"column":539}},{"source":"data/mongo_access.js","name":"ObjectId","original":{"line":47,"column":35},"generated":{"line":1,"column":543}},{"source":"data/mongo_access.js","name":"paging","original":{"line":47,"column":44},"generated":{"line":1,"column":545}},{"source":"data/mongo_access.js","name":"filter","original":{"line":47,"column":51},"generated":{"line":1,"column":547}},{"source":"data/mongo_access.js","original":{"line":47,"column":44},"generated":{"line":1,"column":554}},{"source":"data/mongo_access.js","name":"paging","original":{"line":50,"column":12},"generated":{"line":1,"column":560}},{"source":"data/mongo_access.js","name":"lastid","original":{"line":50,"column":19},"generated":{"line":1,"column":562}},{"source":"data/mongo_access.js","original":{"line":51,"column":19},"generated":{"line":1,"column":569}},{"source":"data/mongo_access.js","name":"Promise","original":{"line":51,"column":23},"generated":{"line":1,"column":573}},{"source":"data/mongo_access.js","original":{"line":51,"column":31},"generated":{"line":1,"column":581}},{"source":"data/mongo_access.js","name":"resolve","original":{"line":51,"column":32},"generated":{"line":1,"column":582}},{"source":"data/mongo_access.js","name":"reject","original":{"line":51,"column":41},"generated":{"line":1,"column":584}},{"source":"data/mongo_access.js","name":"db","original":{"line":52,"column":16},"generated":{"line":1,"column":589}},{"source":"data/mongo_access.js","name":"collection","original":{"line":52,"column":19},"generated":{"line":1,"column":591}},{"source":"data/mongo_access.js","name":"collection","original":{"line":52,"column":30},"generated":{"line":1,"column":602}},{"source":"data/mongo_access.js","name":"find","original":{"line":52,"column":42},"generated":{"line":1,"column":605}},{"source":"data/mongo_access.js","original":{"line":52,"column":47},"generated":{"line":1,"column":610}},{"source":"data/mongo_access.js","original":{"line":52,"column":56},"generated":{"line":1,"column":611}},{"source":"data/mongo_access.js","original":{"line":52,"column":56},"generated":{"line":1,"column":615}},{"source":"data/mongo_access.js","name":"ObjectId","original":{"line":52,"column":65},"generated":{"line":1,"column":616}},{"source":"data/mongo_access.js","name":"ObjectId","original":{"line":52,"column":65},"generated":{"line":1,"column":620}},{"source":"data/mongo_access.js","name":"paging","original":{"line":52,"column":74},"generated":{"line":1,"column":622}},{"source":"data/mongo_access.js","name":"lastid","original":{"line":52,"column":81},"generated":{"line":1,"column":624}},{"source":"data/mongo_access.js","name":"limit","original":{"line":53,"column":21},"generated":{"line":1,"column":635}},{"source":"data/mongo_access.js","name":"paging","original":{"line":53,"column":27},"generated":{"line":1,"column":641}},{"source":"data/mongo_access.js","name":"page_limit","original":{"line":53,"column":34},"generated":{"line":1,"column":643}},{"source":"data/mongo_access.js","name":"toArray","original":{"line":54,"column":21},"generated":{"line":1,"column":655}},{"source":"data/mongo_access.js","original":{"line":54,"column":29},"generated":{"line":1,"column":663}},{"source":"data/mongo_access.js","name":"err","original":{"line":54,"column":30},"generated":{"line":1,"column":664}},{"source":"data/mongo_access.js","name":"data","original":{"line":54,"column":35},"generated":{"line":1,"column":666}},{"source":"data/mongo_access.js","name":"err","original":{"line":55,"column":24},"generated":{"line":1,"column":671}},{"source":"data/mongo_access.js","name":"reject","original":{"line":55,"column":30},"generated":{"line":1,"column":673}},{"source":"data/mongo_access.js","name":"err","original":{"line":55,"column":37},"generated":{"line":1,"column":675}},{"source":"data/mongo_access.js","name":"resolve","original":{"line":55,"column":44},"generated":{"line":1,"column":678}},{"source":"data/mongo_access.js","name":"data","original":{"line":55,"column":52},"generated":{"line":1,"column":680}},{"source":"data/mongo_access.js","original":{"line":59,"column":19},"generated":{"line":1,"column":687}},{"source":"data/mongo_access.js","name":"Promise","original":{"line":59,"column":23},"generated":{"line":1,"column":691}},{"source":"data/mongo_access.js","original":{"line":59,"column":31},"generated":{"line":1,"column":699}},{"source":"data/mongo_access.js","name":"resolve","original":{"line":59,"column":32},"generated":{"line":1,"column":700}},{"source":"data/mongo_access.js","name":"reject","original":{"line":59,"column":41},"generated":{"line":1,"column":702}},{"source":"data/mongo_access.js","name":"db","original":{"line":60,"column":16},"generated":{"line":1,"column":707}},{"source":"data/mongo_access.js","name":"collection","original":{"line":60,"column":19},"generated":{"line":1,"column":709}},{"source":"data/mongo_access.js","name":"collection","original":{"line":60,"column":30},"generated":{"line":1,"column":720}},{"source":"data/mongo_access.js","name":"find","original":{"line":60,"column":42},"generated":{"line":1,"column":723}},{"source":"data/mongo_access.js","name":"paging","original":{"line":60,"column":47},"generated":{"line":1,"column":728}},{"source":"data/mongo_access.js","name":"filter","original":{"line":60,"column":54},"generated":{"line":1,"column":730}},{"source":"data/mongo_access.js","name":"skip","original":{"line":61,"column":21},"generated":{"line":1,"column":738}},{"source":"data/mongo_access.js","name":"paging","original":{"line":61,"column":26},"generated":{"line":1,"column":743}},{"source":"data/mongo_access.js","name":"page_limit","original":{"line":61,"column":33},"generated":{"line":1,"column":745}},{"source":"data/mongo_access.js","name":"paging","original":{"line":61,"column":47},"generated":{"line":1,"column":757}},{"source":"data/mongo_access.js","name":"page","original":{"line":61,"column":54},"generated":{"line":1,"column":759}},{"source":"data/mongo_access.js","original":{"line":61,"column":61},"generated":{"line":1,"column":764}},{"source":"data/mongo_access.js","name":"limit","original":{"line":61,"column":65},"generated":{"line":1,"column":768}},{"source":"data/mongo_access.js","name":"paging","original":{"line":61,"column":71},"generated":{"line":1,"column":774}},{"source":"data/mongo_access.js","name":"page_limit","original":{"line":61,"column":78},"generated":{"line":1,"column":776}},{"source":"data/mongo_access.js","name":"toArray","original":{"line":62,"column":21},"generated":{"line":1,"column":788}},{"source":"data/mongo_access.js","original":{"line":62,"column":29},"generated":{"line":1,"column":796}},{"source":"data/mongo_access.js","name":"err","original":{"line":62,"column":30},"generated":{"line":1,"column":797}},{"source":"data/mongo_access.js","name":"data","original":{"line":62,"column":35},"generated":{"line":1,"column":799}},{"source":"data/mongo_access.js","name":"err","original":{"line":63,"column":24},"generated":{"line":1,"column":804}},{"source":"data/mongo_access.js","name":"reject","original":{"line":63,"column":30},"generated":{"line":1,"column":806}},{"source":"data/mongo_access.js","name":"err","original":{"line":63,"column":37},"generated":{"line":1,"column":808}},{"source":"data/mongo_access.js","name":"resolve","original":{"line":63,"column":44},"generated":{"line":1,"column":811}},{"source":"data/mongo_access.js","name":"data","original":{"line":63,"column":52},"generated":{"line":1,"column":813}},{"source":"data/mongo_access.js","name":"getone","original":{"line":70,"column":4},"generated":{"line":1,"column":821}},{"source":"data/mongo_access.js","original":{"line":70,"column":12},"generated":{"line":1,"column":828}},{"source":"data/mongo_access.js","name":"db","original":{"line":70,"column":13},"generated":{"line":1,"column":829}},{"source":"data/mongo_access.js","name":"collection","original":{"line":70,"column":17},"generated":{"line":1,"column":831}},{"source":"data/mongo_access.js","name":"filter","original":{"line":70,"column":29},"generated":{"line":1,"column":833}},{"source":"data/mongo_access.js","name":"filter","original":{"line":71,"column":12},"generated":{"line":1,"column":838}},{"source":"data/mongo_access.js","original":{"line":71,"column":18},"generated":{"line":1,"column":840}},{"source":"data/mongo_access.js","name":"filter","original":{"line":72,"column":12},"generated":{"line":1,"column":846}},{"source":"data/mongo_access.js","original":{"line":72,"column":18},"generated":{"line":1,"column":848}},{"source":"data/mongo_access.js","name":"ObjectId","original":{"line":72,"column":28},"generated":{"line":1,"column":852}},{"source":"data/mongo_access.js","name":"filter","original":{"line":72,"column":37},"generated":{"line":1,"column":854}},{"source":"data/mongo_access.js","original":{"line":72,"column":43},"generated":{"line":1,"column":856}},{"source":"data/mongo_access.js","original":{"line":75,"column":15},"generated":{"line":1,"column":862}},{"source":"data/mongo_access.js","name":"Promise","original":{"line":75,"column":19},"generated":{"line":1,"column":866}},{"source":"data/mongo_access.js","original":{"line":75,"column":27},"generated":{"line":1,"column":874}},{"source":"data/mongo_access.js","name":"resolve","original":{"line":75,"column":28},"generated":{"line":1,"column":875}},{"source":"data/mongo_access.js","name":"reject","original":{"line":75,"column":37},"generated":{"line":1,"column":877}},{"source":"data/mongo_access.js","name":"db","original":{"line":76,"column":12},"generated":{"line":1,"column":882}},{"source":"data/mongo_access.js","name":"collection","original":{"line":76,"column":15},"generated":{"line":1,"column":884}},{"source":"data/mongo_access.js","name":"collection","original":{"line":76,"column":26},"generated":{"line":1,"column":895}},{"source":"data/mongo_access.js","name":"findOne","original":{"line":76,"column":38},"generated":{"line":1,"column":898}},{"source":"data/mongo_access.js","name":"filter","original":{"line":76,"column":46},"generated":{"line":1,"column":906}},{"source":"data/mongo_access.js","original":{"line":77,"column":16},"generated":{"line":1,"column":908}},{"source":"data/mongo_access.js","name":"err","original":{"line":77,"column":17},"generated":{"line":1,"column":909}},{"source":"data/mongo_access.js","name":"data","original":{"line":77,"column":22},"generated":{"line":1,"column":911}},{"source":"data/mongo_access.js","name":"err","original":{"line":78,"column":20},"generated":{"line":1,"column":916}},{"source":"data/mongo_access.js","name":"reject","original":{"line":78,"column":26},"generated":{"line":1,"column":918}},{"source":"data/mongo_access.js","name":"err","original":{"line":78,"column":33},"generated":{"line":1,"column":920}},{"source":"data/mongo_access.js","name":"resolve","original":{"line":78,"column":40},"generated":{"line":1,"column":923}},{"source":"data/mongo_access.js","name":"data","original":{"line":78,"column":48},"generated":{"line":1,"column":925}},{"source":"data/mongo_access.js","name":"updateone","original":{"line":84,"column":4},"generated":{"line":1,"column":933}},{"source":"data/mongo_access.js","original":{"line":84,"column":15},"generated":{"line":1,"column":943}},{"source":"data/mongo_access.js","name":"db","original":{"line":84,"column":16},"generated":{"line":1,"column":944}},{"source":"data/mongo_access.js","name":"collection","original":{"line":84,"column":20},"generated":{"line":1,"column":946}},{"source":"data/mongo_access.js","name":"id","original":{"line":84,"column":32},"generated":{"line":1,"column":948}},{"source":"data/mongo_access.js","name":"item","original":{"line":84,"column":36},"generated":{"line":1,"column":950}},{"source":"data/mongo_access.js","original":{"line":85,"column":15},"generated":{"line":1,"column":954}},{"source":"data/mongo_access.js","name":"Promise","original":{"line":85,"column":19},"generated":{"line":1,"column":958}},{"source":"data/mongo_access.js","original":{"line":85,"column":27},"generated":{"line":1,"column":966}},{"source":"data/mongo_access.js","name":"resolve","original":{"line":85,"column":28},"generated":{"line":1,"column":967}},{"source":"data/mongo_access.js","name":"reject","original":{"line":85,"column":37},"generated":{"line":1,"column":969}},{"source":"data/mongo_access.js","name":"db","original":{"line":86,"column":12},"generated":{"line":1,"column":974}},{"source":"data/mongo_access.js","name":"collection","original":{"line":86,"column":15},"generated":{"line":1,"column":976}},{"source":"data/mongo_access.js","name":"collection","original":{"line":86,"column":26},"generated":{"line":1,"column":987}},{"source":"data/mongo_access.js","name":"updateOne","original":{"line":86,"column":38},"generated":{"line":1,"column":990}},{"source":"data/mongo_access.js","original":{"line":86,"column":48},"generated":{"line":1,"column":1000}},{"source":"data/mongo_access.js","name":"_id","original":{"line":87,"column":16},"generated":{"line":1,"column":1001}},{"source":"data/mongo_access.js","name":"ObjectId","original":{"line":87,"column":21},"generated":{"line":1,"column":1005}},{"source":"data/mongo_access.js","name":"id","original":{"line":87,"column":30},"generated":{"line":1,"column":1007}},{"source":"data/mongo_access.js","original":{"line":88,"column":15},"generated":{"line":1,"column":1011}},{"source":"data/mongo_access.js","name":"$set","original":{"line":89,"column":16},"generated":{"line":1,"column":1012}},{"source":"data/mongo_access.js","name":"item","original":{"line":89,"column":22},"generated":{"line":1,"column":1017}},{"source":"data/mongo_access.js","original":{"line":90,"column":15},"generated":{"line":1,"column":1020}},{"source":"data/mongo_access.js","name":"err","original":{"line":90,"column":16},"generated":{"line":1,"column":1021}},{"source":"data/mongo_access.js","name":"data","original":{"line":90,"column":21},"generated":{"line":1,"column":1023}},{"source":"data/mongo_access.js","name":"err","original":{"line":91,"column":16},"generated":{"line":1,"column":1028}},{"source":"data/mongo_access.js","name":"reject","original":{"line":91,"column":22},"generated":{"line":1,"column":1030}},{"source":"data/mongo_access.js","name":"err","original":{"line":91,"column":29},"generated":{"line":1,"column":1032}},{"source":"data/mongo_access.js","name":"resolve","original":{"line":91,"column":36},"generated":{"line":1,"column":1035}},{"source":"data/mongo_access.js","name":"data","original":{"line":91,"column":44},"generated":{"line":1,"column":1037}},{"source":"data/mongo_access.js","name":"disable","original":{"line":98,"column":4},"generated":{"line":1,"column":1044}},{"source":"data/mongo_access.js","original":{"line":98,"column":13},"generated":{"line":1,"column":1052}},{"source":"data/mongo_access.js","name":"db","original":{"line":98,"column":14},"generated":{"line":1,"column":1053}},{"source":"data/mongo_access.js","name":"collection","original":{"line":98,"column":18},"generated":{"line":1,"column":1055}},{"source":"data/mongo_access.js","name":"id","original":{"line":98,"column":30},"generated":{"line":1,"column":1057}},{"source":"data/mongo_access.js","original":{"line":99,"column":15},"generated":{"line":1,"column":1061}},{"source":"data/mongo_access.js","name":"Promise","original":{"line":99,"column":19},"generated":{"line":1,"column":1065}},{"source":"data/mongo_access.js","original":{"line":99,"column":27},"generated":{"line":1,"column":1073}},{"source":"data/mongo_access.js","name":"resolve","original":{"line":99,"column":28},"generated":{"line":1,"column":1074}},{"source":"data/mongo_access.js","name":"reject","original":{"line":99,"column":37},"generated":{"line":1,"column":1076}},{"source":"data/mongo_access.js","name":"db","original":{"line":100,"column":12},"generated":{"line":1,"column":1081}},{"source":"data/mongo_access.js","name":"collection","original":{"line":100,"column":15},"generated":{"line":1,"column":1083}},{"source":"data/mongo_access.js","name":"collection","original":{"line":100,"column":26},"generated":{"line":1,"column":1094}},{"source":"data/mongo_access.js","name":"deleteOne","original":{"line":100,"column":38},"generated":{"line":1,"column":1097}},{"source":"data/mongo_access.js","original":{"line":100,"column":48},"generated":{"line":1,"column":1107}},{"source":"data/mongo_access.js","name":"_id","original":{"line":101,"column":16},"generated":{"line":1,"column":1108}},{"source":"data/mongo_access.js","name":"ObjectId","original":{"line":101,"column":21},"generated":{"line":1,"column":1112}},{"source":"data/mongo_access.js","name":"id","original":{"line":101,"column":30},"generated":{"line":1,"column":1114}},{"source":"data/mongo_access.js","original":{"line":102,"column":15},"generated":{"line":1,"column":1118}},{"source":"data/mongo_access.js","name":"err","original":{"line":102,"column":16},"generated":{"line":1,"column":1119}},{"source":"data/mongo_access.js","name":"data","original":{"line":102,"column":21},"generated":{"line":1,"column":1121}},{"source":"data/mongo_access.js","name":"err","original":{"line":103,"column":16},"generated":{"line":1,"column":1126}},{"source":"data/mongo_access.js","name":"reject","original":{"line":103,"column":22},"generated":{"line":1,"column":1128}},{"source":"data/mongo_access.js","name":"err","original":{"line":103,"column":29},"generated":{"line":1,"column":1130}},{"source":"data/mongo_access.js","name":"resolve","original":{"line":103,"column":36},"generated":{"line":1,"column":1133}},{"source":"data/mongo_access.js","name":"data","original":{"line":103,"column":44},"generated":{"line":1,"column":1135}},{"source":"data/mongo_access.js","name":"destroy","original":{"line":109,"column":4},"generated":{"line":1,"column":1142}},{"source":"data/mongo_access.js","original":{"line":109,"column":13},"generated":{"line":1,"column":1150}},{"source":"data/mongo_access.js","name":"db","original":{"line":109,"column":14},"generated":{"line":1,"column":1151}},{"source":"data/mongo_access.js","name":"collection","original":{"line":109,"column":18},"generated":{"line":1,"column":1153}},{"source":"data/mongo_access.js","name":"id","original":{"line":109,"column":30},"generated":{"line":1,"column":1155}},{"source":"data/mongo_access.js","original":{"line":110,"column":15},"generated":{"line":1,"column":1159}},{"source":"data/mongo_access.js","name":"Promise","original":{"line":110,"column":19},"generated":{"line":1,"column":1163}},{"source":"data/mongo_access.js","original":{"line":110,"column":27},"generated":{"line":1,"column":1171}},{"source":"data/mongo_access.js","name":"resolve","original":{"line":110,"column":28},"generated":{"line":1,"column":1172}},{"source":"data/mongo_access.js","name":"reject","original":{"line":110,"column":37},"generated":{"line":1,"column":1174}},{"source":"data/mongo_access.js","name":"db","original":{"line":111,"column":12},"generated":{"line":1,"column":1179}},{"source":"data/mongo_access.js","name":"collection","original":{"line":111,"column":15},"generated":{"line":1,"column":1181}},{"source":"data/mongo_access.js","name":"collection","original":{"line":111,"column":26},"generated":{"line":1,"column":1192}},{"source":"data/mongo_access.js","name":"deleteOne","original":{"line":111,"column":38},"generated":{"line":1,"column":1195}},{"source":"data/mongo_access.js","original":{"line":111,"column":48},"generated":{"line":1,"column":1205}},{"source":"data/mongo_access.js","name":"_id","original":{"line":112,"column":16},"generated":{"line":1,"column":1206}},{"source":"data/mongo_access.js","name":"ObjectId","original":{"line":112,"column":21},"generated":{"line":1,"column":1210}},{"source":"data/mongo_access.js","name":"id","original":{"line":112,"column":30},"generated":{"line":1,"column":1212}},{"source":"data/mongo_access.js","original":{"line":113,"column":15},"generated":{"line":1,"column":1216}},{"source":"data/mongo_access.js","name":"err","original":{"line":113,"column":16},"generated":{"line":1,"column":1217}},{"source":"data/mongo_access.js","name":"data","original":{"line":113,"column":21},"generated":{"line":1,"column":1219}},{"source":"data/mongo_access.js","name":"err","original":{"line":114,"column":16},"generated":{"line":1,"column":1224}},{"source":"data/mongo_access.js","name":"reject","original":{"line":114,"column":22},"generated":{"line":1,"column":1226}},{"source":"data/mongo_access.js","name":"err","original":{"line":114,"column":29},"generated":{"line":1,"column":1228}},{"source":"data/mongo_access.js","name":"resolve","original":{"line":114,"column":36},"generated":{"line":1,"column":1231}},{"source":"data/mongo_access.js","name":"data","original":{"line":114,"column":44},"generated":{"line":1,"column":1233}},{"source":"data/mongo_access.js","name":"count","original":{"line":120,"column":4},"generated":{"line":1,"column":1240}},{"source":"data/mongo_access.js","original":{"line":120,"column":11},"generated":{"line":1,"column":1246}},{"source":"data/mongo_access.js","name":"db","original":{"line":120,"column":12},"generated":{"line":1,"column":1247}},{"source":"data/mongo_access.js","name":"collection","original":{"line":120,"column":16},"generated":{"line":1,"column":1249}},{"source":"data/mongo_access.js","name":"filter","original":{"line":120,"column":28},"generated":{"line":1,"column":1251}},{"source":"data/mongo_access.js","original":{"line":121,"column":15},"generated":{"line":1,"column":1255}},{"source":"data/mongo_access.js","name":"Promise","original":{"line":121,"column":19},"generated":{"line":1,"column":1259}},{"source":"data/mongo_access.js","original":{"line":121,"column":27},"generated":{"line":1,"column":1267}},{"source":"data/mongo_access.js","name":"resolve","original":{"line":121,"column":28},"generated":{"line":1,"column":1268}},{"source":"data/mongo_access.js","name":"_","original":{"line":121,"column":37},"generated":{"line":1,"column":1270}},{"source":"data/mongo_access.js","name":"resolve","original":{"line":123,"column":12},"generated":{"line":1,"column":1275}},{"source":"data/mongo_access.js","name":"db","original":{"line":122,"column":26},"generated":{"line":1,"column":1277}},{"source":"data/mongo_access.js","name":"collection","original":{"line":122,"column":29},"generated":{"line":1,"column":1279}},{"source":"data/mongo_access.js","name":"collection","original":{"line":122,"column":40},"generated":{"line":1,"column":1290}},{"source":"data/mongo_access.js","name":"find","original":{"line":122,"column":52},"generated":{"line":1,"column":1293}},{"source":"data/mongo_access.js","name":"filter","original":{"line":122,"column":57},"generated":{"line":1,"column":1298}},{"source":"data/mongo_access.js","name":"count","original":{"line":122,"column":65},"generated":{"line":1,"column":1301}}],"sources":{"data/mongo_access.js":"/* eslint-disable no-unused-vars */\nimport mongodb from 'mongodb'\n\nconst mongoClient = mongodb.MongoClient\nconst ObjectId = mongodb.ObjectId\n\nmodule.exports = {\n\n    // init\n    setup_database: (db_url, database_name, options, collections) => {\n        return new Promise((resolve, reject) => {\n            mongoClient.connect(db_url, options, (err, client) => {\n                collections.forEach(coll => {\n                    client.db(database_name).createCollection(coll, (err) => {\n                        err ? reject(err) : resolve(coll)\n\n                        if (coll === collections[collections.length - 1]) { client.close() }\n                    })\n                })\n            })\n        })\n    },\n\n    // get connection\n    get_connection: (db_url, database_name, options) => {\n        return new Promise((resolve, reject) => {\n            mongoClient.connect(db_url, options, (err, client) => {\n                err ? reject(err) : resolve(client.db(database_name))\n            })\n        })\n    },\n\n    // create\n    create: (db, collection, item) => {\n        return new Promise((resolve, reject) => {\n            db.collection(collection).insertOne(item,\n                (err, data) => {\n                    err ? reject(err) : resolve(data)\n                })\n        })\n    },\n\n    // get list\n    getlist: (db, collection, paging) => {\n\n        if (paging.filter['_id']) {\n            paging.filter['_id'] = ObjectId(paging.filter['_id'])\n        }\n\n        if (paging.lastid) {\n            return new Promise((resolve, reject) => {\n                db.collection(collection).find({ '_id': { '$gt': ObjectId(paging.lastid) } })\n                    .limit(paging.page_limit)\n                    .toArray((err, data) => {\n                        err ? reject(err) : resolve(data)\n                    })\n            })\n        } else {\n            return new Promise((resolve, reject) => {\n                db.collection(collection).find(paging.filter)\n                    .skip(paging.page_limit * (paging.page - 1)).limit(paging.page_limit)\n                    .toArray((err, data) => {\n                        err ? reject(err) : resolve(data)\n                    })\n            })\n        }\n    },\n\n    // get one\n    getone: (db, collection, filter) => {\n        if (filter['_id']) {\n            filter['_id'] = ObjectId(filter['_id'])\n        }\n\n        return new Promise((resolve, reject) => {\n            db.collection(collection).findOne(filter,\n                (err, data) => {\n                    err ? reject(err) : resolve(data)\n                })\n        })\n    },\n\n    // update\n    updateone: (db, collection, id, item) => {\n        return new Promise((resolve, reject) => {\n            db.collection(collection).updateOne({\n                _id: ObjectId(id)\n            }, {\n                $set: item\n            }, (err, data) => {\n                err ? reject(err) : resolve(data)\n            })\n        })\n    },\n\n    // disable\n    //TODO: change to disable\n    disable: (db, collection, id) => {\n        return new Promise((resolve, reject) => {\n            db.collection(collection).deleteOne({\n                _id: ObjectId(id)\n            }, (err, data) => {\n                err ? reject(err) : resolve(data)\n            })\n        })\n    },\n\n    // delete\n    destroy: (db, collection, id) => {\n        return new Promise((resolve, reject) => {\n            db.collection(collection).deleteOne({\n                _id: ObjectId(id)\n            }, (err, data) => {\n                err ? reject(err) : resolve(data)\n            })\n        })\n    },\n\n    // item count\n    count: (db, collection, filter) => {\n        return new Promise((resolve, _) => {\n            const count = db.collection(collection).find(filter).count()\n            resolve(count)\n        })\n    }\n\n}"},"lineCount":null}},"error":null,"hash":"fa205857fa24a638ee8990ee7f0177bd","cacheData":{"env":{}}}